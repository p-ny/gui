{"remainingRequest":"C:\\gta go\\Gui\\node_modules\\babel-loader\\lib\\index.js!C:\\gta go\\Gui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\gta go\\Gui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\gta go\\Gui\\src\\views\\Smartphone\\components\\MessengerTab\\components\\ChatSection\\CanalSubsection\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\gta go\\Gui\\src\\views\\Smartphone\\components\\MessengerTab\\components\\ChatSection\\CanalSubsection\\index.vue","mtime":1625151245572},{"path":"C:\\gta go\\Gui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685190017390},{"path":"C:\\gta go\\Gui\\node_modules\\babel-loader\\lib\\index.js","mtime":1685190019507},{"path":"C:\\gta go\\Gui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685190017390},{"path":"C:\\gta go\\Gui\\node_modules\\vue-loader\\lib\\index.js","mtime":1685190022137}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovZ3RhIGdvL0d1aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcE11dGF0aW9ucywgbWFwU3RhdGUsIG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IEJhY2tCdXR0b24gZnJvbSAnLi4vY29tbW9uL0JhY2tCdXR0b24nOwppbXBvcnQgQ3JlYXRlUG9wdXAgZnJvbSAnLi9DcmVhdGVQb3B1cCc7CmltcG9ydCBFZGl0UG9wdXAgZnJvbSAnLi9FZGl0UG9wdXAnOwppbXBvcnQgTGlzdEl0ZW0gZnJvbSAnLi9MSXN0SXRlbSc7CmltcG9ydCBQcmVsb2FkZXJDaXJjbGUgZnJvbSAnLi4vLi4vUHJlbG9hZGVyQ2lyY2xlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDYW5hbFNlY3Rpb24nLAogIGNvbXBvbmVudHM6IHsKICAgIEJhY2tCdXR0b246IEJhY2tCdXR0b24sCiAgICBDcmVhdGVQb3B1cDogQ3JlYXRlUG9wdXAsCiAgICBFZGl0UG9wdXA6IEVkaXRQb3B1cCwKICAgIExpc3RJdGVtOiBMaXN0SXRlbSwKICAgIFByZWxvYWRlckNpcmNsZTogUHJlbG9hZGVyQ2lyY2xlCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNDcmVhdGlvbjogZmFsc2UsCiAgICAgIGlzRWRpdDogZmFsc2UsCiAgICAgIGN1cnJlbnRQb3N0RWRpdGVkSWQ6IG51bGwsCiAgICAgIGl0ZW1zOiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoJ3NtYXJ0cGhvbmUnLCBbJ2N1cnJlbnRUYWInXSkpLCBtYXBTdGF0ZSgnc21hcnRwaG9uZS9tZXNzYWdlUGFnZScsIFsnbWVzc2VuZ2VyRGF0YSddKSksIG1hcEdldHRlcnMoJ2xvY2FsaXphdGlvbicsIFsnbG9jJ10pKSwKICB3YXRjaDogewogICAgbWVzc2VuZ2VyRGF0YTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuc2V0Q3VycmVudFBvc3RzKCk7CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBNdXRhdGlvbnMoJ3NtYXJ0cGhvbmUnLCBbJ3NldEN1cnJlbnRUYWInXSkpLCBtYXBBY3Rpb25zKCdzbWFydHBob25lL21lc3NhZ2VQYWdlJywgWydtc2dfZ2V0SXNIYXZlUGVybWlzc2lvbicsICdtc2dfZHJvcEN1cnJlbnRDaGF0J10pKSwge30sIHsKICAgIHNldEN1cnJlbnRQb3N0czogZnVuY3Rpb24gc2V0Q3VycmVudFBvc3RzKCkgewogICAgICB2YXIgbm9uU29ydGVkSXRlbXMgPSB0aGlzLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSXRlbXM7CiAgICAgIHRoaXMuaXRlbXMgPSBub25Tb3J0ZWRJdGVtcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIGIuVGltZSAtIGEuVGltZTsKICAgICAgfSk7CiAgICB9LAogICAgY2xvc2VDdXJyZW50Q2hhdDogZnVuY3Rpb24gY2xvc2VDdXJyZW50Q2hhdCgpIHsKICAgICAgdGhpcy5tc2dfZHJvcEN1cnJlbnRDaGF0KCk7CiAgICB9LAogICAgZWRpdDogZnVuY3Rpb24gZWRpdChpZCkgewogICAgICB0aGlzLmlzRWRpdCA9IHRydWU7CiAgICAgIHRoaXMuY3VycmVudFBvc3RFZGl0ZWRJZCA9IGlkOwogICAgfSwKICAgIGRlbGV0ZUVkaXRQb3N0OiBmdW5jdGlvbiBkZWxldGVFZGl0UG9zdCgpIHsKICAgICAgd2luZG93Lm1wLnRyaWdnZXJTZXJ2ZXIoJ3Bob25lOjptc2c6OmRlbGV0ZVBvc3QnLCB0aGlzLmN1cnJlbnRQb3N0RWRpdGVkSWQpOwogICAgICB0aGlzLmlzRWRpdCA9IGZhbHNlOwogICAgfSwKICAgIGVkaXRDb25maXJtOiBmdW5jdGlvbiBlZGl0Q29uZmlybShpbWdVcmwsIHRpdGxlLCB0ZXh0KSB7CiAgICAgIHdpbmRvdy5tcC50cmlnZ2VyU2VydmVyKCdwaG9uZTo6bXNnOjplZGl0UG9zdCcsIHRoaXMuY3VycmVudFBvc3RFZGl0ZWRJZCwgaW1nVXJsLCB0aXRsZSwgdGV4dCk7CiAgICAgIHRoaXMuaXNFZGl0ID0gZmFsc2U7CiAgICB9LAogICAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUoaW1nVXJsLCB0aXRsZSwgdGV4dCkgewogICAgICB3aW5kb3cubXAudHJpZ2dlclNlcnZlcigncGhvbmU6Om1zZzo6Y3JlYXRlUG9zdCcsIHRoaXMubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JZCwgaW1nVXJsLCB0aXRsZSwgdGV4dCk7CiAgICAgIHRoaXMuaXNDcmVhdGlvbiA9IGZhbHNlOwogICAgfQogIH0pLAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnNldEN1cnJlbnRQb3N0cygpOwogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA,SAAA,YAAA,EAAA,QAAA,EAAA,UAAA,EAAA,UAAA,QAAA,MAAA;AACA,OAAA,UAAA,MAAA,sBAAA;AACA,OAAA,WAAA,MAAA,eAAA;AACA,OAAA,SAAA,MAAA,aAAA;AACA,OAAA,QAAA,MAAA,YAAA;AACA,OAAA,eAAA,MAAA,uBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAGA,EAAA,UAAA,EAAA;AACA,IAAA,UAAA,EAAA,UADA;AAEA,IAAA,WAAA,EAAA,WAFA;AAGA,IAAA,SAAA,EAAA,SAHA;AAIA,IAAA,QAAA,EAAA,QAJA;AAKA,IAAA,eAAA,EAAA;AALA,GAHA;AAWA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,KADA;AAEA,MAAA,MAAA,EAAA,KAFA;AAGA,MAAA,mBAAA,EAAA,IAHA;AAIA,MAAA,KAAA,EAAA;AAJA,KAAA;AAMA,GAlBA;AAoBA,EAAA,QAAA,gDACA,QAAA,CAAA,YAAA,EAAA,CAAA,YAAA,CAAA,CADA,GAEA,QAAA,CAAA,wBAAA,EAAA,CAAA,eAAA,CAAA,CAFA,GAGA,UAAA,CAAA,cAAA,EAAA,CAAA,KAAA,CAAA,CAHA,CApBA;AA0BA,EAAA,KAAA,EAAA;AACA,IAAA,aAAA,EAAA;AACA,MAAA,OAAA,EAAA,mBAAA;AACA,aAAA,eAAA;AACA,OAHA;AAIA,MAAA,IAAA,EAAA;AAJA;AADA,GA1BA;AAmCA,EAAA,OAAA,gDACA,YAAA,CAAA,YAAA,EAAA,CAAA,eAAA,CAAA,CADA,GAEA,UAAA,CAAA,wBAAA,EAAA,CAAA,yBAAA,EAAA,qBAAA,CAAA,CAFA;AAGA,IAAA,eAAA,EAAA,2BAAA;AACA,UAAA,cAAA,GAAA,KAAA,aAAA,CAAA,WAAA,CAAA,KAAA;AACA,WAAA,KAAA,GAAA,cAAA,CAAA,IAAA,CAAA,UAAA,CAAA,EAAA,CAAA;AAAA,eAAA,CAAA,CAAA,IAAA,GAAA,CAAA,CAAA,IAAA;AAAA,OAAA,CAAA;AACA,KANA;AAQA,IAAA,gBAAA,EAAA,4BAAA;AACA,WAAA,mBAAA;AACA,KAVA;AAYA,IAAA,IAAA,EAAA,cAAA,EAAA,EAAA;AACA,WAAA,MAAA,GAAA,IAAA;AACA,WAAA,mBAAA,GAAA,EAAA;AACA,KAfA;AAiBA,IAAA,cAAA,EAAA,0BAAA;AACA,MAAA,MAAA,CAAA,EAAA,CAAA,aAAA,CAAA,wBAAA,EAAA,KAAA,mBAAA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,KApBA;AAsBA,IAAA,WAAA,EAAA,qBAAA,MAAA,EAAA,KAAA,EAAA,IAAA,EAAA;AACA,MAAA,MAAA,CAAA,EAAA,CAAA,aAAA,CAAA,sBAAA,EAAA,KAAA,mBAAA,EAAA,MAAA,EAAA,KAAA,EAAA,IAAA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,KAzBA;AA2BA,IAAA,MAAA,EAAA,gBAAA,MAAA,EAAA,KAAA,EAAA,IAAA,EAAA;AACA,MAAA,MAAA,CAAA,EAAA,CAAA,aAAA,CAAA,wBAAA,EAAA,KAAA,aAAA,CAAA,WAAA,CAAA,EAAA,EAAA,MAAA,EAAA,KAAA,EAAA,IAAA;AACA,WAAA,UAAA,GAAA,KAAA;AACA;AA9BA,IAnCA;AAoEA,EAAA,OAAA,EAAA,mBAAA;AACA,SAAA,eAAA;AACA;AAtEA,CAAA","sourcesContent":["<template>\r\n  <div class=\"canal-subsection\">\r\n    <preloader-circle v-if=\"messengerData.CurrentChat.IsLoading\" />\r\n    <div v-else class=\"canal-subsection__content\">\r\n      <div class=\"canal-subsection__header\">\r\n        <back-button :location=\"{ key: currentTab.key, section: 'GeneralSection' }\" @extraClick=\"closeCurrentChat\" />\r\n        <div class=\"desc\">\r\n          <span class=\"desc__title\">{{ messengerData.CurrentChat.Name }}</span>\r\n          <span class=\"desc__subscribers\">{{loc(`phone:chat:post:1@${messengerData.CurrentChat.SubscribersCount}`)}}</span>\r\n        </div>\r\n        <div \r\n          :style=\"{ background: messengerData.CurrentChat.IconColors }\" \r\n          class=\"avatar\"\r\n          @click=\"setCurrentTab({key: currentTab.key, section: currentTab.section, subsection: 'CanalOptionsSubsection' })\"\r\n        ></div>\r\n      </div>\r\n      <div v-bar>\r\n        <div class=\"canal-subsection__list\">\r\n          <list-item\r\n            v-for=\"item in items\"\r\n            :key=\"item.Id\"\r\n            :item=\"item\"\r\n            @edit=\"edit\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div class=\"canal-subsection__footer\">\r\n        <button v-if=\"messengerData.CurrentChat.CanCreatingPosts\" class=\"btn-create\" @click=\"isCreation = true\">\r\n          <div class=\"icon\"></div>\r\n          <span class=\"text\">{{loc('phone:chat:post:4')}}</span>\r\n        </button>\r\n        <button v-else-if=\"messengerData.CurrentChat.IsMuted\" class=\"btn-create\" @click=\"toggleMuted(false)\">\r\n          <span class=\"text\">{{loc('phone:chat:post:2')}}</span>\r\n        </button>\r\n        <button v-else class=\"btn-create\" @click=\"toggleMuted(true)\">\r\n          <span class=\"text\">{{loc('phone:chat:post:3')}}</span>\r\n        </button>\r\n      </div>\r\n      <transition name=\"smartphone-fade\">\r\n        <div class=\"canal-subsection__layer\" v-if=\"isCreation || isEdit\"></div>\r\n      </transition>\r\n      <transition name=\"smartphone-bottom-to-top-slide\">\r\n        <create-popup v-if=\"isCreation\" @closeCreation=\"isCreation = false\" @create=\"create\" />\r\n      </transition>\r\n      <transition name=\"smartphone-bottom-to-top-slide\">\r\n        <edit-popup\r\n          v-if=\"isEdit\"\r\n          :currentId=\"currentPostEditedId\"\r\n          @close=\"isEdit = false\"\r\n          @confirm=\"editConfirm\"\r\n          @delete=\"deleteEditPost\"\r\n        />\r\n      </transition>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapMutations, mapState, mapActions, mapGetters } from 'vuex'\r\nimport BackButton from '../common/BackButton'\r\nimport CreatePopup from './CreatePopup'\r\nimport EditPopup from './EditPopup'\r\nimport ListItem from './LIstItem'\r\nimport PreloaderCircle from '../../PreloaderCircle'\r\n\r\nexport default {\r\n  name: 'CanalSection',\r\n\r\n  components: {\r\n    BackButton,\r\n    CreatePopup,\r\n    EditPopup,\r\n    ListItem,\r\n    PreloaderCircle\r\n  },\r\n\r\n  data: function() {\r\n    return {\r\n      isCreation: false,\r\n      isEdit: false,\r\n      currentPostEditedId: null,\r\n      items: []\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapState('smartphone', ['currentTab']),\r\n    ...mapState('smartphone/messagePage', ['messengerData']),\r\n    ...mapGetters('localization', ['loc']),\r\n  },\r\n\r\n  watch: {\r\n    messengerData: {\r\n      handler: function() {\r\n        this.setCurrentPosts();\r\n      },\r\n      deep: true\r\n    } \r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations('smartphone', ['setCurrentTab']),\r\n    ...mapActions('smartphone/messagePage', ['msg_getIsHavePermission', 'msg_dropCurrentChat']),\r\n    setCurrentPosts: function() {\r\n      const nonSortedItems = this.messengerData.CurrentChat.Items;\r\n      this.items = nonSortedItems.sort((a, b) => b.Time - a.Time);\r\n    },\r\n\r\n    closeCurrentChat: function() {\r\n      this.msg_dropCurrentChat();\r\n    },\r\n\r\n    edit: function(id) {\r\n      this.isEdit = true\r\n      this.currentPostEditedId = id\r\n    },\r\n\r\n    deleteEditPost: function() {\r\n      window.mp.triggerServer('phone::msg::deletePost', this.currentPostEditedId);\r\n      this.isEdit = false;\r\n    },\r\n\r\n    editConfirm: function(imgUrl, title, text) {\r\n      window.mp.triggerServer('phone::msg::editPost', this.currentPostEditedId, imgUrl, title, text);\r\n      this.isEdit = false;\r\n    },\r\n\r\n    create: function(imgUrl, title, text) {\r\n      window.mp.triggerServer('phone::msg::createPost', this.messengerData.CurrentChat.Id, imgUrl, title, text);  \r\n      this.isCreation = false;\r\n    }\r\n  },\r\n\r\n  mounted: function() {\r\n    this.setCurrentPosts();\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@keyframes fade {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n.canal-subsection {\r\n  height: 100%;\r\n  width: 100%;\r\n  position: relative;\r\n  &__main {\r\n    height: 100%;\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n  }\r\n  &__header {\r\n    flex: 0 0 4.5rem;\r\n    background: #fff;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 2rem 0.5rem 0.5rem 0.75rem;\r\n    position: relative;\r\n    .desc {\r\n      text-align: center;\r\n      position: absolute;\r\n      transform: translate(-50%, 0);\r\n      left: 50%;\r\n      display: flex;\r\n      flex-direction: column;\r\n      &__title {\r\n        font-size: 0.7rem;\r\n        font-weight: 500;\r\n        line-height: 0.8rem;\r\n        color: #020202;\r\n        width: 8.85rem;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n      }\r\n      &__subscribers {\r\n        margin: 0.1rem 0 0 0;\r\n        font-size: 0.65rem;\r\n        line-height: 0.75rem;\r\n        color: #9E9EA2;\r\n      }\r\n    }\r\n    .avatar {\r\n      width: 2rem;\r\n      height: 2rem;\r\n      border-radius: 50%;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      &::after {\r\n        content: '';\r\n        background: center /contain no-repeat url(\"/img/hud/smartphone/messengerTab/megaphone.svg\");\r\n        width: 0.9rem;\r\n        height: 0.9rem;\r\n      }\r\n    }\r\n  }\r\n  &__list {\r\n    height: 25rem !important;\r\n  }\r\n  &__footer {\r\n    height: 3.5rem;\r\n    display: flex;\r\n    justify-content: center;\r\n    background: #fff;\r\n    padding: 1rem 0 0 0;\r\n    .btn-create {\r\n      display: flex;\r\n      align-items: center;\r\n      height: fit-content;\r\n      background: transparent;\r\n      &:hover {\r\n        .icon {\r\n          opacity: 1;\r\n        }\r\n        .text::after {\r\n          transform: scale(1);\r\n        }\r\n      }\r\n      .icon {\r\n        mask: url(\"/img/hud/smartphone/messengerTab/edit.svg\") no-repeat center / contain;\r\n        background: #4E6ED9;\r\n        opacity: 0.5;\r\n        width: 0.9rem;\r\n        height: 0.9rem;\r\n        transition: opacity 0.2s;\r\n      }\r\n      .text {\r\n        font-size: 0.7rem;\r\n        line-height: 0.8rem;\r\n        color: #4E6ED9;\r\n        margin: 0 0 0 0.5rem;\r\n        position: relative;\r\n        &::after {\r\n          position: absolute;\r\n          transform: scale(0);\r\n          transition: transform 0.2s;\r\n          top: 100%;\r\n          left: 0;\r\n          width: 100%;\r\n          content: '';\r\n          height: 1px;\r\n          background: rgba(78, 110, 217, 0.3);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  &__layer {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(0, 0, 0, 0.7);\r\n  }\r\n}\r\n.canal-subsection__layer-enter-active {\r\n  animation: fade 0.4s;\r\n}\r\n.canal-subsection__layer-leave-active {\r\n  animation: fade 0.4s reverse;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/Smartphone/components/MessengerTab/components/ChatSection/CanalSubsection"}]}