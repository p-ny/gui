{"remainingRequest":"C:\\gta go\\Gui\\node_modules\\babel-loader\\lib\\index.js!C:\\gta go\\Gui\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\gta go\\Gui\\src\\store\\smartphone\\modules\\message-page.js","dependencies":[{"path":"C:\\gta go\\Gui\\src\\store\\smartphone\\modules\\message-page.js","mtime":1629112495829},{"path":"C:\\gta go\\Gui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685190017390},{"path":"C:\\gta go\\Gui\\node_modules\\babel-loader\\lib\\index.js","mtime":1685190019507},{"path":"C:\\gta go\\Gui\\node_modules\\eslint-loader\\index.js","mtime":1685190018634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXgiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkM6L2d0YSBnby9HdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIG1lc3NlbmdlckRhdGE6IHsKICAgICAgQ3VycmVudEFjY291bnQ6IHsKICAgICAgICBJZDogLTEsCiAgICAgICAgVXNlcm5hbWU6ICdtaWx0JywKICAgICAgICBEaXNwbGF5ZWROYW1lOiAnbWF0dmV5JywKICAgICAgICBJc051bWJlckhpZGVkOiBmYWxzZQogICAgICB9LAogICAgICBTZWFyY2hTdWJzY3JpYmVyczogWy8vIHsgSWQ6IDAsIERpc3BsYXllZE5hbWU6ICdHYXkgTWFuJywgTGFzdFZpc2l0VGltZTogMjAzMzMxMjEyMzMyIH0KICAgICAgXSwKICAgICAgQ2hhdHM6IFsvLyB7IElkOiA4LCBOYW1lOiAnRmlyc3QgY2hhdDgnLCBJc09ubGluZTogdHJ1ZSwgVHlwZTogMCwgTm9uUmVhZE1lc3NhZ2VzQ291bnQ6IDAsCiAgICAgICAgLy8gTGFzdE1lc3NhZ2U6IHsgSWQ6IDAsIENoYXRJZDogMCwgVGV4dDogJ0hpISBXaG8gYXJlIHlvdT8nLCBUeXBlOiAwLAogICAgICAgIC8vIFRpbWU6IDE2MDMwMDUxMzIwMDAsIElzUmVhZDogZmFsc2UsIEFkbWluczogWwogICAgICAgIC8vICAgIHsgRGlzcGxheWVkTmFtZTogJ0dvbmRvbicsIElkOiAyLCBBZG1pbkx2bDogMiwgUGVybWlzc2lvbjogWzAsIDIsIDMsIDRdIH0gCiAgICAgICAgLy8gXSB9IH0sCiAgICAgIF0sCiAgICAgIENvbnRhY3RzOiBbLy8geyBJZDogMTIsIE5hbWU6ICfhg6Hhg5Dhg5zhg6Lhg5Thg6Xhg5zhg5jhg5nhg53hg6Hhg5gnLCBOdW1iZXI6IDg4MDA1NTQzNTM1LCBUaW1lOiAxMTMwNDQzMjAwMDAwLCBJc09ubGluZTogdHJ1ZSB9LAogICAgICBdLAogICAgICBfY2FjaGVkQWNjb3VudHM6IFsvLyB7IElkOiAwLCBEaXNwbGF5ZWROYW1lOiAn0YTQsNC60LHQvtC5JyB9CiAgICAgIF0sCiAgICAgIF9jYWNoZWRNZXNzYWdlczogW10sCiAgICAgIEN1cnJlbnRDaGF0OiB7CiAgICAgICAgSWQ6IDAsCiAgICAgICAgTmFtZTogJ1NKU0pGS1dQQ09FSlYgU0pFS1JJRkpBTkRMV1InLAogICAgICAgIElzT25saW5lOiBudWxsLAogICAgICAgIFR5cGU6IDAsCiAgICAgICAgSWNvbkNvbG9yczogJ2xpbmVhci1ncmFkaWVudCg5MGRlZywgIzQzRTk3QiAwJSwgIzM4RjlENyAxMDAlKScsCiAgICAgICAgU3Vic2NyaWJlcnNDb3VudDogMTIzLAogICAgICAgIEl0ZW1zOiBbLy8geyBJZDogMCwgQ2hhdElkOiAwLCBTZW5kZXJJZDogMCwgVGV4dDogJ0hpISBXaG8gYXJlIHlvdT8g8J+Yg/CfmIEnLCBBdHRhY2htZW50OiBudWxsICwgVGltZTogMTYwMzIwMjg5ODQ4MiwgSXNSZWFkOiB0cnVlIH0sCiAgICAgICAgICAvLyB7IElkOiAxLCBDaGF0SWQ6IDAsIFNlbmRlcklkOiAxLCBUZXh0OiAnSXRgcyBtZSwgbmlnZ2EsIGF5bycsIEF0dGFjaG1lbnQ6IHsgSWQ6IDEsIFR5cGU6IDIsIFVybDogJ2h0dHBzOi8vYzQud2FsbHBhcGVyZmxhcmUuY29tL3dhbGxwYXBlci81MDAvNDQyLzM1NC9vdXRydW4tdmFwb3J3YXZlLWhkLXdhbGxwYXBlci1wcmV2aWV3LmpwZycgfSwgVGltZTogMTYwMzIwMjg5ODQ4NywgSXNSZWFkOiB0cnVlIH0sCiAgICAgICAgICAvLyB7IElkOiAwLCBDaGF0SWQ6IDAsIFNlbmRlcklkOiAxLCBUZXh0OiAnJywgQXR0YWNobWVudDogeyBJZDogMSwgVHlwZTogMCwgR2VvTWFyazogeyBYOiAxMDAsIFk6IDEwMCwgWjogMTAwfSB9ICwgVGltZTogMTYwMzIwMjg5ODQ4MiwgSXNSZWFkOiB0cnVlIH0sCiAgICAgICAgICAvLyB7IElkOiAwLCBDaGF0SWQ6IDAsIFNlbmRlcklkOiAwLCBUZXh0OiAnJywgQXR0YWNobWVudDogeyBJZDogMSwgVHlwZTogMCwgR2VvTWFyazogeyBYOiAxMDAsIFk6IDEwMCwgWjogMTAwfSB9ICwgVGltZTogMTYwMzIwMjg5ODQ4MiwgSXNSZWFkOiB0cnVlIH0sCiAgICAgICAgICAvLyB7IElkOiAxLCBDaGF0SWQ6IDAsIFNlbmRlcklkOiAwLCBUZXh0OiAnJywgQXR0YWNobWVudDogeyBJZDogMSwgVHlwZTogMiwgVXJsOiAnaHR0cHM6Ly9jNC53YWxscGFwZXJmbGFyZS5jb20vd2FsbHBhcGVyLzUwMC80NDIvMzU0L291dHJ1bi12YXBvcndhdmUtaGQtd2FsbHBhcGVyLXByZXZpZXcuanBnJyB9LCBUaW1lOiAxNjAzMjAyODk4NDg3LCBJc1JlYWQ6IHRydWUgfSwKICAgICAgICAgIC8vIHsgSWQ6IDEsIENoYXRJZDogMCwgU2VuZGVySWQ6IDEsIFRleHQ6ICcnLCBBdHRhY2htZW50OiB7IElkOiAxLCBUeXBlOiAyLCBVcmw6ICdodHRwczovL2M0LndhbGxwYXBlcmZsYXJlLmNvbS93YWxscGFwZXIvNTAwLzQ0Mi8zNTQvb3V0cnVuLXZhcG9yd2F2ZS1oZC13YWxscGFwZXItcHJldmlldy5qcGcnIH0sIFRpbWU6IDE2MDMyMDI4OTg0ODcsIElzUmVhZDogdHJ1ZSB9LAogICAgICAgICAgLy8geyBJZDogMiwgQ2hhdElkOiAwLCBTZW5kZXJJZDogMiwgVGV4dDogJ01tbSwgb2suTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2snLCBUaW1lOiAxNjAzMzA4ODk4NDg3LCBJc1JlYWQ6IGZhbHNlIH0sCiAgICAgICAgICAvLyB7IElkOiAyLCBDaGF0SWQ6IDAsIFNlbmRlcklkOiAyLCBUZXh0OiAnTW1tLCBvay5NbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBvaycsIFRpbWU6IDE2MDMzMDg4OTg0ODcsIElzUmVhZDogZmFsc2UgfSwKICAgICAgICAgIC8vIHsgSWQ6IDIsIENoYXRJZDogMCwgU2VuZGVySWQ6IDIsIFRleHQ6ICdNbW0sIG9rLk1tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rJywgVGltZTogMTYwMzMwODg5ODQ4NywgSXNSZWFkOiBmYWxzZSB9LAogICAgICAgICAgLy8geyBJZDogMiwgQ2hhdElkOiAwLCBTZW5kZXJJZDogMiwgVGV4dDogJ01tbSwgb2suTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2snLCBUaW1lOiAxNjAzMzA4ODk4NDg3LCBJc1JlYWQ6IGZhbHNlIH0sCiAgICAgICAgICAvLyB7IElkOiAyLCBDaGF0SWQ6IDAsIFNlbmRlcklkOiAyLCBUZXh0OiAnTW1tLCBvay5NbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBvaycsIFRpbWU6IDE2MDMzMDg4OTg0ODcsIElzUmVhZDogZmFsc2UgfSwKICAgICAgICBdLAogICAgICAgIElzTG9hZGluZzogZmFsc2UKICAgICAgfSwKICAgICAgQ2FuYWxQcm9maWxlOiB7CiAgICAgICAgTmFtZTogJ9Ch0LDQvNGL0Lkg0LTQu9C40L3QvdGL0Lkg0L3QuNC6INCyINC40LPRgNC1JywKICAgICAgICBJc09ubGluZTogdHJ1ZSwKICAgICAgICBBZG1pbkx2bDogMiwKICAgICAgICBBYmlsaXRpZXM6IHsKICAgICAgICAgIGNoYW5nZVByb2ZpbGU6IHRydWUsCiAgICAgICAgICBjcmVhdGVQb3N0czogZmFsc2UsCiAgICAgICAgICBkZWxldGVQb3N0czogZmFsc2UsCiAgICAgICAgICBhcHBvaW50bWVudEFkbWluczogZmFsc2UKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHZpZXdlZFByb2ZpbGU6IHsKICAgICAgICBJZDogMSwKICAgICAgICBVc2VybmFtZTogJ3VzZXJuYW1lJywKICAgICAgICBEaXNwbGF5ZWROYW1lOiAn0KHQsNC80YvQuSDQtNC70LjQvdC90YvQuSDQvdC40Log0LIg0LjQs9GA0LUnLAogICAgICAgIE51bWJlcjogOTM5Mzk0LAogICAgICAgIElzTnVtYmVySGlkZWQ6IGZhbHNlLAogICAgICAgIElzTXV0ZWQ6IGZhbHNlLAogICAgICAgIElzQmxvY2tlZDogZmFsc2UsCiAgICAgICAgTGFzdFZpc2l0VGltZTogMTYwMzk1OTA3MTAwMCwKICAgICAgICBJc09ubGluZTogZmFsc2UsCiAgICAgICAgSXNJbkNvbnRhY3RzOiBmYWxzZSwKICAgICAgICBpc0xvYWRpbmc6IGZhbHNlCiAgICAgIH0KICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgc2V0TWVzc2VuZ2VyQ2FuYWxQcm9maWxlQWJpbGl0eTogZnVuY3Rpb24gc2V0TWVzc2VuZ2VyQ2FuYWxQcm9maWxlQWJpbGl0eShzdGF0ZSwgX3JlZikgewogICAgICB2YXIga2V5ID0gX3JlZi5rZXksCiAgICAgICAgICB2YWx1ZSA9IF9yZWYudmFsdWU7CiAgICAgIHZhciBjdXJyZW50Q2hhdCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQ7CiAgICAgIHZhciBjaGF0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMuSWQgPT09IGN1cnJlbnRDaGF0LklkOwogICAgICB9KTsKICAgICAgdmFyIGFkbWluID0gY2hhdC5BZG1pbnMuZmluZChmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiBhLklkID09PSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNhbmFsUHJvZmlsZS5JZDsKICAgICAgfSk7CgogICAgICBpZiAoYWRtaW4pIHsKICAgICAgICBpZiAodmFsdWUpIGFkbWluLlBlcm1pc3Npb25zLnB1c2goa2V5KTtlbHNlIHsKICAgICAgICAgIHZhciBpZHggPSBhZG1pbi5QZXJtaXNzaW9ucy5pbmRleE9mKGtleSk7CiAgICAgICAgICBpZiAoaWR4KSBhZG1pbi5QZXJtaXNzaW9ucy5zcGxpY2UoaWR4LCAxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGN1cnJlbnRDaGF0LkFkbWlucyA9IGNoYXQuQWRtaW5zOwogICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNhbmFsUHJvZmlsZS5QZXJtaXNzaW9ucyA9IGFkbWluLlBlcm1pc3Npb25zOwogICAgICB3aW5kb3cubXAudHJpZ2dlclNlcnZlcigncGhvbmU6Om1zZzo6bWFuYWdlOjpzZXRBY2NvdW50UGVybWlzc2lvbicsIGNoYXQuSWQsIGFkbWluLklkLCBrZXksIHZhbHVlKTsKICAgIH0sCiAgICBzZXRNZXNzZW5nZXJDdXJyZW50Q2hhdEljb25Db2xvcnM6IGZ1bmN0aW9uIHNldE1lc3NlbmdlckN1cnJlbnRDaGF0SWNvbkNvbG9ycyhzdGF0ZSwgdmFsdWUpIHsKICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JY29uQ29sb3JzID0gdmFsdWU7CiAgICB9LAogICAgbXNnX3NldEFjY291bnRTZXR0aW5nczogZnVuY3Rpb24gbXNnX3NldEFjY291bnRTZXR0aW5ncyhzdGF0ZSwgYWNjb3VudFNldHRpbmdzKSB7CiAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudEFjY291bnQgPSBhY2NvdW50U2V0dGluZ3M7CiAgICB9LAogICAgLy8jcmVnaW9uIE1zZyBDb250YWN0cwogICAgbXNnX3NldFN1YnNjcmliZXJzRm9yU2VhcmNoOiBmdW5jdGlvbiBtc2dfc2V0U3Vic2NyaWJlcnNGb3JTZWFyY2goc3RhdGUsIHN1YnNjcmliZXJzKSB7CiAgICAgIHN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKHN1YnNjcmliZXIpIHsKICAgICAgICBpZiAoc3Vic2NyaWJlci5MYXN0VmlzaXRUaW1lKSBzdWJzY3JpYmVycy5MYXN0VmlzaXRUaW1lICo9IDEwMDA7CiAgICAgIH0pOwogICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLlNlYXJjaFN1YnNjcmliZXJzID0gc3Vic2NyaWJlcnM7CiAgICB9LAogICAgbXNnX2xvYWRDb250YWN0czogZnVuY3Rpb24gbXNnX2xvYWRDb250YWN0cyhzdGF0ZSwgY29udGFjdHMpIHsKICAgICAgY29udGFjdHMuZm9yRWFjaChmdW5jdGlvbiAoY29udGFjdCkgewogICAgICAgIGlmIChjb250YWN0LlRpbWUpIGNvbnRhY3QuVGltZSAqPSAxMDAwOwogICAgICAgIHZhciBvbGRDb250YWN0SW5kZXggPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNvbnRhY3RzLmZpbmRJbmRleChmdW5jdGlvbiAoYykgewogICAgICAgICAgcmV0dXJuIGMuSWQgPT09IGNvbnRhY3QuSWQ7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChvbGRDb250YWN0SW5kZXggPT09IC0xKSB7CiAgICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNvbnRhY3RzLnB1c2goY29udGFjdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ29udGFjdHNbb2xkQ29udGFjdEluZGV4XSA9IGNvbnRhY3Q7CiAgICAgICAgfQoKICAgICAgICB2YXIgcHJpdmF0ZUNoYXQgPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNoYXRzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgIHJldHVybiBjLkFjY291bnRJZCA9PT0gY29udGFjdC5BY2NvdW50SWQ7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChwcml2YXRlQ2hhdCkgewogICAgICAgICAgcHJpdmF0ZUNoYXQuTmFtZSA9IGNvbnRhY3QuTmFtZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG1zZ19yZW1vdmVTdG9yZUNvbnRhY3Q6IGZ1bmN0aW9uIG1zZ19yZW1vdmVTdG9yZUNvbnRhY3Qoc3RhdGUsIGNvbnRhY3RJZCkgewogICAgICB2YXIgY29udGFjdEluZGV4ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5Db250YWN0cy5maW5kSW5kZXgoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5JZCA9PT0gY29udGFjdElkOwogICAgICB9KTsKCiAgICAgIGlmIChjb250YWN0SW5kZXggIT09IC0xKSB7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5Db250YWN0cy5zcGxpY2UoY29udGFjdEluZGV4LCAxKTsKICAgICAgfQogICAgfSwKICAgIG1zZ19zZXRDb250YWN0SXNPbmxpbmU6IGZ1bmN0aW9uIG1zZ19zZXRDb250YWN0SXNPbmxpbmUoc3RhdGUsIF9yZWYyKSB7CiAgICAgIHZhciBjb250YWN0SWQgPSBfcmVmMi5jb250YWN0SWQsCiAgICAgICAgICBpc09ubGluZSA9IF9yZWYyLmlzT25saW5lOwogICAgICB2YXIgY29udGFjdEluZGV4ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5Db250YWN0cy5maW5kSW5kZXgoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5JZCA9PT0gY29udGFjdElkOwogICAgICB9KTsKCiAgICAgIGlmIChjb250YWN0SW5kZXggIT09IC0xKSB7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5Db250YWN0c1tjb250YWN0SW5kZXhdLklzT25saW5lID0gaXNPbmxpbmU7CiAgICAgIH0KICAgIH0sCiAgICAvLyNlbmRyZWdpb24gTXNnIENvbnRhY3RzCiAgICAvLyNyZWdpb24gTXNnIENoYXRzCiAgICBtc2dfbG9hZENoYXRzOiBmdW5jdGlvbiBtc2dfbG9hZENoYXRzKHN0YXRlLCBjaGF0cykgewogICAgICBjaGF0cy5mb3JFYWNoKGZ1bmN0aW9uIChjaGF0KSB7CiAgICAgICAgdmFyIF9jaGF0JExhc3RNZXNzYWdlJFRpbSwgX2NoYXQkTGFzdE1lc3NhZ2U7CgogICAgICAgIHZhciBjaGF0SW5kZXggPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNoYXRzLmZpbmRJbmRleChmdW5jdGlvbiAoYykgewogICAgICAgICAgcmV0dXJuIGMuSWQgPT09IGNoYXQuSWQ7CiAgICAgICAgfSk7CiAgICAgICAgY2hhdC5BY3Rpb25UaW1lID0gKF9jaGF0JExhc3RNZXNzYWdlJFRpbSA9IChfY2hhdCRMYXN0TWVzc2FnZSA9IGNoYXQuTGFzdE1lc3NhZ2UpID09PSBudWxsIHx8IF9jaGF0JExhc3RNZXNzYWdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2hhdCRMYXN0TWVzc2FnZS5UaW1lKSAhPT0gbnVsbCAmJiBfY2hhdCRMYXN0TWVzc2FnZSRUaW0gIT09IHZvaWQgMCA/IF9jaGF0JExhc3RNZXNzYWdlJFRpbSA6IGNoYXQuQ3JlYXRlZFRpbWU7CiAgICAgICAgY2hhdC5BY3Rpb25UaW1lICo9IDEwMDA7CgogICAgICAgIGlmIChjaGF0SW5kZXggPT09IC0xKSB7CiAgICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNoYXRzLnB1c2goY2hhdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuc3BsaWNlKGNoYXRJbmRleCwgMSk7CiAgICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNoYXRzLnB1c2goY2hhdCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBtc2dfcmVtb3ZlQ2hhdDogZnVuY3Rpb24gbXNnX3JlbW92ZUNoYXQoc3RhdGUsIGNoYXRJZCkgewogICAgICB2YXIgY2hhdElkeCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuZmluZEluZGV4KGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMuSWQgPT09IGNoYXRJZDsKICAgICAgfSk7CgogICAgICBpZiAoY2hhdElkeCAhPT0gLTEpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNoYXRzLnNwbGljZShjaGF0SWR4LCAxKTsKICAgICAgfQogICAgfSwKICAgIG1zZ19jYWNoZU1lc3NhZ2U6IGZ1bmN0aW9uIG1zZ19jYWNoZU1lc3NhZ2Uoc3RhdGUsIG1lc3NhZ2UpIHsKICAgICAgdmFyIGNhY2hlZE1lc3NhZ2VJbmRleCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuX2NhY2hlZE1lc3NhZ2VzLmZpbmRJbmRleChmdW5jdGlvbiAobSkgewogICAgICAgIHJldHVybiBtLklkID09PSBtZXNzYWdlLklkOwogICAgICB9KTsKCiAgICAgIGlmIChjYWNoZWRNZXNzYWdlSW5kZXggPT09IC0xKSB7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5fY2FjaGVkTWVzc2FnZXMucHVzaChtZXNzYWdlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLl9jYWNoZWRNZXNzYWdlc1tjYWNoZWRNZXNzYWdlSW5kZXhdID0gbWVzc2FnZTsKICAgICAgfQogICAgfSwKICAgIG1zZ191bmNhY2hlTWVzc2FnZTogZnVuY3Rpb24gbXNnX3VuY2FjaGVNZXNzYWdlKHN0YXRlLCBtZXNzYWdlSWQpIHsKICAgICAgdmFyIGNhY2hlZE1lc3NhZ2VJbmRleCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuX2NhY2hlZE1lc3NhZ2VzLmZpbmRJbmRleChmdW5jdGlvbiAobSkgewogICAgICAgIHJldHVybiBtLklkID09PSBtZXNzYWdlSWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGNhY2hlZE1lc3NhZ2VJbmRleCAhPT0gLTEpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLl9jYWNoZWRNZXNzYWdlcy5zcGxpY2UoY2FjaGVkTWVzc2FnZUluZGV4LCAxKTsKICAgICAgfQogICAgfSwKICAgIG1zZ19tYXJrQ2hhdE1lc3NhZ2VzQXNSZWFkOiBmdW5jdGlvbiBtc2dfbWFya0NoYXRNZXNzYWdlc0FzUmVhZChzdGF0ZSwgY2hhdElkKSB7CiAgICAgIHZhciBjaGF0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMuSWQgPT09IGNoYXRJZDsKICAgICAgfSk7CgogICAgICBpZiAoY2hhdCkgewogICAgICAgIGNoYXQuTm9uUmVhZE1lc3NhZ2VzQ291bnQgPSAwOwogICAgICB9CiAgICB9LAogICAgbXNnX3NldE93bk1lc3NhZ2VzUmVhZEluQ2hhdDogZnVuY3Rpb24gbXNnX3NldE93bk1lc3NhZ2VzUmVhZEluQ2hhdChzdGF0ZSwgY2hhdElkKSB7CiAgICAgIGlmIChzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklkID09PSBjaGF0SWQpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0Lkl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKG0pIHsKICAgICAgICAgIGlmIChtLlNlbmRlcklkID09PSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRBY2NvdW50LklkKSB7CiAgICAgICAgICAgIG0uSXNSZWFkID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5fY2FjaGVkTWVzc2FnZXMuZm9yRWFjaChmdW5jdGlvbiAobSkgewogICAgICAgIGlmIChtLlNlbmRlcklkID09PSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRBY2NvdW50LklkKSB7CiAgICAgICAgICBtLklzUmVhZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBtc2dfc2V0TGFzdE1lc3NhZ2U6IGZ1bmN0aW9uIG1zZ19zZXRMYXN0TWVzc2FnZShzdGF0ZSwgbWVzc2FnZSkgewogICAgICB2YXIgY2hhdCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLklkID09PSBtZXNzYWdlLkNoYXRJZDsKICAgICAgfSk7CgogICAgICBpZiAoY2hhdCkgewogICAgICAgIGNoYXQuTGFzdE1lc3NhZ2UgPSBtZXNzYWdlOwogICAgICAgIGNoYXQuQWN0aW9uVGltZSA9IG1lc3NhZ2UuVGltZTsKICAgICAgfQogICAgfSwKICAgIG1zZ19zZXRDdXJyZW50Q2hhdElzTG9hZGluZzogZnVuY3Rpb24gbXNnX3NldEN1cnJlbnRDaGF0SXNMb2FkaW5nKHN0YXRlLCB0b2dnbGUpIHsKICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5Jc0xvYWRpbmcgPSB0b2dnbGU7CiAgICB9LAogICAgbXNnX3NldEN1cnJlbnRDaGF0TWVzc2FnZXM6IGZ1bmN0aW9uIG1zZ19zZXRDdXJyZW50Q2hhdE1lc3NhZ2VzKHN0YXRlLCBtZXNzYWdlcykgewogICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0Lkl0ZW1zID0gbWVzc2FnZXM7CiAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSXNMb2FkaW5nID0gZmFsc2U7CiAgICB9LAogICAgbXNnX3NldEN1cnJlbnRDaGF0OiBmdW5jdGlvbiBtc2dfc2V0Q3VycmVudENoYXQoc3RhdGUsIF9yZWYzKSB7CiAgICAgIHZhciBJZCA9IF9yZWYzLklkLAogICAgICAgICAgTmFtZSA9IF9yZWYzLk5hbWUsCiAgICAgICAgICBJc09ubGluZSA9IF9yZWYzLklzT25saW5lLAogICAgICAgICAgVHlwZSA9IF9yZWYzLlR5cGUsCiAgICAgICAgICBTdWJzY3JpYmVyc0NvdW50ID0gX3JlZjMuU3Vic2NyaWJlcnNDb3VudCwKICAgICAgICAgIEFjY291bnRJZCA9IF9yZWYzLkFjY291bnRJZCwKICAgICAgICAgIEljb25Db2xvcnMgPSBfcmVmMy5JY29uQ29sb3JzLAogICAgICAgICAgUGVybWlzc2lvbnMgPSBfcmVmMy5QZXJtaXNzaW9ucywKICAgICAgICAgIERlc2NyaXB0aW9uID0gX3JlZjMuRGVzY3JpcHRpb24sCiAgICAgICAgICBBZG1pbkx2bCA9IF9yZWYzLkFkbWluTHZsLAogICAgICAgICAgSW52aXRlQ29kZSA9IF9yZWYzLkludml0ZUNvZGUsCiAgICAgICAgICBBZG1pbnMgPSBfcmVmMy5BZG1pbnMsCiAgICAgICAgICBCbG9ja0l0ZW1zID0gX3JlZjMuQmxvY2tJdGVtczsKICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdCA9IHsKICAgICAgICBJZDogSWQsCiAgICAgICAgTmFtZTogTmFtZSwKICAgICAgICBJc09ubGluZTogSXNPbmxpbmUsCiAgICAgICAgVHlwZTogVHlwZSwKICAgICAgICBBZG1pbkx2bDogQWRtaW5MdmwsCiAgICAgICAgRGVzY3JpcHRpb246IERlc2NyaXB0aW9uLAogICAgICAgIFN1YnNjcmliZXJzQ291bnQ6IFN1YnNjcmliZXJzQ291bnQsCiAgICAgICAgSW52aXRlQ29kZTogSW52aXRlQ29kZSwKICAgICAgICBBZG1pbnM6IEFkbWlucywKICAgICAgICBCbG9ja0l0ZW1zOiBCbG9ja0l0ZW1zCiAgICAgIH07IC8vIENoYW5uZWwgYW5kIGdyb3VwIGNoYXRzIGZpZWxkcwoKICAgICAgaWYgKFBlcm1pc3Npb25zKSB7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5DYW5DaGFuZ2luZ0dyb3VwUHJvZmlsZSA9IFBlcm1pc3Npb25zLmluY2x1ZGVzKDEpOwogICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuQ2FuRGVsZXRpbmdNZXNzYWdlcyA9IFBlcm1pc3Npb25zLmluY2x1ZGVzKDIpOwogICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuQ2FuQmxvY2tpbmdBY2NvdW50cyA9IFBlcm1pc3Npb25zLmluY2x1ZGVzKDMpOwogICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuQ2FuUHVycG9zaW5nQWRtaW5zID0gUGVybWlzc2lvbnMuaW5jbHVkZXMoNCk7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5DYW5DcmVhdGluZ1Bvc3RzID0gUGVybWlzc2lvbnMuaW5jbHVkZXMoNSk7CiAgICAgIH0KCiAgICAgIGlmIChJY29uQ29sb3JzKSB7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JY29uQ29sb3JzID0gSWNvbkNvbG9yczsKICAgICAgfSAvLyBQcml2YXRlIGNoYXRzIGZpZWxkCgoKICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5BY2NvdW50SWQgPSBBY2NvdW50SWQ7CiAgICB9LAogICAgbXNnX2xvYWRBY2NvdW50czogZnVuY3Rpb24gbXNnX2xvYWRBY2NvdW50cyhzdGF0ZSwgYWNjb3VudHMpIHsKICAgICAgYWNjb3VudHMuZm9yRWFjaChmdW5jdGlvbiAoYWNjb3VudCkgewogICAgICAgIHZhciBjb250YWN0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5Db250YWN0cy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICByZXR1cm4gYy5BY2NvdW50SWQgPT09IGFjY291bnQuSWQ7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChjb250YWN0KSB7CiAgICAgICAgICBhY2NvdW50LkRpc3BsYXllZE5hbWUgPSBjb250YWN0Lk5hbWU7CiAgICAgICAgfQoKICAgICAgICB2YXIgYWNjb3VudEluZGV4ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5fY2FjaGVkQWNjb3VudHMuZmluZEluZGV4KGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICByZXR1cm4gYS5JZCA9PSBhY2NvdW50LklkOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoYWNjb3VudEluZGV4ID09PSAtMSkgewogICAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5fY2FjaGVkQWNjb3VudHMucHVzaChhY2NvdW50KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5fY2FjaGVkQWNjb3VudHNbYWNjb3VudEluZGV4XSA9IGFjY291bnQ7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBtc2dfc2V0Q2hhdE11dGVkOiBmdW5jdGlvbiBtc2dfc2V0Q2hhdE11dGVkKHN0YXRlLCBfcmVmNCkgewogICAgICB2YXIgQ2hhdElkID0gX3JlZjQuQ2hhdElkLAogICAgICAgICAgSXNNdXRlZCA9IF9yZWY0LklzTXV0ZWQ7CgogICAgICBpZiAoc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JZCA9PT0gQ2hhdElkKSB7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5Jc011dGVkID0gSXNNdXRlZDsKICAgICAgfQoKICAgICAgdmFyIGNoYXQgPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNoYXRzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5JZCA9PT0gQ2hhdElkOwogICAgICB9KTsKCiAgICAgIGlmIChjaGF0KSB7CiAgICAgICAgY2hhdC5Jc011dGVkID0gSXNNdXRlZDsKICAgICAgfQogICAgfSwKICAgIG1zZ19yZW5hbWVDaGF0OiBmdW5jdGlvbiBtc2dfcmVuYW1lQ2hhdChzdGF0ZSwgX3JlZjUpIHsKICAgICAgdmFyIENoYXRJZCA9IF9yZWY1LkNoYXRJZCwKICAgICAgICAgIE5hbWUgPSBfcmVmNS5OYW1lOwogICAgICB2YXIgY2hhdCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLklkID09PSBDaGF0SWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGNoYXQpIHsKICAgICAgICBjaGF0Lk5hbWUgPSBOYW1lOwogICAgICB9CgogICAgICBpZiAoc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JZCA9PT0gQ2hhdElkKSB7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5OYW1lID0gTmFtZTsKICAgICAgfQogICAgfSwKICAgIG1zZ19pbmNyZWFzZVN1YnNjcmliZXJzQ291bnQ6IGZ1bmN0aW9uIG1zZ19pbmNyZWFzZVN1YnNjcmliZXJzQ291bnQoc3RhdGUsIGNoYXRJZCkgewogICAgICBpZiAoc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JZCA9PT0gY2hhdElkKSB7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5TdWJzY3JpYmVyc0NvdW50Kys7CiAgICAgIH0KCiAgICAgIHZhciBjaGF0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMuSWQgPT09IGNoYXRJZDsKICAgICAgfSk7CgogICAgICBpZiAoY2hhdCkgewogICAgICAgIGlmICghY2hhdC5TdWJzY3JpYmVyc0NvdW50KSB7CiAgICAgICAgICBjaGF0LlN1YnNjcmliZXJzQ291bnQgPSAwOwogICAgICAgIH0KCiAgICAgICAgY2hhdC5TdWJzY3JpYmVyc0NvdW50Kys7CiAgICAgIH0KICAgIH0sCiAgICBtc2dfZGVjcmVhc2VTdWJzY3JpYmVyc0NvdW50OiBmdW5jdGlvbiBtc2dfZGVjcmVhc2VTdWJzY3JpYmVyc0NvdW50KHN0YXRlLCBjaGF0SWQpIHsKICAgICAgaWYgKHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSWQgPT09IGNoYXRJZCkgewogICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuU3Vic2NyaWJlcnNDb3VudC0tOwogICAgICB9CgogICAgICB2YXIgY2hhdCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLklkID09PSBjaGF0SWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGNoYXQpIHsKICAgICAgICBpZiAoIWNoYXQuU3Vic2NyaWJlcnNDb3VudCkgewogICAgICAgICAgY2hhdC5TdWJzY3JpYmVyc0NvdW50ID0gMDsKICAgICAgICB9CgogICAgICAgIGNoYXQuU3Vic2NyaWJlcnNDb3VudC0tOwogICAgICB9CiAgICB9LAogICAgbXNnX3JlbW92ZUZyb21CbG9ja2xpc3Q6IGZ1bmN0aW9uIG1zZ19yZW1vdmVGcm9tQmxvY2tsaXN0KHN0YXRlLCBfcmVmNikgewogICAgICB2YXIgQ2hhdElkID0gX3JlZjYuQ2hhdElkLAogICAgICAgICAgQWNjb3VudElkID0gX3JlZjYuQWNjb3VudElkOwogICAgICB2YXIgY2hhdCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLklkID09PSBDaGF0SWQ7CiAgICAgIH0pOwogICAgICBpZiAoIWNoYXQpIHJldHVybjsKICAgICAgdmFyIGJsb2NrSWR4ID0gY2hhdC5CbG9ja0l0ZW1zLmZpbmRJbmRleChmdW5jdGlvbiAoYikgewogICAgICAgIHJldHVybiBiLkFjY291bnRJZCA9PT0gQWNjb3VudElkOwogICAgICB9KTsKICAgICAgaWYgKGJsb2NrSWR4ID09PSAtMSkgcmV0dXJuOwogICAgICBjaGF0LkJsb2NrSXRlbXMuc3BsaWNlKGJsb2NrSWR4LCAxKTsKCiAgICAgIGlmIChzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklkID09PSBDaGF0SWQpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LkJsb2NrSXRlbXMgPSBjaGF0LkJsb2NrSXRlbXM7CiAgICAgIH0KICAgIH0sCiAgICBtc2dfYWRkQmxvY2tsaXN0SXRlbXM6IGZ1bmN0aW9uIG1zZ19hZGRCbG9ja2xpc3RJdGVtcyhzdGF0ZSwgX3JlZjcpIHsKICAgICAgdmFyIENoYXRJZCA9IF9yZWY3LkNoYXRJZCwKICAgICAgICAgIEJsb2NrSXRlbXMgPSBfcmVmNy5CbG9ja0l0ZW1zOwogICAgICB2YXIgY2hhdCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLklkID09PSBDaGF0SWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGNoYXQpIHsKICAgICAgICBpZiAoIWNoYXQuQmxvY2tJdGVtcykgY2hhdC5CbG9ja0l0ZW1zID0gW107CiAgICAgICAgQmxvY2tJdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICBpZiAoIWNoYXQuQmxvY2tJdGVtcy5maW5kKGZ1bmN0aW9uIChiaSkgewogICAgICAgICAgICByZXR1cm4gYmkuSWQgPT09IGkuSWQ7CiAgICAgICAgICB9KSkgewogICAgICAgICAgICBjaGF0LkJsb2NrSXRlbXMucHVzaChpKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSWQgPT09IENoYXRJZCkgewogICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuQmxvY2tJdGVtcyA9IGNoYXQuQmxvY2tJdGVtczsKICAgICAgfQogICAgfSwKICAgIG1zZ19zZXRDaGF0SXNPbmxpbmU6IGZ1bmN0aW9uIG1zZ19zZXRDaGF0SXNPbmxpbmUoc3RhdGUsIF9yZWY4KSB7CiAgICAgIHZhciBDaGF0SWQgPSBfcmVmOC5DaGF0SWQsCiAgICAgICAgICBJc09ubGluZSA9IF9yZWY4LklzT25saW5lOwogICAgICB2YXIgY2hhdCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLklkID09PSBDaGF0SWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGNoYXQpIHsKICAgICAgICBjaGF0LklzT25saW5lID0gSXNPbmxpbmU7CiAgICAgIH0KCiAgICAgIGlmIChzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklkID09PSBDaGF0SWQpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklzT25saW5lID0gY2hhdC5Jc09ubGluZTsKICAgICAgfQogICAgfSwKICAgIC8vI2VuZHJlZ2lvbiBNc2cgQ2hhdHMKICAgIG1zZ19zZXRWaWV3ZWRQcm9maWxlSW5mbzogZnVuY3Rpb24gbXNnX3NldFZpZXdlZFByb2ZpbGVJbmZvKHN0YXRlLCBpbmZvKSB7CiAgICAgIGluZm8uSXNJbkNvbnRhY3RzID0gZmFsc2U7CiAgICAgIHZhciBjb250YWN0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5Db250YWN0cy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMuQWNjb3VudElkID09PSBpbmZvLklkOwogICAgICB9KTsKCiAgICAgIGlmIChjb250YWN0KSB7CiAgICAgICAgaW5mby5EaXNwbGF5ZWROYW1lID0gY29udGFjdC5OYW1lOwogICAgICAgIGluZm8uSXNJbkNvbnRhY3RzID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaW5mby5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgaW5mby5MYXN0VmlzaXRUaW1lICo9IDEwMDA7CiAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEudmlld2VkUHJvZmlsZSA9IGluZm87CiAgICB9LAogICAgbXNnX3NldEFjY291bnREaXNwbGF5ZWROYW1lOiBmdW5jdGlvbiBtc2dfc2V0QWNjb3VudERpc3BsYXllZE5hbWUoc3RhdGUsIF9yZWY5KSB7CiAgICAgIHZhciBuZXdEaXNwbGF5ZWROYW1lID0gX3JlZjkubmV3RGlzcGxheWVkTmFtZTsKICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50QWNjb3VudC5EaXNwbGF5ZWROYW1lID0gbmV3RGlzcGxheWVkTmFtZTsKICAgIH0sCiAgICBtc2dfc2V0QWNjb3VudElzTnVtYmVySGlkZWQ6IGZ1bmN0aW9uIG1zZ19zZXRBY2NvdW50SXNOdW1iZXJIaWRlZChzdGF0ZSwgaXNOdW1iZXJIaWRlZCkgewogICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRBY2NvdW50LklzTnVtYmVySGlkZWQgPSBpc051bWJlckhpZGVkOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgY2hlY2tDaGF0SXNMb2FkaW5nOiBmdW5jdGlvbiBjaGVja0NoYXRJc0xvYWRpbmcoX3JlZjEwKSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWYxMC5zdGF0ZSwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjEwLmRpc3BhdGNoOwoKICAgICAgaWYgKHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSXNMb2FkaW5nKSB7CiAgICAgICAgZGlzcGF0Y2goJ3NtYXJ0cGhvbmUvc2V0VGFiT3JCYWNrJywgewogICAgICAgICAga2V5OiAnTWVzc2VuZ2VyVGFiJywKICAgICAgICAgIHNlY3Rpb246ICdHZW5lcmFsU2VjdGlvbicsCiAgICAgICAgICBzdWJzZWN0aW9uOiAnR2VuZXJhbFN1YnNlY3Rpb24nLAogICAgICAgICAgZGF0YTogbnVsbAogICAgICAgIH0sIHsKICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICB9KTsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklzTG9hZGluZyA9IGZhbHNlOwogICAgICB9IGVsc2UgaWYgKHN0YXRlLm1lc3NlbmdlckRhdGEudmlld2VkUHJvZmlsZS5Jc0xvYWRpbmcpIHsKICAgICAgICBkaXNwYXRjaCgnc21hcnRwaG9uZS9zZXRUYWJPckJhY2snLCB7CiAgICAgICAgICBrZXk6ICdNZXNzZW5nZXJUYWInLAogICAgICAgICAgc2VjdGlvbjogJ0dlbmVyYWxTZWN0aW9uJywKICAgICAgICAgIHN1YnNlY3Rpb246ICdHZW5lcmFsU3Vic2VjdGlvbicsCiAgICAgICAgICBkYXRhOiBudWxsCiAgICAgICAgfSwgewogICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEudmlld2VkUHJvZmlsZS5Jc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIG1zZ19kcm9wQ3VycmVudENoYXQ6IGZ1bmN0aW9uIG1zZ19kcm9wQ3VycmVudENoYXQoX3JlZjExKSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWYxMS5zdGF0ZTsKICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JZCA9IC0xOwogICAgfSwKICAgIG1zZ19zZXRBZG1pbnNGb3JDdXJyZW50Q2hhdDogZnVuY3Rpb24gbXNnX3NldEFkbWluc0ZvckN1cnJlbnRDaGF0KF9yZWYxMiwgYWRtaW5zKSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWYxMi5zdGF0ZTsKICAgICAgdmFyIGNoYXRJZCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSWQ7CiAgICAgIHZhciBjaGF0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMuSWQgPT09IGNoYXRJZDsKICAgICAgfSk7CgogICAgICBpZiAoIWNoYXQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuQWRtaW5zID0gYWRtaW5zOwogICAgICBjaGF0LkFkbWlucyA9IGFkbWluczsKICAgIH0sCiAgICBtc2dfYWRkQWRtaW5Gb3JDaGF0OiBmdW5jdGlvbiBtc2dfYWRkQWRtaW5Gb3JDaGF0KF9yZWYxMywgX3JlZjE0KSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWYxMy5zdGF0ZTsKICAgICAgdmFyIENoYXRJZCA9IF9yZWYxNC5DaGF0SWQsCiAgICAgICAgICBBY2NvdW50SWQgPSBfcmVmMTQuQWNjb3VudElkOwogICAgICB2YXIgc3Vic2NyaWJlciA9IHN0YXRlLm1lc3NlbmdlckRhdGEuU2VhcmNoU3Vic2NyaWJlcnMuZmluZChmdW5jdGlvbiAocykgewogICAgICAgIHJldHVybiBzLklkID09PSBBY2NvdW50SWQ7CiAgICAgIH0pOwogICAgICBpZiAoIXN1YnNjcmliZXIpIHJldHVybjsKICAgICAgdmFyIGNoYXQgPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNoYXRzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5JZCA9PT0gQ2hhdElkOwogICAgICB9KTsKICAgICAgaWYgKCFjaGF0KSByZXR1cm47CiAgICAgIHN1YnNjcmliZXIuQWRtaW5MdmwgPSAxOwogICAgICBzdWJzY3JpYmVyLlBlcm1pc3Npb25zID0gW107CiAgICAgIGNoYXQuQWRtaW5zLnB1c2goc3Vic2NyaWJlcik7CgogICAgICBpZiAoc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JZCA9PT0gQ2hhdElkKSB7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5BZG1pbnMucHVzaChzdWJzY3JpYmVyKTsKICAgICAgfQogICAgfSwKICAgIG1zZ19kZWxldGVBZG1pbkZvckNoYXQ6IGZ1bmN0aW9uIG1zZ19kZWxldGVBZG1pbkZvckNoYXQoX3JlZjE1LCBfcmVmMTYpIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZjE1LnN0YXRlOwogICAgICB2YXIgQ2hhdElkID0gX3JlZjE2LkNoYXRJZCwKICAgICAgICAgIEFkbWluSWQgPSBfcmVmMTYuQWRtaW5JZDsKICAgICAgdmFyIGNoYXQgPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNoYXRzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5JZCA9PT0gQ2hhdElkOwogICAgICB9KTsKICAgICAgaWYgKCFjaGF0KSByZXR1cm47CiAgICAgIHZhciBhZG1pbklkeCA9IGNoYXQuQWRtaW5zLmZpbmRJbmRleChmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiBhLklkID09PSBBZG1pbklkOwogICAgICB9KTsKCiAgICAgIGlmIChhZG1pbklkeCAhPT0gLTEpIHsKICAgICAgICBjaGF0LkFkbWlucy5zcGxpY2UoYWRtaW5JZHgsIDEpOwogICAgICB9CgogICAgICBpZiAoc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JZCA9PT0gQ2hhdElkKSB7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5BZG1pbnMgPSBjaGF0LkFkbWluczsKICAgICAgfQogICAgfSwKICAgIG1zZ19zZXRNeUFkbWluUGVybWlzc2lvbnNGb3JDaGF0OiBmdW5jdGlvbiBtc2dfc2V0TXlBZG1pblBlcm1pc3Npb25zRm9yQ2hhdChfcmVmMTcsIF9yZWYxOCkgewogICAgICB2YXIgc3RhdGUgPSBfcmVmMTcuc3RhdGU7CiAgICAgIHZhciBDaGF0SWQgPSBfcmVmMTguQ2hhdElkLAogICAgICAgICAgQWRtaW5MdmwgPSBfcmVmMTguQWRtaW5MdmwsCiAgICAgICAgICBQZXJtaXNzaW9ucyA9IF9yZWYxOC5QZXJtaXNzaW9uczsKICAgICAgdmFyIGNoYXQgPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNoYXRzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5JZCA9PT0gQ2hhdElkOwogICAgICB9KTsKICAgICAgaWYgKCFjaGF0KSByZXR1cm47CiAgICAgIGNoYXQuUGVybWlzc2lvbnMgPSBQZXJtaXNzaW9uczsKICAgICAgY2hhdC5BZG1pbkx2bCA9IEFkbWluTHZsOwogICAgfSwKICAgIG1zZ19vcGVuQ2hhdDogZnVuY3Rpb24gbXNnX29wZW5DaGF0KF9yZWYxOSwgY2hhdElkKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMTkuY29tbWl0LAogICAgICAgICAgc3RhdGUgPSBfcmVmMTkuc3RhdGU7CiAgICAgIHZhciBjaGF0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMuSWQgPT09IGNoYXRJZDsKICAgICAgfSk7CiAgICAgIHZhciBzdWJzZWN0aW9uc0J5Q2hhdFR5cGUgPSB7CiAgICAgICAgMDogJ1ByaXZhdGVTdWJzZWN0aW9uJywKICAgICAgICAxOiAnR3JvdXBTdWJzZWN0aW9uJywKICAgICAgICAyOiAnQ2FuYWxTdWJzZWN0aW9uJwogICAgICB9OwogICAgICBjb21taXQoJ21zZ19zZXRDdXJyZW50Q2hhdCcsIGNoYXQpOyAvLyBJc0FscmVhZHlMb2FkZWQgLSDRgyDQuNCz0YDQvtC60LAg0YPQttC1INC/0L7QtNCz0YDRg9C20LXQvdGLINC/0L7RgdC70LXQtNC90LjQtSDRgdC+0L7QsdGJ0LXQvdC40Y8g0LIg0YfQsNGC0LUKCiAgICAgIGlmIChjaGF0LklzQWxyZWFkeUxvYWRlZCkgewogICAgICAgIHZhciBtZXNzYWdlcyA9IHN0YXRlLm1lc3NlbmdlckRhdGEuX2NhY2hlZE1lc3NhZ2VzLmZpbHRlcihmdW5jdGlvbiAobSkgewogICAgICAgICAgcmV0dXJuIG0uQ2hhdElkID09PSBjaGF0SWQ7CiAgICAgICAgfSk7CgogICAgICAgIGNvbW1pdCgnbXNnX3NldEN1cnJlbnRDaGF0TWVzc2FnZXMnLCBtZXNzYWdlcyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgd2luZG93Lm1wLnRyaWdnZXJTZXJ2ZXIoJ3Bob25lOjptc2c6OnJlcXVlc3RDaGF0JywgY2hhdElkKTsKICAgICAgICBjb21taXQoJ21zZ19zZXRDdXJyZW50Q2hhdElzTG9hZGluZycsIHRydWUpOwogICAgICB9CgogICAgICBjb21taXQoJ3NtYXJ0cGhvbmUvc2V0Q3VycmVudFRhYicsIHsKICAgICAgICBrZXk6ICdNZXNzZW5nZXJUYWInLAogICAgICAgIHNlY3Rpb246ICdDaGF0U2VjdGlvbicsCiAgICAgICAgc3Vic2VjdGlvbjogc3Vic2VjdGlvbnNCeUNoYXRUeXBlW2NoYXQuVHlwZV0sCiAgICAgICAgZGF0YTogbnVsbAogICAgICB9LCB7CiAgICAgICAgcm9vdDogdHJ1ZQogICAgICB9KTsKCiAgICAgIGlmIChjaGF0Lk5vblJlYWRNZXNzYWdlc0NvdW50ID4gMCkgewogICAgICAgIHdpbmRvdy5tcC50cmlnZ2VyU2VydmVyKCdwaG9uZTo6bXNnOjptYXJrQXNSZWFkJywgY2hhdElkKTsKICAgICAgfQogICAgfSwKICAgIG1zZ19vcGVuUHJpdmF0ZUNoYXQ6IGZ1bmN0aW9uIG1zZ19vcGVuUHJpdmF0ZUNoYXQoX3JlZjIwLCBhY2NvdW50SWQpIHsKICAgICAgdmFyIGRpc3BhdGNoID0gX3JlZjIwLmRpc3BhdGNoLAogICAgICAgICAgY29tbWl0ID0gX3JlZjIwLmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjIwLnN0YXRlOwogICAgICB2YXIgcHJpdmF0ZUNoYXQgPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNoYXRzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5BY2NvdW50SWQgPT09IGFjY291bnRJZDsKICAgICAgfSk7CgogICAgICBpZiAocHJpdmF0ZUNoYXQpIHsKICAgICAgICBkaXNwYXRjaCgnbXNnX29wZW5DaGF0JywgcHJpdmF0ZUNoYXQuSWQpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbW1pdCgnbXNnX3NldEN1cnJlbnRDaGF0SXNMb2FkaW5nJywgdHJ1ZSk7CiAgICAgICAgY29tbWl0KCdtc2dfc2V0Q3VycmVudENoYXQnLCB7CiAgICAgICAgICBJZDogLTEsCiAgICAgICAgICBOYW1lOiAnUHJpdmF0ZSBDaGF0JywKICAgICAgICAgIElzT25saW5lOiBmYWxzZSwKICAgICAgICAgIFR5cGU6IDAsCiAgICAgICAgICBBY2NvdW50SWQ6IGFjY291bnRJZAogICAgICAgIH0pOwogICAgICAgIHdpbmRvdy5tcC50cmlnZ2VyU2VydmVyKCdwaG9uZTo6bXNnOjpjcmVhdGVQcml2YXRlQ2hhdCcsIGFjY291bnRJZCk7CiAgICAgICAgY29tbWl0KCdzbWFydHBob25lL3NldEN1cnJlbnRUYWInLCB7CiAgICAgICAgICBrZXk6ICdNZXNzZW5nZXJUYWInLAogICAgICAgICAgc2VjdGlvbjogJ0NoYXRTZWN0aW9uJywKICAgICAgICAgIHN1YnNlY3Rpb246ICdQcml2YXRlU3Vic2VjdGlvbicsCiAgICAgICAgICBkYXRhOiBudWxsCiAgICAgICAgfSwgewogICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgbXNnX2xvYWRJbmNoYXRJbmZvOiBmdW5jdGlvbiBtc2dfbG9hZEluY2hhdEluZm8oX3JlZjIxLCBfcmVmMjIpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyMS5jb21taXQsCiAgICAgICAgICBzdGF0ZSA9IF9yZWYyMS5zdGF0ZTsKICAgICAgdmFyIENoYXRJZCA9IF9yZWYyMi5DaGF0SWQsCiAgICAgICAgICBTdWJzY3JpYmVyc0NvdW50ID0gX3JlZjIyLlN1YnNjcmliZXJzQ291bnQsCiAgICAgICAgICBNZXNzYWdlcyA9IF9yZWYyMi5NZXNzYWdlcywKICAgICAgICAgIFBlcm1pc3Npb25zID0gX3JlZjIyLlBlcm1pc3Npb25zLAogICAgICAgICAgQWRtaW5MdmwgPSBfcmVmMjIuQWRtaW5MdmwsCiAgICAgICAgICBJbnZpdGVDb2RlID0gX3JlZjIyLkludml0ZUNvZGU7CiAgICAgIE1lc3NhZ2VzLmZvckVhY2goZnVuY3Rpb24gKG1lc3NhZ2UpIHsKICAgICAgICBtZXNzYWdlLlRpbWUgKj0gMTAwMDsKICAgICAgICBtZXNzYWdlLkNoYXRJZCA9IENoYXRJZDsKICAgICAgICBjb21taXQoJ21zZ19jYWNoZU1lc3NhZ2UnLCBtZXNzYWdlKTsKICAgICAgfSk7CiAgICAgIHZhciBjaGF0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMuSWQgPT09IENoYXRJZDsKICAgICAgfSk7CiAgICAgIGNoYXQuU3Vic2NyaWJlcnNDb3VudCA9IFN1YnNjcmliZXJzQ291bnQ7CiAgICAgIGNoYXQuUGVybWlzc2lvbnMgPSBQZXJtaXNzaW9uczsKICAgICAgY2hhdC5Jc0FscmVhZHlMb2FkZWQgPSB0cnVlOwogICAgICBjaGF0LkFkbWluTHZsID0gQWRtaW5Mdmw7CiAgICAgIGNoYXQuSW52aXRlQ29kZSA9IEludml0ZUNvZGU7CiAgICAgIGNvbW1pdCgnbXNnX3NldEN1cnJlbnRDaGF0JywgY2hhdCk7CiAgICAgIGNvbW1pdCgnbXNnX3NldEN1cnJlbnRDaGF0TWVzc2FnZXMnLCBNZXNzYWdlcyk7IC8vINCf0L7QtNCz0YDRg9C30LrQsCDQvdC10LfQsNC60LXRiNC40YDQvtCy0LDQvdC90YvRhSDQsNC60LrQsNGD0L3RgtC+0LIKCiAgICAgIHZhciBzZW5kZXJzSWRzID0gX3RvQ29uc3VtYWJsZUFycmF5KG5ldyBTZXQoTWVzc2FnZXMubWFwKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgcmV0dXJuIG0uU2VuZGVySWQ7CiAgICAgIH0pKSk7CgogICAgICB2YXIgbm9uQ2FjaGVkQWNjb3VudHNJZHMgPSBzZW5kZXJzSWRzLmZpbHRlcihmdW5jdGlvbiAoYWNjb3VudElkKSB7CiAgICAgICAgcmV0dXJuICFzdGF0ZS5tZXNzZW5nZXJEYXRhLl9jYWNoZWRBY2NvdW50cy5maW5kKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICByZXR1cm4gYS5JZCA9PT0gYWNjb3VudElkOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgd2luZG93Lm1wLnRyaWdnZXJTZXJ2ZXIoJ3Bob25lOjptc2c6OnJlcXVlc3RBY2NvdW50c05hbWVzJywgSlNPTi5zdHJpbmdpZnkobm9uQ2FjaGVkQWNjb3VudHNJZHMpKTsKICAgIH0sCiAgICBtc2dfb3BlbkFjY291bnQ6IGZ1bmN0aW9uIG1zZ19vcGVuQWNjb3VudChfcmVmMjMsIGFjY291bnRJZCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjIzLmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjIzLnN0YXRlOwogICAgICB2YXIgY29udGFjdCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ29udGFjdHMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLkFjY291bnRJZCA9PT0gYWNjb3VudElkOwogICAgICB9KTsKCiAgICAgIGlmIChjb250YWN0KSB7CiAgICAgICAgY29uc29sZS5sb2coIiIuY29uY2F0KGFjY291bnRJZCkpOwogICAgICB9CgogICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLnZpZXdlZFByb2ZpbGUuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgd2luZG93Lm1wLnRyaWdnZXJTZXJ2ZXIoJ3Bob25lOjptc2c6OnJlcXVlc3RBY2NvdW50JywgYWNjb3VudElkKTsKICAgICAgY29tbWl0KCdzbWFydHBob25lL3NldEN1cnJlbnRUYWInLCB7CiAgICAgICAga2V5OiAnTWVzc2VuZ2VyVGFiJywKICAgICAgICBzZWN0aW9uOiAnVmlld2VkUHJvZmlsZVNlY3Rpb24nLAogICAgICAgIGRhdGE6IG51bGwKICAgICAgfSwgewogICAgICAgIHJvb3Q6IHRydWUKICAgICAgfSk7CiAgICB9LAogICAgbXNnX3NldEFjY291bnRBbmRDaGF0TXV0ZWQ6IGZ1bmN0aW9uIG1zZ19zZXRBY2NvdW50QW5kQ2hhdE11dGVkKF9yZWYyNCwgX3JlZjI1KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMjQuY29tbWl0LAogICAgICAgICAgc3RhdGUgPSBfcmVmMjQuc3RhdGU7CiAgICAgIHZhciBDaGF0SWQgPSBfcmVmMjUuQ2hhdElkLAogICAgICAgICAgQWNjb3VudElkID0gX3JlZjI1LkFjY291bnRJZCwKICAgICAgICAgIElzTXV0ZWQgPSBfcmVmMjUuSXNNdXRlZDsKICAgICAgY29tbWl0KCdtc2dfc2V0Q2hhdE11dGVkJywgewogICAgICAgIENoYXRJZDogQ2hhdElkLAogICAgICAgIElzTXV0ZWQ6IElzTXV0ZWQKICAgICAgfSk7CgogICAgICBpZiAoc3RhdGUubWVzc2VuZ2VyRGF0YS52aWV3ZWRQcm9maWxlLklkID09PSBBY2NvdW50SWQpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLnZpZXdlZFByb2ZpbGUuSXNNdXRlZCA9IElzTXV0ZWQ7CiAgICAgIH0KICAgIH0sCiAgICBtc2dfc2V0QWNjb3VudEJsb2NrZWQ6IGZ1bmN0aW9uIG1zZ19zZXRBY2NvdW50QmxvY2tlZChfcmVmMjYsIF9yZWYyNykgewogICAgICB2YXIgc3RhdGUgPSBfcmVmMjYuc3RhdGU7CiAgICAgIHZhciBBY2NvdW50SWQgPSBfcmVmMjcuQWNjb3VudElkLAogICAgICAgICAgSXNCbG9ja2VkID0gX3JlZjI3LklzQmxvY2tlZDsKCiAgICAgIGlmIChzdGF0ZS5tZXNzZW5nZXJEYXRhLnZpZXdlZFByb2ZpbGUuSWQgPT09IEFjY291bnRJZCkgewogICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEudmlld2VkUHJvZmlsZS5Jc0Jsb2NrZWQgPSBJc0Jsb2NrZWQ7CiAgICAgIH0KICAgIH0sCiAgICBtc2dfcmVtb3ZlQ29udGFjdDogZnVuY3Rpb24gbXNnX3JlbW92ZUNvbnRhY3QoX3JlZjI4LCBfcmVmMjkpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyOC5jb21taXQsCiAgICAgICAgICBzdGF0ZSA9IF9yZWYyOC5zdGF0ZTsKICAgICAgdmFyIENvbnRhY3RJZCA9IF9yZWYyOS5Db250YWN0SWQsCiAgICAgICAgICBBY2NvdW50RGlzcGxheWVkTmFtZSA9IF9yZWYyOS5BY2NvdW50RGlzcGxheWVkTmFtZTsKICAgICAgdmFyIGNvbnRhY3QgPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNvbnRhY3RzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5JZCA9PT0gQ29udGFjdElkOwogICAgICB9KTsKCiAgICAgIGlmIChjb250YWN0KSB7CiAgICAgICAgdmFyIHByaXZhdGVDaGF0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICByZXR1cm4gYy5BY2NvdW50SWQgPT0gY29udGFjdC5BY2NvdW50SWQ7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChwcml2YXRlQ2hhdCkgewogICAgICAgICAgY29tbWl0KCdtc2dfcmVuYW1lQ2hhdCcsIHsKICAgICAgICAgICAgQ2hhdElkOiBwcml2YXRlQ2hhdC5JZCwKICAgICAgICAgICAgTmFtZTogQWNjb3VudERpc3BsYXllZE5hbWUKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKHN0YXRlLm1lc3NlbmdlckRhdGEudmlld2VkUHJvZmlsZS5JZCA9PT0gY29udGFjdC5BY2NvdW50SWQpIHsKICAgICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEudmlld2VkUHJvZmlsZS5EaXNwbGF5ZWROYW1lID0gQWNjb3VudERpc3BsYXllZE5hbWU7CiAgICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLnZpZXdlZFByb2ZpbGUuSXNJbkNvbnRhY3RzID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb21taXQoJ21zZ19yZW1vdmVTdG9yZUNvbnRhY3QnLCBDb250YWN0SWQpOwogICAgfSwKICAgIG1zZ19hZGRDb250YWN0OiBmdW5jdGlvbiBtc2dfYWRkQ29udGFjdChfcmVmMzAsIGNvbnRhY3QpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzMC5jb21taXQsCiAgICAgICAgICBzdGF0ZSA9IF9yZWYzMC5zdGF0ZTsKCiAgICAgIGlmIChzdGF0ZS5tZXNzZW5nZXJEYXRhLnZpZXdlZFByb2ZpbGUuSWQgPT09IGNvbnRhY3QuQWNjb3VudElkKSB7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS52aWV3ZWRQcm9maWxlLkRpc3BsYXllZE5hbWUgPSBjb250YWN0Lk5hbWU7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS52aWV3ZWRQcm9maWxlLklzSW5Db250YWN0cyA9IHRydWU7CiAgICAgIH0KCiAgICAgIGNvbW1pdCgnbXNnX2xvYWRDb250YWN0cycsIFtjb250YWN0XSk7CiAgICB9LAogICAgbXNnX2xvYWRDaGF0OiBmdW5jdGlvbiBtc2dfbG9hZENoYXQoX3JlZjMxLCBjaGF0KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMzEuY29tbWl0LAogICAgICAgICAgc3RhdGUgPSBfcmVmMzEuc3RhdGU7CgogICAgICBpZiAoIWNoYXQuU3Vic2NyaWJlcnNDb3VudCkgewogICAgICAgIGNoYXQuU3Vic2NyaWJlcnNDb3VudCA9IDA7CiAgICAgIH0KCiAgICAgIGNvbW1pdCgnbXNnX2xvYWRDaGF0cycsIFtjaGF0XSk7CgogICAgICBpZiAoc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JZCA9PT0gLTEgfHwgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JZCA9PT0gY2hhdC5JZCkgewogICAgICAgIHdpbmRvdy5tcC50cmlnZ2VyU2VydmVyKCdwaG9uZTo6bXNnOjpyZXF1ZXN0Q2hhdCcsIGNoYXQuSWQpOwogICAgICB9CiAgICB9LAogICAgbXNnX2NyZWF0ZUNoYXQ6IGZ1bmN0aW9uIG1zZ19jcmVhdGVDaGF0KF9yZWYzMiwgX3JlZjMzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMzIuY29tbWl0OwogICAgICB2YXIgQ2hhdFR5cGUgPSBfcmVmMzMuQ2hhdFR5cGUsCiAgICAgICAgICBOYW1lID0gX3JlZjMzLk5hbWUsCiAgICAgICAgICBEZXNjcmlwdGlvbiA9IF9yZWYzMy5EZXNjcmlwdGlvbiwKICAgICAgICAgIEljb25Db2xvcnMgPSBfcmVmMzMuSWNvbkNvbG9ycywKICAgICAgICAgIFVzZXJzVG9JbnZpdGUgPSBfcmVmMzMuVXNlcnNUb0ludml0ZTsKICAgICAgY29tbWl0KCdtc2dfc2V0Q3VycmVudENoYXQnLCB7CiAgICAgICAgSWQ6IC0xLAogICAgICAgIE5hbWU6IE5hbWUsCiAgICAgICAgSXNPbmxpbmU6IGZhbHNlLAogICAgICAgIFR5cGU6IENoYXRUeXBlLAogICAgICAgIEljb25Db2xvcnM6IEljb25Db2xvcnMsCiAgICAgICAgU3Vic2NyaWJlcnNDb3VudDogMAogICAgICB9KTsKICAgICAgdmFyIHN1YnNlY3Rpb25zQnlDaGF0VHlwZSA9IHsKICAgICAgICAwOiAnUHJpdmF0ZVN1YnNlY3Rpb24nLAogICAgICAgIDE6ICdHcm91cFN1YnNlY3Rpb24nLAogICAgICAgIDI6ICdDYW5hbFN1YnNlY3Rpb24nCiAgICAgIH07CiAgICAgIGNvbW1pdCgnc21hcnRwaG9uZS9zZXRDdXJyZW50VGFiJywgewogICAgICAgIGtleTogJ01lc3NlbmdlclRhYicsCiAgICAgICAgc2VjdGlvbjogJ0NoYXRTZWN0aW9uJywKICAgICAgICBzdWJzZWN0aW9uOiBzdWJzZWN0aW9uc0J5Q2hhdFR5cGVbQ2hhdFR5cGVdLAogICAgICAgIGRhdGE6IG51bGwKICAgICAgfSwgewogICAgICAgIHJvb3Q6IHRydWUKICAgICAgfSk7CiAgICAgIGNvbW1pdCgnbXNnX3NldEN1cnJlbnRDaGF0SXNMb2FkaW5nJywgdHJ1ZSk7CgogICAgICBpZiAoQ2hhdFR5cGUgPT09IDEpIHsKICAgICAgICB3aW5kb3cubXAudHJpZ2dlclNlcnZlcigncGhvbmU6Om1zZzo6Y3JlYXRlR3JvdXBDaGF0JywgTmFtZSwgRGVzY3JpcHRpb24sIEljb25Db2xvcnMsIEpTT04uc3RyaW5naWZ5KFVzZXJzVG9JbnZpdGUpKTsKICAgICAgfSBlbHNlIGlmIChDaGF0VHlwZSA9PT0gMikgewogICAgICAgIHdpbmRvdy5tcC50cmlnZ2VyU2VydmVyKCdwaG9uZTo6bXNnOjpjcmVhdGVDaGFubmVsJywgTmFtZSwgRGVzY3JpcHRpb24sIEljb25Db2xvcnMpOwogICAgICB9CiAgICB9LAogICAgbXNnX3NlbmRNZXNzYWdlOiBmdW5jdGlvbiBtc2dfc2VuZE1lc3NhZ2UoX3JlZjM0LCBfcmVmMzUpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzNC5jb21taXQsCiAgICAgICAgICBzdGF0ZSA9IF9yZWYzNC5zdGF0ZSwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjM0LmRpc3BhdGNoOwogICAgICB2YXIgQ2hhdElkID0gX3JlZjM1LkNoYXRJZCwKICAgICAgICAgIE1lc3NhZ2UgPSBfcmVmMzUuTWVzc2FnZTsKICAgICAgTWVzc2FnZS5DaGF0SWQgPSBDaGF0SWQ7CiAgICAgIE1lc3NhZ2UuVGltZSAqPSAxMDAwOwogICAgICBjb21taXQoJ21zZ19jYWNoZU1lc3NhZ2UnLCBNZXNzYWdlKTsKICAgICAgY29tbWl0KCdtc2dfc2V0TGFzdE1lc3NhZ2UnLCBNZXNzYWdlKTsKCiAgICAgIGlmICghc3RhdGUubWVzc2VuZ2VyRGF0YS5fY2FjaGVkQWNjb3VudHMuZmluZChmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiBhLklkID09PSBNZXNzYWdlLlNlbmRlcklkOwogICAgICB9KSkgewogICAgICAgIHdpbmRvdy5tcC50cmlnZ2VyU2VydmVyKCdwaG9uZTo6bXNnOjpyZXF1ZXN0QWNjb3VudHNOYW1lcycsICJbIi5jb25jYXQoTWVzc2FnZS5TZW5kZXJJZCwgIl0iKSk7CiAgICAgIH0KCiAgICAgIGlmIChzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklkID09PSBDaGF0SWQpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0Lkl0ZW1zLnB1c2goTWVzc2FnZSk7CgogICAgICAgIGlmIChNZXNzYWdlLlNlbmRlcklkICE9PSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRBY2NvdW50LklkKSB7CiAgICAgICAgICB3aW5kb3cubXAudHJpZ2dlclNlcnZlcigncGhvbmU6Om1zZzo6bWFya0FzUmVhZCcsIENoYXRJZCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKE1lc3NhZ2UuU2VuZGVySWQgIT09IHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudEFjY291bnQuSWQpIHsKICAgICAgICB2YXIgY2hhdCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgICAgcmV0dXJuIGMuSWQgPT09IENoYXRJZDsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKGNoYXQpIHsKICAgICAgICAgIGNoYXQuTm9uUmVhZE1lc3NhZ2VzQ291bnQrKzsKCiAgICAgICAgICBpZiAoIWNoYXQuSXNNdXRlZCkgewogICAgICAgICAgICBkaXNwYXRjaCgnc21hcnRwaG9uZS9zb3VuZHNfcGxheU5vdGlmaWNhdGlvbicsIHsKICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIG1zZ19kZWxldGVNZXNzYWdlOiBmdW5jdGlvbiBtc2dfZGVsZXRlTWVzc2FnZShfcmVmMzYsIE1lc3NhZ2VJZCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjM2LmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjM2LnN0YXRlOwogICAgICBjb21taXQoJ21zZ191bmNhY2hlTWVzc2FnZScsIE1lc3NhZ2VJZCk7CgogICAgICBpZiAoc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JdGVtcykgewogICAgICAgIHZhciBtc2dJZHggPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0Lkl0ZW1zLmZpbmRJbmRleChmdW5jdGlvbiAobSkgewogICAgICAgICAgcmV0dXJuIG0uSWQgPT09IE1lc3NhZ2VJZDsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKG1zZ0lkeCAhPT0gLTEpIHsKICAgICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSXRlbXMuc3BsaWNlKG1zZ0lkeCwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgbXNnX2VkaXRNZXNzYWdlOiBmdW5jdGlvbiBtc2dfZWRpdE1lc3NhZ2UoX3JlZjM3LCBfcmVmMzgpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzNy5jb21taXQsCiAgICAgICAgICBzdGF0ZSA9IF9yZWYzNy5zdGF0ZTsKICAgICAgdmFyIENoYXRJZCA9IF9yZWYzOC5DaGF0SWQsCiAgICAgICAgICBNZXNzYWdlID0gX3JlZjM4Lk1lc3NhZ2U7CiAgICAgIE1lc3NhZ2UuQ2hhdElkID0gQ2hhdElkOwogICAgICBNZXNzYWdlLlRpbWUgKj0gMTAwMDsKICAgICAgY29tbWl0KCdtc2dfY2FjaGVNZXNzYWdlJywgTWVzc2FnZSk7CgogICAgICBpZiAoc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JZCA9PT0gQ2hhdElkKSB7CiAgICAgICAgdmFyIG1zZ0lkeCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSXRlbXMuZmluZEluZGV4KGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICByZXR1cm4gbS5JZCA9PT0gTWVzc2FnZS5JZDsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKG1zZ0lkeCAhPT0gLTEpIHsKICAgICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSXRlbXMuc3BsaWNlKG1zZ0lkeCwgMSk7CiAgICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0Lkl0ZW1zLnB1c2goTWVzc2FnZSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgbXNnX2RlbGV0ZUNoYXQ6IGZ1bmN0aW9uIG1zZ19kZWxldGVDaGF0KF9yZWYzOSwgY2hhdElkKSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWYzOS5zdGF0ZSwKICAgICAgICAgIGNvbW1pdCA9IF9yZWYzOS5jb21taXQ7CiAgICAgIGNvbW1pdCgnbXNnX3JlbW92ZUNoYXQnLCBjaGF0SWQpOwoKICAgICAgaWYgKHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSWQgPT09IGNoYXRJZCkgewogICAgICAgIGNvbW1pdCgnc21hcnRwaG9uZS9zZXRDdXJyZW50VGFiJywgewogICAgICAgICAga2V5OiAnTWVzc2VuZ2VyVGFiJywKICAgICAgICAgIHNlY3Rpb246ICdHZW5lcmFsU2VjdGlvbicsCiAgICAgICAgICBzdWJzZWN0aW9uOiAnR2VuZXJhbFN1YnNlY3Rpb24nLAogICAgICAgICAgZGF0YTogbnVsbAogICAgICAgIH0sIHsKICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIG1zZ19zZXRJbkNoYXRCbG9ja2VkOiBmdW5jdGlvbiBtc2dfc2V0SW5DaGF0QmxvY2tlZChfcmVmNDAsIF9yZWY0MSkgewogICAgICB2YXIgc3RhdGUgPSBfcmVmNDAuc3RhdGUsCiAgICAgICAgICBkaXNwYXRjaCA9IF9yZWY0MC5kaXNwYXRjaDsKICAgICAgdmFyIENoYXRJZCA9IF9yZWY0MS5DaGF0SWQsCiAgICAgICAgICBJc0Jsb2NrZWQgPSBfcmVmNDEuSXNCbG9ja2VkOwoKICAgICAgaWYgKHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSWQgPT09IENoYXRJZCkgewogICAgICAgIGRpc3BhdGNoKCdzbWFydHBob25lL21zZ19nb1RvQ2hhdHMnLCB0cnVlLCB7CiAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChJc0Jsb2NrZWQpIHsKICAgICAgICB2YXIgY2hhdElkeCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuZmluZEluZGV4KGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICByZXR1cm4gYy5JZCA9PT0gQ2hhdElkOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoY2hhdElkeCAhPT0gLTEpIHsKICAgICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuc3BsaWNlKGNoYXRJZHgsIDEpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["C:/gta go/Gui/src/store/smartphone/modules/message-page.js"],"names":["namespaced","state","messengerData","CurrentAccount","Id","Username","DisplayedName","IsNumberHided","SearchSubscribers","Chats","Contacts","_cachedAccounts","_cachedMessages","CurrentChat","Name","IsOnline","Type","IconColors","SubscribersCount","Items","IsLoading","CanalProfile","AdminLvl","Abilities","changeProfile","createPosts","deletePosts","appointmentAdmins","viewedProfile","Number","IsMuted","IsBlocked","LastVisitTime","IsInContacts","isLoading","mutations","setMessengerCanalProfileAbility","key","value","currentChat","chat","find","c","admin","Admins","a","Permissions","push","idx","indexOf","splice","window","mp","triggerServer","setMessengerCurrentChatIconColors","msg_setAccountSettings","accountSettings","msg_setSubscribersForSearch","subscribers","forEach","subscriber","msg_loadContacts","contacts","contact","Time","oldContactIndex","findIndex","privateChat","AccountId","msg_removeStoreContact","contactId","contactIndex","msg_setContactIsOnline","isOnline","msg_loadChats","chats","chatIndex","ActionTime","LastMessage","CreatedTime","msg_removeChat","chatId","chatIdx","msg_cacheMessage","message","cachedMessageIndex","m","msg_uncacheMessage","messageId","msg_markChatMessagesAsRead","NonReadMessagesCount","msg_setOwnMessagesReadInChat","SenderId","IsRead","msg_setLastMessage","ChatId","msg_setCurrentChatIsLoading","toggle","msg_setCurrentChatMessages","messages","msg_setCurrentChat","Description","InviteCode","BlockItems","CanChangingGroupProfile","includes","CanDeletingMessages","CanBlockingAccounts","CanPurposingAdmins","CanCreatingPosts","msg_loadAccounts","accounts","account","accountIndex","msg_setChatMuted","msg_renameChat","msg_increaseSubscribersCount","msg_decreaseSubscribersCount","msg_removeFromBlocklist","blockIdx","b","msg_addBlocklistItems","i","bi","msg_setChatIsOnline","msg_setViewedProfileInfo","info","msg_setAccountDisplayedName","newDisplayedName","msg_setAccountIsNumberHided","isNumberHided","actions","checkChatIsLoading","dispatch","section","subsection","data","root","msg_dropCurrentChat","msg_setAdminsForCurrentChat","admins","msg_addAdminForChat","s","msg_deleteAdminForChat","AdminId","adminIdx","msg_setMyAdminPermissionsForChat","msg_openChat","commit","subsectionsByChatType","IsAlreadyLoaded","filter","msg_openPrivateChat","accountId","msg_loadInchatInfo","Messages","sendersIds","Set","map","nonCachedAccountsIds","JSON","stringify","msg_openAccount","console","log","msg_setAccountAndChatMuted","msg_setAccountBlocked","msg_removeContact","ContactId","AccountDisplayedName","msg_addContact","msg_loadChat","msg_createChat","ChatType","UsersToInvite","msg_sendMessage","Message","msg_deleteMessage","MessageId","msgIdx","msg_editMessage","msg_deleteChat","msg_setInChatBlocked"],"mappings":"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","sourcesContent":["export default {\r\n  namespaced: true,\r\n  state: {\r\n    messengerData: {\r\n      CurrentAccount: {\r\n        Id: -1,\r\n        Username: 'milt',\r\n        DisplayedName: 'matvey',\r\n        IsNumberHided: false\r\n      },\r\n      SearchSubscribers: [\r\n        // { Id: 0, DisplayedName: 'Gay Man', LastVisitTime: 203331212332 }\r\n      ],\r\n      Chats: [\r\n        // { Id: 8, Name: 'First chat8', IsOnline: true, Type: 0, NonReadMessagesCount: 0,\r\n        // LastMessage: { Id: 0, ChatId: 0, Text: 'Hi! Who are you?', Type: 0,\r\n        // Time: 1603005132000, IsRead: false, Admins: [\r\n        //    { DisplayedName: 'Gondon', Id: 2, AdminLvl: 2, Permission: [0, 2, 3, 4] } \r\n        // ] } },\r\n      ],\r\n      Contacts: [\r\n        // { Id: 12, Name: '', Number: 88005543535, Time: 1130443200000, IsOnline: true },\r\n      ],\r\n      _cachedAccounts: [\r\n        // { Id: 0, DisplayedName: '' }\r\n      ],\r\n      _cachedMessages: [\r\n\r\n      ],\r\n      CurrentChat: {\r\n        Id: 0,\r\n        Name: 'SJSJFKWPCOEJV SJEKRIFJANDLWR',\r\n        IsOnline: null,\r\n        Type: 0,\r\n        IconColors: 'linear-gradient(90deg, #43E97B 0%, #38F9D7 100%)',\r\n        SubscribersCount: 123,\r\n        Items: [\r\n          // { Id: 0, ChatId: 0, SenderId: 0, Text: 'Hi! Who are you? ', Attachment: null , Time: 1603202898482, IsRead: true },\r\n          // { Id: 1, ChatId: 0, SenderId: 1, Text: 'It`s me, nigga, ayo', Attachment: { Id: 1, Type: 2, Url: 'https://c4.wallpaperflare.com/wallpaper/500/442/354/outrun-vaporwave-hd-wallpaper-preview.jpg' }, Time: 1603202898487, IsRead: true },\r\n          // { Id: 0, ChatId: 0, SenderId: 1, Text: '', Attachment: { Id: 1, Type: 0, GeoMark: { X: 100, Y: 100, Z: 100} } , Time: 1603202898482, IsRead: true },\r\n          // { Id: 0, ChatId: 0, SenderId: 0, Text: '', Attachment: { Id: 1, Type: 0, GeoMark: { X: 100, Y: 100, Z: 100} } , Time: 1603202898482, IsRead: true },\r\n          // { Id: 1, ChatId: 0, SenderId: 0, Text: '', Attachment: { Id: 1, Type: 2, Url: 'https://c4.wallpaperflare.com/wallpaper/500/442/354/outrun-vaporwave-hd-wallpaper-preview.jpg' }, Time: 1603202898487, IsRead: true },\r\n          // { Id: 1, ChatId: 0, SenderId: 1, Text: '', Attachment: { Id: 1, Type: 2, Url: 'https://c4.wallpaperflare.com/wallpaper/500/442/354/outrun-vaporwave-hd-wallpaper-preview.jpg' }, Time: 1603202898487, IsRead: true },\r\n          // { Id: 2, ChatId: 0, SenderId: 2, Text: 'Mmm, ok.Mmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, ok', Time: 1603308898487, IsRead: false },\r\n          // { Id: 2, ChatId: 0, SenderId: 2, Text: 'Mmm, ok.Mmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, ok', Time: 1603308898487, IsRead: false },\r\n          // { Id: 2, ChatId: 0, SenderId: 2, Text: 'Mmm, ok.Mmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, ok', Time: 1603308898487, IsRead: false },\r\n          // { Id: 2, ChatId: 0, SenderId: 2, Text: 'Mmm, ok.Mmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, ok', Time: 1603308898487, IsRead: false },\r\n          // { Id: 2, ChatId: 0, SenderId: 2, Text: 'Mmm, ok.Mmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, ok', Time: 1603308898487, IsRead: false },\r\n        ],\r\n        IsLoading: false,\r\n      },\r\n      CanalProfile: {\r\n        Name: '    ',\r\n        IsOnline: true,\r\n        AdminLvl: 2,\r\n        Abilities: {\r\n          changeProfile: true,\r\n          createPosts: false,\r\n          deletePosts: false,\r\n          appointmentAdmins: false\r\n        }\r\n      },\r\n      viewedProfile: {\r\n        Id: 1,\r\n        Username: 'username',\r\n        DisplayedName: '    ',\r\n        Number: 939394,\r\n        IsNumberHided: false,\r\n        IsMuted: false,\r\n        IsBlocked: false,\r\n        LastVisitTime: 1603959071000,\r\n        IsOnline: false,\r\n        IsInContacts: false,\r\n\r\n        isLoading: false\r\n      }\r\n    }\r\n\r\n  },\r\n  mutations: {\r\n    setMessengerCanalProfileAbility: function (state, { key, value }) {\r\n      const currentChat = state.messengerData.CurrentChat;\r\n      const chat = state.messengerData.Chats.find(c => c.Id === currentChat.Id);\r\n\r\n      const admin = chat.Admins.find(a => a.Id === state.messengerData.CanalProfile.Id);\r\n      if (admin) {\r\n        if (value) admin.Permissions.push(key);\r\n        else {\r\n          const idx = admin.Permissions.indexOf(key);\r\n          if (idx) admin.Permissions.splice(idx, 1);\r\n        }\r\n      }\r\n\r\n      currentChat.Admins = chat.Admins;\r\n      state.messengerData.CanalProfile.Permissions = admin.Permissions;\r\n\r\n      window.mp.triggerServer('phone::msg::manage::setAccountPermission', chat.Id, admin.Id, key, value);\r\n\r\n    },\r\n\r\n    setMessengerCurrentChatIconColors: function (state, value) {\r\n      state.messengerData.CurrentChat.IconColors = value\r\n    },\r\n\r\n    msg_setAccountSettings: function (state, accountSettings) {\r\n      state.messengerData.CurrentAccount = accountSettings;\r\n    },\r\n\r\n    //#region Msg Contacts\r\n    msg_setSubscribersForSearch: function (state, subscribers) {\r\n      subscribers.forEach(subscriber => {\r\n        if (subscriber.LastVisitTime)\r\n          subscribers.LastVisitTime *= 1000;\r\n      });\r\n\r\n      state.messengerData.SearchSubscribers = subscribers;\r\n    },\r\n\r\n    msg_loadContacts: function (state, contacts) {\r\n      contacts.forEach(contact => {\r\n        if (contact.Time)\r\n          contact.Time *= 1000;\r\n\r\n        const oldContactIndex = state.messengerData.Contacts.findIndex(c => c.Id === contact.Id);\r\n        if (oldContactIndex === -1) {\r\n          state.messengerData.Contacts.push(contact);\r\n        }\r\n        else {\r\n          state.messengerData.Contacts[oldContactIndex] = contact;\r\n        }\r\n\r\n        const privateChat = state.messengerData.Chats.find(c => c.AccountId === contact.AccountId);\r\n        if (privateChat) {\r\n          privateChat.Name = contact.Name;\r\n        }\r\n      });\r\n    },\r\n\r\n    msg_removeStoreContact: function (state, contactId) {\r\n      const contactIndex = state.messengerData.Contacts.findIndex(c => c.Id === contactId);\r\n      if (contactIndex !== -1) {\r\n        state.messengerData.Contacts.splice(contactIndex, 1);\r\n      }\r\n    },\r\n\r\n    msg_setContactIsOnline: function (state, { contactId, isOnline}) {\r\n      const contactIndex = state.messengerData.Contacts.findIndex(c => c.Id === contactId);\r\n      if (contactIndex !== -1) {\r\n        state.messengerData.Contacts[contactIndex].IsOnline = isOnline\r\n      }\r\n    },\r\n    //#endregion Msg Contacts\r\n\r\n    //#region Msg Chats\r\n    msg_loadChats: function (state, chats) {\r\n      chats.forEach(chat => {\r\n        const chatIndex = state.messengerData.Chats.findIndex(c => c.Id === chat.Id);\r\n\r\n        chat.ActionTime = chat.LastMessage?.Time ?? chat.CreatedTime;\r\n        chat.ActionTime *= 1000;\r\n\r\n        if (chatIndex === -1) {\r\n          state.messengerData.Chats.push(chat);\r\n        }\r\n        else {\r\n          state.messengerData.Chats.splice(chatIndex, 1);\r\n          state.messengerData.Chats.push(chat);\r\n        }\r\n      });\r\n    },\r\n\r\n    msg_removeChat: function (state, chatId) {\r\n      const chatIdx = state.messengerData.Chats.findIndex(c => c.Id === chatId);\r\n      if (chatIdx !== -1) {\r\n        state.messengerData.Chats.splice(chatIdx, 1);\r\n      }\r\n    },\r\n\r\n    msg_cacheMessage: function (state, message) {\r\n      const cachedMessageIndex = state.messengerData._cachedMessages.findIndex(m => m.Id === message.Id);\r\n      if (cachedMessageIndex === -1) {\r\n        state.messengerData._cachedMessages.push(message);\r\n      }\r\n      else {\r\n        state.messengerData._cachedMessages[cachedMessageIndex] = message;\r\n      }\r\n    },\r\n\r\n    msg_uncacheMessage: function (state, messageId) {\r\n      const cachedMessageIndex = state.messengerData._cachedMessages.findIndex(m => m.Id === messageId);\r\n      if (cachedMessageIndex !== -1) {\r\n        state.messengerData._cachedMessages.splice(cachedMessageIndex, 1);\r\n      }\r\n    },\r\n\r\n    msg_markChatMessagesAsRead: function (state, chatId) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === chatId);\r\n      if (chat) {\r\n        chat.NonReadMessagesCount = 0;\r\n      }\r\n    },\r\n\r\n    msg_setOwnMessagesReadInChat: function (state, chatId) {\r\n      if (state.messengerData.CurrentChat.Id === chatId) {\r\n        state.messengerData.CurrentChat.Items.forEach(m => {\r\n          if (m.SenderId === state.messengerData.CurrentAccount.Id) {\r\n            m.IsRead = true;\r\n          }\r\n        });\r\n      }\r\n\r\n      state.messengerData._cachedMessages.forEach(m => {\r\n        if (m.SenderId === state.messengerData.CurrentAccount.Id) {\r\n          m.IsRead = true;\r\n        }\r\n      });\r\n    },\r\n\r\n    msg_setLastMessage: function (state, message) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === message.ChatId);\r\n      if (chat) {\r\n        chat.LastMessage = message;\r\n        chat.ActionTime = message.Time;\r\n      }\r\n    },\r\n\r\n    msg_setCurrentChatIsLoading: function (state, toggle) {\r\n      state.messengerData.CurrentChat.IsLoading = toggle;\r\n    },\r\n\r\n    msg_setCurrentChatMessages: function (state, messages) {\r\n      state.messengerData.CurrentChat.Items = messages;\r\n      state.messengerData.CurrentChat.IsLoading = false;\r\n    },\r\n\r\n    msg_setCurrentChat: function (state, { Id, Name, IsOnline, Type, SubscribersCount,\r\n      AccountId, IconColors, Permissions, Description, AdminLvl, InviteCode, Admins, BlockItems\r\n    }) {\r\n      state.messengerData.CurrentChat = {\r\n        Id, Name, IsOnline, Type, AdminLvl, Description,\r\n        SubscribersCount, InviteCode, Admins, BlockItems\r\n      }\r\n\r\n      // Channel and group chats fields\r\n      if (Permissions) {\r\n        state.messengerData.CurrentChat.CanChangingGroupProfile = Permissions.includes(1);\r\n        state.messengerData.CurrentChat.CanDeletingMessages = Permissions.includes(2);\r\n        state.messengerData.CurrentChat.CanBlockingAccounts = Permissions.includes(3);\r\n        state.messengerData.CurrentChat.CanPurposingAdmins = Permissions.includes(4);\r\n        state.messengerData.CurrentChat.CanCreatingPosts = Permissions.includes(5);\r\n      }\r\n\r\n      if (IconColors) {\r\n        state.messengerData.CurrentChat.IconColors = IconColors;\r\n      }\r\n\r\n      // Private chats field\r\n      state.messengerData.CurrentChat.AccountId = AccountId;\r\n    },\r\n\r\n    msg_loadAccounts: function (state, accounts) {\r\n      accounts.forEach(account => {\r\n        const contact = state.messengerData.Contacts.find(c => c.AccountId === account.Id);\r\n        if (contact) {\r\n          account.DisplayedName = contact.Name;\r\n        }\r\n\r\n        const accountIndex = state.messengerData._cachedAccounts.findIndex(a => a.Id == account.Id);\r\n        if (accountIndex === -1) {\r\n          state.messengerData._cachedAccounts.push(account);\r\n        }\r\n        else {\r\n          state.messengerData._cachedAccounts[accountIndex] = account;\r\n        }\r\n      });\r\n    },\r\n\r\n    msg_setChatMuted: function (state, { ChatId, IsMuted }) {\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        state.messengerData.CurrentChat.IsMuted = IsMuted;\r\n      }\r\n\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      if (chat) {\r\n        chat.IsMuted = IsMuted;\r\n      }\r\n    },\r\n\r\n    msg_renameChat: function (state, { ChatId, Name }) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      if (chat) {\r\n        chat.Name = Name;\r\n      }\r\n\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        state.messengerData.CurrentChat.Name = Name;\r\n      }\r\n    },\r\n\r\n    msg_increaseSubscribersCount: function (state, chatId) {\r\n      if (state.messengerData.CurrentChat.Id === chatId) {\r\n        state.messengerData.CurrentChat.SubscribersCount++;\r\n      }\r\n\r\n      const chat = state.messengerData.Chats.find(c => c.Id === chatId);\r\n      if (chat) {\r\n        if (!chat.SubscribersCount) {\r\n          chat.SubscribersCount = 0;\r\n        }\r\n\r\n        chat.SubscribersCount++;\r\n      }\r\n    },\r\n\r\n    msg_decreaseSubscribersCount: function (state, chatId) {\r\n      if (state.messengerData.CurrentChat.Id === chatId) {\r\n        state.messengerData.CurrentChat.SubscribersCount--;\r\n      }\r\n\r\n      const chat = state.messengerData.Chats.find(c => c.Id === chatId);\r\n      if (chat) {\r\n        if (!chat.SubscribersCount) {\r\n          chat.SubscribersCount = 0;\r\n        }\r\n\r\n        chat.SubscribersCount--;\r\n      }\r\n    },\r\n\r\n    msg_removeFromBlocklist: function (state, { ChatId, AccountId }) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      if (!chat)\r\n        return;\r\n\r\n      const blockIdx = chat.BlockItems.findIndex(b => b.AccountId === AccountId);\r\n      if (blockIdx === -1)\r\n        return;\r\n\r\n      chat.BlockItems.splice(blockIdx, 1);\r\n\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        state.messengerData.CurrentChat.BlockItems = chat.BlockItems;\r\n      }\r\n    },\r\n\r\n    msg_addBlocklistItems: function (state, { ChatId, BlockItems }) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      if (chat) {\r\n        if (!chat.BlockItems)\r\n          chat.BlockItems = [];\r\n\r\n        BlockItems.forEach(i => {\r\n          if (!chat.BlockItems.find(bi => bi.Id === i.Id)) {\r\n            chat.BlockItems.push(i);\r\n          }\r\n        });\r\n      }\r\n\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        state.messengerData.CurrentChat.BlockItems = chat.BlockItems;\r\n      }\r\n    },\r\n\r\n    msg_setChatIsOnline: function (state, { ChatId, IsOnline }) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      if (chat) {\r\n        chat.IsOnline = IsOnline;\r\n      }\r\n\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        state.messengerData.CurrentChat.IsOnline = chat.IsOnline;\r\n      }\r\n    },\r\n    //#endregion Msg Chats\r\n\r\n    msg_setViewedProfileInfo: function (state, info) {\r\n      info.IsInContacts = false;\r\n\r\n      const contact = state.messengerData.Contacts.find(c => c.AccountId === info.Id);\r\n      if (contact) {\r\n        info.DisplayedName = contact.Name;\r\n        info.IsInContacts = true;\r\n      }\r\n\r\n      info.isLoading = false;\r\n      info.LastVisitTime*=1000;\r\n      state.messengerData.viewedProfile = info;\r\n    },\r\n\r\n    msg_setAccountDisplayedName: function (state, { newDisplayedName }) {\r\n      state.messengerData.CurrentAccount.DisplayedName = newDisplayedName;\r\n    },\r\n\r\n    msg_setAccountIsNumberHided: function (state, isNumberHided) {\r\n      state.messengerData.CurrentAccount.IsNumberHided = isNumberHided;\r\n    },\r\n\r\n  },\r\n\r\n  actions: {\r\n\r\n    checkChatIsLoading: function ({ state, dispatch }) {\r\n      if (state.messengerData.CurrentChat.IsLoading) {\r\n        dispatch('smartphone/setTabOrBack', { key: 'MessengerTab', section: 'GeneralSection', subsection: 'GeneralSubsection', data: null }, { root: true });\r\n        state.messengerData.CurrentChat.IsLoading = false;\r\n      }\r\n      else if (state.messengerData.viewedProfile.IsLoading) {\r\n        dispatch('smartphone/setTabOrBack', { key: 'MessengerTab', section: 'GeneralSection', subsection: 'GeneralSubsection', data: null }, { root: true });\r\n        state.messengerData.viewedProfile.IsLoading = false;\r\n      }\r\n    },\r\n\r\n    msg_dropCurrentChat: function ({ state }) {\r\n      state.messengerData.CurrentChat.Id = -1;\r\n    },\r\n\r\n    msg_setAdminsForCurrentChat: function ({ state }, admins) {\r\n      const chatId = state.messengerData.CurrentChat.Id;\r\n      const chat = state.messengerData.Chats.find(c => c.Id === chatId);\r\n      if (!chat) {\r\n        return;\r\n      }\r\n\r\n      state.messengerData.CurrentChat.Admins = admins;\r\n      chat.Admins = admins;\r\n    },\r\n\r\n    msg_addAdminForChat: function ({ state }, { ChatId, AccountId }) {\r\n      const subscriber = state.messengerData.SearchSubscribers.find(s => s.Id === AccountId);\r\n      if (!subscriber) return;\r\n\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      if (!chat) return;\r\n\r\n      subscriber.AdminLvl = 1;\r\n      subscriber.Permissions = [];\r\n\r\n      chat.Admins.push(subscriber);\r\n\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        state.messengerData.CurrentChat.Admins.push(subscriber);\r\n      }\r\n    },\r\n\r\n    msg_deleteAdminForChat: function ({ state }, { ChatId, AdminId }) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      if (!chat) return;\r\n\r\n      const adminIdx = chat.Admins.findIndex(a => a.Id === AdminId);\r\n      if (adminIdx !== -1) {\r\n        chat.Admins.splice(adminIdx, 1);\r\n      }\r\n\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        state.messengerData.CurrentChat.Admins = chat.Admins;\r\n      }\r\n    },\r\n\r\n    msg_setMyAdminPermissionsForChat: function ({ state }, { ChatId, AdminLvl, Permissions }) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      if (!chat) return;\r\n\r\n      chat.Permissions = Permissions;\r\n      chat.AdminLvl = AdminLvl;\r\n    },\r\n\r\n    msg_openChat: function ({ commit, state }, chatId) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === chatId);\r\n\r\n      const subsectionsByChatType = {\r\n        0: 'PrivateSubsection',\r\n        1: 'GroupSubsection',\r\n        2: 'CanalSubsection'\r\n      }\r\n\r\n      commit('msg_setCurrentChat', chat);\r\n\r\n      // IsAlreadyLoaded -        \r\n      if (chat.IsAlreadyLoaded) {\r\n        const messages = state.messengerData._cachedMessages.filter(m => m.ChatId === chatId);\r\n        commit('msg_setCurrentChatMessages', messages);\r\n      }\r\n      else {\r\n        window.mp.triggerServer('phone::msg::requestChat', chatId);\r\n        commit('msg_setCurrentChatIsLoading', true);\r\n      }\r\n\r\n      commit('smartphone/setCurrentTab', {\r\n        key: 'MessengerTab',\r\n        section: 'ChatSection',\r\n        subsection: subsectionsByChatType[chat.Type],\r\n        data: null\r\n      }, { root: true });\r\n\r\n      if (chat.NonReadMessagesCount > 0) {\r\n        window.mp.triggerServer('phone::msg::markAsRead', chatId);\r\n      }\r\n    },\r\n\r\n    msg_openPrivateChat: function ({ dispatch, commit, state }, accountId) {\r\n      const privateChat = state.messengerData.Chats.find(c => c.AccountId === accountId);\r\n      if (privateChat) {\r\n        dispatch('msg_openChat', privateChat.Id);\r\n      }\r\n      else {\r\n        commit('msg_setCurrentChatIsLoading', true);\r\n        commit('msg_setCurrentChat', {\r\n          Id: -1,\r\n          Name: 'Private Chat',\r\n          IsOnline: false,\r\n          Type: 0,\r\n          AccountId: accountId\r\n        });\r\n\r\n        window.mp.triggerServer('phone::msg::createPrivateChat', accountId);\r\n        commit('smartphone/setCurrentTab', {\r\n          key: 'MessengerTab',\r\n          section: 'ChatSection',\r\n          subsection: 'PrivateSubsection',\r\n          data: null\r\n        }, { root: true });\r\n      }\r\n    },\r\n\r\n    msg_loadInchatInfo: function ({ commit, state }, { ChatId, SubscribersCount,\r\n      Messages, Permissions, AdminLvl, InviteCode\r\n    }) {\r\n      Messages.forEach(message => {\r\n        message.Time *= 1000;\r\n        message.ChatId = ChatId;\r\n        commit('msg_cacheMessage', message);\r\n      });\r\n\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      chat.SubscribersCount = SubscribersCount;\r\n      chat.Permissions = Permissions;\r\n      chat.IsAlreadyLoaded = true;\r\n      chat.AdminLvl = AdminLvl;\r\n      chat.InviteCode = InviteCode\r\n\r\n      commit('msg_setCurrentChat', chat);\r\n      commit('msg_setCurrentChatMessages', Messages);\r\n\r\n      //   \r\n      const sendersIds = [...new Set(Messages.map(m => m.SenderId))];\r\n      const nonCachedAccountsIds = sendersIds\r\n        .filter(accountId => !state.messengerData._cachedAccounts.find(a => a.Id === accountId));\r\n\r\n      window.mp.triggerServer('phone::msg::requestAccountsNames', JSON.stringify(nonCachedAccountsIds));\r\n    },\r\n\r\n    msg_openAccount: function ({ commit, state }, accountId) {\r\n      const contact = state.messengerData.Contacts.find(c => c.AccountId === accountId);\r\n      if (contact) {\r\n        console.log(`${accountId}`);\r\n      }\r\n\r\n      state.messengerData.viewedProfile.isLoading = true;\r\n      window.mp.triggerServer('phone::msg::requestAccount', accountId);\r\n\r\n      commit('smartphone/setCurrentTab', {\r\n        key: 'MessengerTab',\r\n        section: 'ViewedProfileSection',\r\n        data: null\r\n      }, { root: true });\r\n    },\r\n\r\n    msg_setAccountAndChatMuted: function ({ commit, state }, { ChatId, AccountId, IsMuted }) {\r\n      commit('msg_setChatMuted', { ChatId, IsMuted });\r\n\r\n      if (state.messengerData.viewedProfile.Id === AccountId) {\r\n        state.messengerData.viewedProfile.IsMuted = IsMuted;\r\n      }\r\n    },\r\n\r\n    msg_setAccountBlocked: function ({ state }, { AccountId, IsBlocked }) {\r\n      if (state.messengerData.viewedProfile.Id === AccountId) {\r\n        state.messengerData.viewedProfile.IsBlocked = IsBlocked;\r\n      }\r\n    },\r\n\r\n    msg_removeContact: function ({ commit, state }, { ContactId, AccountDisplayedName }) {\r\n      const contact = state.messengerData.Contacts.find(c => c.Id === ContactId);\r\n      if (contact) {\r\n        const privateChat = state.messengerData.Chats.find(c => c.AccountId == contact.AccountId);\r\n        if (privateChat) {\r\n          commit('msg_renameChat', { ChatId: privateChat.Id, Name: AccountDisplayedName });\r\n        }\r\n\r\n        if (state.messengerData.viewedProfile.Id === contact.AccountId) {\r\n          state.messengerData.viewedProfile.DisplayedName = AccountDisplayedName;\r\n          state.messengerData.viewedProfile.IsInContacts = false;\r\n        }\r\n      }\r\n\r\n      commit('msg_removeStoreContact', ContactId);\r\n    },\r\n\r\n    msg_addContact: function ({ commit, state }, contact) {\r\n      if (state.messengerData.viewedProfile.Id === contact.AccountId) {\r\n        state.messengerData.viewedProfile.DisplayedName = contact.Name;\r\n        state.messengerData.viewedProfile.IsInContacts = true;\r\n      }\r\n\r\n      commit('msg_loadContacts', [contact]);\r\n    },\r\n\r\n    msg_loadChat: function ({ commit, state }, chat) {\r\n      if (!chat.SubscribersCount) {\r\n        chat.SubscribersCount = 0;\r\n      }\r\n\r\n      commit('msg_loadChats', [chat]);\r\n\r\n      if (state.messengerData.CurrentChat.Id === -1 || state.messengerData.CurrentChat.Id === chat.Id) {\r\n        window.mp.triggerServer('phone::msg::requestChat', chat.Id);\r\n      }\r\n    },\r\n\r\n    msg_createChat: function ({ commit }, { ChatType, Name, Description, IconColors, UsersToInvite }) {\r\n      commit('msg_setCurrentChat', {\r\n        Id: -1,\r\n        Name: Name,\r\n        IsOnline: false,\r\n        Type: ChatType,\r\n        IconColors: IconColors,\r\n        SubscribersCount: 0\r\n      });\r\n\r\n      const subsectionsByChatType = {\r\n        0: 'PrivateSubsection',\r\n        1: 'GroupSubsection',\r\n        2: 'CanalSubsection'\r\n      }\r\n      commit('smartphone/setCurrentTab', {\r\n        key: 'MessengerTab',\r\n        section: 'ChatSection',\r\n        subsection: subsectionsByChatType[ChatType],\r\n        data: null\r\n      }, { root: true });\r\n\r\n      commit('msg_setCurrentChatIsLoading', true);\r\n      if (ChatType === 1) {\r\n        window.mp.triggerServer('phone::msg::createGroupChat', Name, Description, IconColors, JSON.stringify(UsersToInvite));\r\n      }\r\n      else if (ChatType === 2) {\r\n        window.mp.triggerServer('phone::msg::createChannel', Name, Description, IconColors);\r\n      }\r\n    },\r\n\r\n    msg_sendMessage({ commit, state, dispatch }, { ChatId, Message }) {\r\n      Message.ChatId = ChatId;\r\n      Message.Time *= 1000;\r\n      commit('msg_cacheMessage', Message);\r\n      commit('msg_setLastMessage', Message);\r\n\r\n      if (!state.messengerData._cachedAccounts.find(a => a.Id === Message.SenderId)) {\r\n        window.mp.triggerServer('phone::msg::requestAccountsNames', `[${Message.SenderId}]`);\r\n      }\r\n\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        state.messengerData.CurrentChat.Items.push(Message);\r\n\r\n        if (Message.SenderId !== state.messengerData.CurrentAccount.Id) {\r\n          window.mp.triggerServer('phone::msg::markAsRead', ChatId);\r\n        }\r\n      }\r\n      else if (Message.SenderId !== state.messengerData.CurrentAccount.Id) {\r\n        const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n        if (chat) {\r\n          chat.NonReadMessagesCount++;\r\n          if (!chat.IsMuted) {\r\n            dispatch('smartphone/sounds_playNotification', { root: true });\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    msg_deleteMessage({ commit, state }, MessageId) {\r\n      commit('msg_uncacheMessage', MessageId);\r\n\r\n      if (state.messengerData.CurrentChat.Items) {\r\n        const msgIdx = state.messengerData.CurrentChat.Items.findIndex(m => m.Id === MessageId);\r\n        if (msgIdx !== -1) {\r\n          state.messengerData.CurrentChat.Items.splice(msgIdx, 1);\r\n        }\r\n      }\r\n    },\r\n\r\n    msg_editMessage({ commit, state }, { ChatId, Message }) {\r\n      Message.ChatId = ChatId;\r\n      Message.Time *= 1000;\r\n      commit('msg_cacheMessage', Message);\r\n\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        const msgIdx = state.messengerData.CurrentChat.Items.findIndex(m => m.Id === Message.Id);\r\n        if (msgIdx !== -1) {\r\n          state.messengerData.CurrentChat.Items.splice(msgIdx, 1);\r\n          state.messengerData.CurrentChat.Items.push(Message);\r\n        }\r\n      }\r\n    },\r\n\r\n    msg_deleteChat({ state, commit }, chatId) {\r\n      commit('msg_removeChat', chatId);\r\n\r\n      if (state.messengerData.CurrentChat.Id === chatId) {\r\n        commit('smartphone/setCurrentTab', {\r\n          key: 'MessengerTab',\r\n          section: 'GeneralSection',\r\n          subsection: 'GeneralSubsection',\r\n          data: null\r\n        }, { root: true });\r\n      }\r\n    },\r\n\r\n    msg_setInChatBlocked({ state, dispatch }, { ChatId, IsBlocked }) {\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        dispatch('smartphone/msg_goToChats', true, { root: true });\r\n      }\r\n\r\n      if (IsBlocked) {\r\n        const chatIdx = state.messengerData.Chats.findIndex(c => c.Id === ChatId);\r\n        if (chatIdx !== -1) {\r\n          state.messengerData.Chats.splice(chatIdx, 1);\r\n        }\r\n      }\r\n    },\r\n  }\r\n}\r\n"]}]}