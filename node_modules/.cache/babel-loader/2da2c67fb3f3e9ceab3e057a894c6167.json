{"remainingRequest":"D:\\downloads\\UNIQ\\Gui\\node_modules\\babel-loader\\lib\\index.js!D:\\downloads\\UNIQ\\Gui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\downloads\\UNIQ\\Gui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\downloads\\UNIQ\\Gui\\src\\views\\NewDonateShop\\Roulette\\Game.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\downloads\\UNIQ\\Gui\\src\\views\\NewDonateShop\\Roulette\\Game.vue","mtime":1625151238078},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685190017390},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\babel-loader\\lib\\index.js","mtime":1685190019507},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685190017390},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\vue-loader\\lib\\index.js","mtime":1685190022137}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkQ6L2Rvd25sb2Fkcy9VTklRL0d1aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCBTbG90IGZyb20gJy4vU2xvdCc7CmltcG9ydCB7IHJvdWxldHRlSXRlbXNCeUlkIH0gZnJvbSAnLi4vLi4vLi4vY29uZmlncy9uZXdEb25hdGVTaG9wJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICB0eXBlOiBPYmplY3QKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB3aWR0aDogMCwKICAgICAgaGVpZ2h0OiAwLAogICAgICBjYW52YXM6IG51bGwsCiAgICAgIGN0eDogbnVsbCwKICAgICAgY291bnRFbGVtZW50czogNSwKICAgICAgc3BlZWQ6IDAsCiAgICAgIGZyYW1lUmF0ZTogMzYsCiAgICAgIG1heFNwZWVkOiAxNTAsCiAgICAgIGR1cmF0aW9uOiAxNTAwLAogICAgICB0aW1lVG9TdG9wOiAwLAogICAgICBzaXplSXRlbTogMCwKICAgICAgc3RhdGU6IFtdLAogICAgICBpdGVtTGlzdDogW10sCiAgICAgIGJnSW1nOiBudWxsLAogICAgICBsYXN0RnJhbWU6IDAsCiAgICAgIGhlYWRSZXN1bHQ6IG51bGwsCiAgICAgIHdpblJlc3VsdDogbnVsbCwKICAgICAgY2FuY2VsOiBmYWxzZSwKICAgICAgYW50aUZsb29kOiAwLAogICAgICBzdG9wRnJvbTogMCwKICAgICAgc291bmQ6IHRydWUsCiAgICAgIHdpbkJ1aWxkZWQ6IGZhbHNlLAogICAgICBmbG9vZFByb3RlY3Rpb246IDAKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSgnbmV3RG9uYXRlU2hvcC9yb3VsZXR0ZScsIFsnaXNSdW4nLCAnaXNTdG9wJywgJ2lzV2luJywgJ3Jlc3VsdCddKSksIG1hcFN0YXRlKCduZXdEb25hdGVTaG9wJywgWydjb2lucycsICdnZW5kZXInXSkpLCBtYXBTdGF0ZSgnaHVkJywgWydtb25leSddKSksIG1hcEdldHRlcnMoJ2xvY2FsaXphdGlvbicsIFsnbG9jJ10pKSwge30sIHsKICAgIGN1cnJlbmN5SW1nOiBmdW5jdGlvbiBjdXJyZW5jeUltZygpIHsKICAgICAgcmV0dXJuIHRoaXMudHlwZS5mb3JDb2lucyA/ICcvaW1nL25ld0RvbmF0ZVNob3AvaGVhZGVyX2NvaW4ucG5nJyA6ICcvaW1nL25ld0RvbmF0ZVNob3AvaGVhZGVyX21vbmV5LnN2Zyc7CiAgICB9CiAgfSksCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKCduZXdEb25hdGVTaG9wL3JvdWxldHRlJywgWydyZXF1ZXN0U3RhcnQnLCAncmVxdWVzdFN0b3AnLCAncmVxdWVzdEZhc3RTdG9wJywgJ3JlcXVlc3RXaW4nXSkpLCB7fSwgewogICAgc3RhcnQ6IGZ1bmN0aW9uIHN0YXJ0KCkgewogICAgICAvL2lmKHRoaXMuZmxvb2RQcm90ZWN0aW9uID4gRGF0ZS5ub3coKSkgcmV0dXJuOwogICAgICBpZiAodGhpcy5pc1J1bikgewogICAgICAgIGlmICh0aGlzLnJlc3VsdCAhPT0gLTEgJiYgIXRoaXMud2luQnVpbGRlZCkgewogICAgICAgICAgdGhpcy5zcGVlZCA9IDA7CiAgICAgICAgICB0aGlzLnN0YXRlID0gW107CiAgICAgICAgICB0aGlzLnRpbWVUb1N0b3AgPSBEYXRlLm5vdygpOwogICAgICAgICAgdGhpcy5idWlsV2luQ29tYmluYXRpb24odGhpcy5yZXN1bHQpOwogICAgICAgICAgdGhpcy5yZXF1ZXN0RmFzdFN0b3AodGhpcy50eXBlLmZvckNvaW5zKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMudHlwZS5mb3JDb2lucyAmJiB0aGlzLmNvaW5zIDwgdGhpcy50eXBlLnByaWNlKSB7CiAgICAgICAgICB3aW5kb3cuc2V0RGF0YSgnbm90aWZ5TGlzdC9ub3RpZnknLCB7CiAgICAgICAgICAgIHR5cGU6IDEsCiAgICAgICAgICAgIHBvc2l0aW9uOiAyLAogICAgICAgICAgICBtZXNzYWdlOiAnZHNob3A6aXRlbTpidXk6d3Jvbmc6Y29pbnMnLAogICAgICAgICAgICB0aW1lOiAzMDAwCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICghdGhpcy50eXBlLmZvckNvaW5zICYmIHRoaXMubW9uZXkgPCB0aGlzLnR5cGUucHJpY2UpIHsKICAgICAgICAgIHdpbmRvdy5zZXREYXRhKCdub3RpZnlMaXN0L25vdGlmeScsIHsKICAgICAgICAgICAgdHlwZTogMSwKICAgICAgICAgICAgcG9zaXRpb246IDIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICdkc2hvcDppdGVtOmJ1eTp3cm9uZzptb25leScsCiAgICAgICAgICAgIHRpbWU6IDMwMDAKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gLy90aGlzLmZsb29kUHJvdGVjdGlvbiA9IERhdGUubm93KCkgKyA1MDA7CgoKICAgICAgICB0aGlzLndpbkJ1aWxkZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLnJlcXVlc3RTdGFydCh0aGlzLnR5cGUuaWQpOwogICAgICAgIHRoaXMudGltZVRvU3RvcCA9IERhdGUubm93KCkgKyB0aGlzLmR1cmF0aW9uOwogICAgICB9CiAgICB9LAogICAgYWRkUmFuZG9tRWxlbWVudDogZnVuY3Rpb24gYWRkUmFuZG9tRWxlbWVudCgpIHsKICAgICAgdmFyIGxhc3QgPSB0aGlzLnN0YXRlW3RoaXMuc3RhdGUubGVuZ3RoIC0gMV07CiAgICAgIHZhciBjdXJyZW50T2Zmc2V0ID0gbGFzdCA/IGxhc3QucG9zWCArIGxhc3Quc2l6ZSA6IDA7CiAgICAgIHZhciBpdGVtID0gdGhpcy5pdGVtTGlzdFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLml0ZW1MaXN0Lmxlbmd0aCldOwogICAgICB2YXIgc2xvdCA9IG5ldyBTbG90KHRoaXMuY3R4LCBpdGVtLCB0aGlzLmhlaWdodCwgdGhpcy5iZ0ltZywgY3VycmVudE9mZnNldCk7CiAgICAgIHRoaXMuc3RhdGUucHVzaChzbG90KTsKICAgICAgcmV0dXJuIHNsb3Q7CiAgICB9LAogICAgYWRkV2luRWxlbWVudDogZnVuY3Rpb24gYWRkV2luRWxlbWVudChpZCkgewogICAgICB2YXIgbGFzdCA9IHRoaXMuc3RhdGVbdGhpcy5zdGF0ZS5sZW5ndGggLSAxXTsKICAgICAgdmFyIGN1cnJlbnRPZmZzZXQgPSBsYXN0ID8gbGFzdC5wb3NYICsgbGFzdC5zaXplIDogMDsKICAgICAgdmFyIGl0ZW0gPSB0aGlzLml0ZW1MaXN0LmZpbmQoZnVuY3Rpb24gKGkpIHsKICAgICAgICByZXR1cm4gaS5pZCA9PSBpZDsKICAgICAgfSk7CiAgICAgIHZhciBzbG90ID0gbmV3IFNsb3QodGhpcy5jdHgsIGl0ZW0sIHRoaXMuaGVpZ2h0LCB0aGlzLmJnSW1nLCBjdXJyZW50T2Zmc2V0KTsKICAgICAgdGhpcy5zdGF0ZS5wdXNoKHNsb3QpOwogICAgICByZXR1cm4gc2xvdDsKICAgIH0sCiAgICByZW1vdmVFbGVtZW50OiBmdW5jdGlvbiByZW1vdmVFbGVtZW50KCkgewogICAgICB0aGlzLnN0YXRlLnNoaWZ0KCk7IC8vdGhpcy4kc3RvcmUuY29tbWl0KCJzb3VuZHMvcGxheSIsIHsgbmFtZTogYHRpY2tgLCB2b2x1bWU6IDAuMDMgfSkKICAgIH0sCiAgICBpbml0R2FtZTogZnVuY3Rpb24gaW5pdEdhbWUoKSB7CiAgICAgIHRoaXMuc3RhdGUgPSBbXTsKCiAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmNvdW50RWxlbWVudHMgKyAyOyBpbmRleCsrKSB7CiAgICAgICAgdGhpcy5hZGRSYW5kb21FbGVtZW50KCk7CiAgICAgIH0KCiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZVN0YXRlLCB0aGlzLmNhbnZhcyk7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIiwgdGhpcy5rZXlIYW5kbGVyKTsKICAgIH0sCiAgICB1cGRhdGVTdGF0ZTogZnVuY3Rpb24gdXBkYXRlU3RhdGUoKSB7CiAgICAgIGlmICh0aGlzLmNhbmNlbCkgcmV0dXJuOwoKICAgICAgaWYgKHRoaXMubGFzdEZyYW1lIDwgRGF0ZS5ub3coKSkgewogICAgICAgIGlmICh0aGlzLmlzUnVuKSB7CiAgICAgICAgICB0aGlzLmxhc3RGcmFtZSA9IERhdGUubm93KCkgKyB0aGlzLmZyYW1lUmF0ZTsKICAgICAgICAgIGlmICh0aGlzLnRpbWVUb1N0b3AgPCBEYXRlLm5vdygpKSB0aGlzLnJlcXVlc3RTdG9wKCk7CiAgICAgICAgICBpZiAodGhpcy5pc1N0b3ApIHRoaXMuaGFuZGxlU3RvcCgpO2Vsc2UgdGhpcy5oYW5kbGVMb29wKCk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmRyYXdGcmFtZSgpOwogICAgICB9CgogICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVTdGF0ZSwgdGhpcy5jYW52YXMpOwogICAgfSwKICAgIGhhbmRsZUxvb3A6IGZ1bmN0aW9uIGhhbmRsZUxvb3AoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMpIHJldHVybjsKICAgICAgaWYgKHRoaXMubWF4U3BlZWQgPiB0aGlzLnNwZWVkKSB0aGlzLnNwZWVkICs9IDU7CgogICAgICBpZiAodGhpcy5zdGF0ZVswXS5jYW5EZWxldGUoKSkgewogICAgICAgIHRoaXMucmVtb3ZlRWxlbWVudCgpOwogICAgICAgIHRoaXMuYWRkUmFuZG9tRWxlbWVudCgpOwogICAgICB9CgogICAgICB0aGlzLnN0YXRlLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpdGVtLm1vdmVYKF90aGlzLnNwZWVkKTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU3RvcDogZnVuY3Rpb24gaGFuZGxlU3RvcCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAodGhpcy5zcGVlZCA+IHRoaXMubWF4U3BlZWQgKiAuMikgewogICAgICAgIGlmICh0aGlzLnN0YXRlWzBdLmNhbkRlbGV0ZSgpKSB7CiAgICAgICAgICB0aGlzLnJlbW92ZUVsZW1lbnQoKTsKICAgICAgICAgIHRoaXMuYWRkUmFuZG9tRWxlbWVudCgpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5zdGF0ZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICBpdGVtLm1vdmVYKF90aGlzMi5zcGVlZCk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5zcGVlZCAtPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICghdGhpcy53aW5CdWlsZGVkKSB7CiAgICAgICAgICB0aGlzLmJ1aWxXaW5Db21iaW5hdGlvbih0aGlzLnJlc3VsdCk7CiAgICAgICAgICB0aGlzLnN0b3BGcm9tID0gdGhpcy5oZWFkUmVzdWx0LnBvc1g7CiAgICAgICAgfQoKICAgICAgICB2YXIga29mID0gTWF0aC5hYnModGhpcy5oZWFkUmVzdWx0LnBvc1ggLyB0aGlzLnN0b3BGcm9tKTsKICAgICAgICB0aGlzLnNwZWVkID0gTWF0aC5tYXgoTWF0aC5mbG9vcih0aGlzLm1heFNwZWVkICoga29mICogLjIpLCA1KTsKCiAgICAgICAgaWYgKHRoaXMuaGVhZFJlc3VsdC5wb3NYIDwgMSkgewogICAgICAgICAgdmFyIGZpeCA9IHRoaXMuaGVhZFJlc3VsdC5wb3NYOwogICAgICAgICAgdGhpcy5zdGF0ZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIGl0ZW0uZml4UG9zKGZpeCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuc3BlZWQgPSAwOwogICAgICAgICAgdGhpcy5yZXF1ZXN0V2luKHRoaXMudHlwZS5mb3JDb2lucyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc3RhdGUuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICBpdGVtLm1vdmVYKF90aGlzMi5zcGVlZCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnN0YXRlWzBdLmNhbkRlbGV0ZSgpKSB7CiAgICAgICAgICB0aGlzLnJlbW92ZUVsZW1lbnQoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBidWlsV2luQ29tYmluYXRpb246IGZ1bmN0aW9uIGJ1aWxXaW5Db21iaW5hdGlvbih2YWwpIHsKICAgICAgdGhpcy53aW5CdWlsZGVkID0gdHJ1ZTsKCiAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmNvdW50RWxlbWVudHM7IGluZGV4KyspIHsKICAgICAgICBpZiAoaW5kZXggPT0gMCkgewogICAgICAgICAgdGhpcy5oZWFkUmVzdWx0ID0gdGhpcy5hZGRSYW5kb21FbGVtZW50KCk7CiAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PSAyKSB7CiAgICAgICAgICB0aGlzLndpblJlc3VsdCA9IHRoaXMuYWRkV2luRWxlbWVudCh2YWwpOwogICAgICAgIH0gZWxzZSB0aGlzLmFkZFJhbmRvbUVsZW1lbnQoKTsKICAgICAgfQogICAgfSwKICAgIGRyYXdGcmFtZTogZnVuY3Rpb24gZHJhd0ZyYW1lKCkgewogICAgICB0aGlzLmN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAibm9ybWFsIjsKICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTsKICAgICAgdGhpcy5zdGF0ZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbS5kcmF3KCk7CiAgICAgIH0pOwogICAgICBpZiAodGhpcy5pc1dpbiAmJiB0aGlzLndpblJlc3VsdCkgdGhpcy53aW5SZXN1bHQuZHJhd0VmZmVjdCgpOwogICAgICB2YXIgZ3JhZGllbnQgPSB0aGlzLmN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7CiAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCAncmdiYSgwLDAsMCwwKScpOwogICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoLjA1LCAncmdiYSgwLDAsMCwuMSknKTsKICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKC4yLCAncmdiYSgwLDAsMCwxKScpOwogICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoLjgsICdyZ2JhKDAsMCwwLDEpJyk7CiAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCguOTUsICdyZ2JhKDAsMCwwLC4xKScpOwogICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMSwgJ3JnYmEoMCwwLDAsMCknKTsKICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gZ3JhZGllbnQ7CiAgICAgIHRoaXMuY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICJkZXN0aW5hdGlvbi1pbiI7CiAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpOwogICAgICB0aGlzLmN0eC5maWxsUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7CiAgICB9LAogICAgaW5pdEltYWdlczogZnVuY3Rpb24gaW5pdEltYWdlcygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLmJnSW1nID0gbmV3IEltYWdlKHRoaXMuaGVpZ2h0LCB0aGlzLmhlaWdodCk7CiAgICAgIHRoaXMuYmdJbWcuc3JjID0gIi9pbWcvbmV3RG9uYXRlU2hvcC9yb3VsZXR0ZS9pdGVtQmcucG5nIjsKICAgICAgdGhpcy5pdGVtTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbS5pbWcgPSBuZXcgSW1hZ2UoX3RoaXMzLmhlaWdodCwgX3RoaXMzLmhlaWdodCk7CiAgICAgICAgaXRlbS5pbWcuc3JjID0gIi9pbWcvbmV3RG9uYXRlU2hvcC9pdGVtcy8iLmNvbmNhdChpdGVtLmltYWdlLCAiLnBuZyIpOwogICAgICB9KTsKICAgIH0sCiAgICBrZXlIYW5kbGVyOiBmdW5jdGlvbiBrZXlIYW5kbGVyKGUpIHsKICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHsKICAgICAgICB0aGlzLnN0YXJ0KCk7CiAgICAgIH0KICAgIH0KICB9KSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pdGVtTGlzdCA9IFtdOwogICAgdGhpcy4kc3RvcmUuY29tbWl0KCduZXdEb25hdGVTaG9wL3JvdWxldHRlL3Jlc2V0Jyk7CiAgICB2YXIgcGFycmVudCA9IHRoaXMuJHJlZnNbImRycGFyZW50Il07CiAgICB0aGlzLndpZHRoID0gcGFycmVudC5vZmZzZXRXaWR0aDsKICAgIHRoaXMuaGVpZ2h0ID0gcGFycmVudC5vZmZzZXRXaWR0aCAvIHRoaXMuY291bnRFbGVtZW50czsKICAgIHRoaXMuaXRlbUxpc3QgPSByb3VsZXR0ZUl0ZW1zQnlJZCh0aGlzLnR5cGUuaWQsIHRoaXMuZ2VuZGVyKTsKICAgIHRoaXMuaW5pdEltYWdlcygpOwogICAgdGhpcy5jYW52YXMgPSB0aGlzLiRyZWZzWyJkcmNhbnZhcyJdOwogICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwogICAgdGhpcy5mcmFtZVJhdGUgPSBNYXRoLmZsb29yKDEwMDAgLyB0aGlzLmZyYW1lUmF0ZSk7CiAgICBzZXRUaW1lb3V0KHRoaXMuaW5pdEdhbWUsIDUwMCk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigia2V5dXAiLCB0aGlzLmtleUhhbmRsZXIpOwogICAgdGhpcy5jYW5jZWwgPSB0cnVlOwogIH0KfTs="},{"version":3,"sources":["Game.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"newdshop-roull-game\" ref=\"drparent\">\r\n        <div class=\"newdshop-roull-game_subtitle\">{{loc('newdshop:roul:game:sub')}}</div>\r\n        <div class=\"newdshop-roull-game_title\">{{type.name}}</div>\r\n        <div class=\"newdshop-roull-game_top\"></div>\r\n        <div class=\"newdshop-roull-game_top\"><img src=\"/img/newDonateShop/roulette/marker.svg\" alt=\"marker\"></div>\r\n        <canvas :width=\"width\" :height=\"height\" ref=\"drcanvas\"/>\r\n        <div class=\"newdshop-roull-game_bottom\"><img src=\"/img/newDonateShop/roulette/marker.svg\" alt=\"marker\"></div>\r\n        <div class=\"newdshop-roull-game-button\" @click=\"start\">\r\n            <div class=\"newdshop-roull-game-button_container\" v-if=\"this.isRun\">\r\n                <div>{{loc('newdshop:roul:game:btn:stop')}}</div>\r\n            </div>\r\n            <div class=\"newdshop-roull-game-button_container\" v-else>\r\n                <div>{{loc('newdshop:roul:game:btn:start')}}</div>\r\n                <div class=\"newdshop-roull-game-button_decor\"></div>\r\n                <img :src=\"currencyImg\" alt=\"coin\">\r\n                <div>{{type.price.toLocaleString()}}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState, mapGetters, mapActions} from 'vuex'\r\nimport Slot from './Slot'\r\nimport {rouletteItemsById} from '../../../configs/newDonateShop'\r\n\r\nexport default {\r\n    props:{\r\n        type: Object\r\n    },\r\n    data() {\r\n        return {\r\n            width: 0,\r\n            height: 0,\r\n            canvas: null,\r\n            ctx: null,\r\n            countElements: 5,\r\n            speed: 0,\r\n            frameRate: 36,\r\n            maxSpeed: 150,\r\n            duration: 1500,\r\n            timeToStop: 0,\r\n            sizeItem: 0,\r\n            state:[],\r\n            itemList: [],\r\n            bgImg: null,\r\n            lastFrame: 0,\r\n            headResult: null,\r\n            winResult: null,\r\n            cancel: false,\r\n            antiFlood: 0,\r\n            stopFrom: 0,\r\n            sound: true,\r\n            winBuilded: false,\r\n            floodProtection: 0\r\n        }\r\n    },\r\n    computed:{\r\n        ...mapState('newDonateShop/roulette', ['isRun', 'isStop', 'isWin', 'result']),\r\n        ...mapState('newDonateShop', ['coins', 'gender']),\r\n        ...mapState('hud', ['money']),\r\n        ...mapGetters('localization', ['loc']),\r\n        currencyImg(){\r\n            return this.type.forCoins ? '/img/newDonateShop/header_coin.png' : '/img/newDonateShop/header_money.svg'\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapActions('newDonateShop/roulette', ['requestStart','requestStop', 'requestFastStop', 'requestWin']),\r\n        start(){\r\n            //if(this.floodProtection > Date.now()) return;\r\n            if(this.isRun){\r\n                if(this.result !== -1 && !this.winBuilded){\r\n                    this.speed = 0;\r\n                    this.state = [];\r\n                    this.timeToStop = Date.now();\r\n                    this.builWinCombination(this.result);\r\n                    this.requestFastStop(this.type.forCoins);\r\n                }\r\n            }\r\n            else\r\n            {\r\n                if(this.type.forCoins && this.coins < this.type.price){\r\n                    window.setData('notifyList/notify', {type: 1, position:2, message: 'dshop:item:buy:wrong:coins', time: 3000});\r\n                    return;\r\n                }\r\n                if(!this.type.forCoins && this.money < this.type.price){\r\n                    window.setData('notifyList/notify', {type: 1, position:2, message: 'dshop:item:buy:wrong:money', time: 3000});\r\n                    return;\r\n                }\r\n                //this.floodProtection = Date.now() + 500;\r\n                this.winBuilded = false;\r\n                this.requestStart(this.type.id);\r\n                this.timeToStop = Date.now() + this.duration;               \r\n            }              \r\n        },\r\n        addRandomElement(){\r\n            const last = this.state[this.state.length - 1];\r\n            let currentOffset = last ? (last.posX + last.size) : 0;\r\n            \r\n            const item = this.itemList[Math.floor(Math.random()*this.itemList.length)];\r\n            const slot = new Slot(this.ctx, item, this.height, this.bgImg, currentOffset);\r\n            this.state.push(slot);\r\n            return slot;\r\n        },\r\n        addWinElement(id){\r\n            const last = this.state[this.state.length - 1];\r\n            let currentOffset = last ? (last.posX + last.size) : 0;\r\n            const item = this.itemList.find(i=>i.id == id);\r\n            const slot = new Slot(this.ctx, item, this.height, this.bgImg, currentOffset);\r\n            this.state.push(slot);\r\n            return slot;\r\n        },\r\n        removeElement(){\r\n            this.state.shift();\r\n            //this.$store.commit(\"sounds/play\", { name: `tick`, volume: 0.03 })\r\n        },\r\n        initGame(){\r\n            this.state = [];\r\n            for (let index = 0; index < this.countElements + 2; index++) {\r\n                this.addRandomElement();                \r\n            }\r\n            requestAnimationFrame(this.updateState, this.canvas);\r\n            document.addEventListener(\"keyup\", this.keyHandler)\r\n        },\r\n        updateState(){\r\n            if(this.cancel) return;\r\n            if(this.lastFrame < Date.now() ){\r\n                if(this.isRun){\r\n                    this.lastFrame = Date.now() + this.frameRate;\r\n\r\n                    if(this.timeToStop < Date.now())\r\n                        this.requestStop();\r\n\r\n                    if(this.isStop)\r\n                        this.handleStop();\r\n                    else\r\n                        this.handleLoop();                    \r\n                }\r\n                this.drawFrame();\r\n            }\r\n            requestAnimationFrame(this.updateState, this.canvas);\r\n        },\r\n        handleLoop(){\r\n            if(!this) return\r\n            if(this.maxSpeed > this.speed)\r\n                this.speed += 5;\r\n\r\n            if(this.state[0].canDelete()){\r\n                this.removeElement();\r\n                this.addRandomElement();\r\n            }\r\n\r\n            this.state.forEach(item => {\r\n                item.moveX(this.speed);\r\n            });\r\n        },\r\n        handleStop(){\r\n            if(this.speed > this.maxSpeed * .2){\r\n                if(this.state[0].canDelete()){\r\n                    this.removeElement();\r\n                    this.addRandomElement();\r\n                }\r\n\r\n                this.state.forEach(item => {\r\n                    item.moveX(this.speed);\r\n                });\r\n                this.speed -= 1;\r\n            }else{                \r\n                if(!this.winBuilded){                   \r\n                    this.builWinCombination(this.result);\r\n                    this.stopFrom = this.headResult.posX;\r\n                }\r\n                const kof = Math.abs(this.headResult.posX / this.stopFrom);                \r\n                this.speed = Math.max(Math.floor(this.maxSpeed * kof * .2), 5);    \r\n                if(this.headResult.posX < 1) {\r\n                    const fix = this.headResult.posX;\r\n                    this.state.forEach(item => {\r\n                        item.fixPos(fix);\r\n                    });\r\n                    this.speed = 0;\r\n                    this.requestWin(this.type.forCoins);\r\n                }else{\r\n                    this.state.forEach(item => {\r\n                        item.moveX(this.speed);\r\n                    });\r\n                }\r\n                if(this.state[0].canDelete()){\r\n                    this.removeElement();\r\n                }\r\n            }\r\n        },\r\n        builWinCombination(val){\r\n            this.winBuilded = true;\r\n            for (let index = 0; index < this.countElements; index++) {\r\n                if(index == 0){\r\n                    this.headResult = this.addRandomElement();                  \r\n                }else if(index == 2){\r\n                    this.winResult = this.addWinElement(val);\r\n                }else\r\n                    this.addRandomElement();                            \r\n            }\r\n        },\r\n        drawFrame(){\r\n            this.ctx.globalCompositeOperation =\"normal\";\r\n            this.ctx.clearRect(0,0, this.width, this.height);\r\n            this.state.forEach(item => {\r\n                item.draw();\r\n            });\r\n            \r\n            if(this.isWin && this.winResult)\r\n                this.winResult.drawEffect();\r\n\r\n            let gradient = this.ctx.createLinearGradient(0,0, this.width, this.height);\r\n            gradient.addColorStop(0, 'rgba(0,0,0,0)');\r\n            gradient.addColorStop(.05, 'rgba(0,0,0,.1)');\r\n            gradient.addColorStop(.2, 'rgba(0,0,0,1)');\r\n            gradient.addColorStop(.8, 'rgba(0,0,0,1)');\r\n            gradient.addColorStop(.95, 'rgba(0,0,0,.1)');\r\n            gradient.addColorStop(1, 'rgba(0,0,0,0)');\r\n            this.ctx.fillStyle = gradient;\r\n            this.ctx.globalCompositeOperation =\"destination-in\";\r\n            this.ctx.beginPath();\r\n            this.ctx.fillRect(0,0,this.width, this.height);\r\n        },\r\n        initImages(){\r\n            this.bgImg = new Image(this.height, this.height);\r\n            this.bgImg.src = \"/img/newDonateShop/roulette/itemBg.png\";\r\n            this.itemList.forEach(item => {\r\n                item.img = new Image(this.height, this.height);\r\n                item.img.src = `/img/newDonateShop/items/${item.image}.png`;\r\n            });\r\n        },\r\n        keyHandler(e){\r\n            if(e.keyCode === 13){\r\n                this.start();\r\n            }\r\n        }\r\n    },\r\n    mounted(){\r\n        this.itemList = [];\r\n        this.$store.commit('newDonateShop/roulette/reset');\r\n        const parrent = this.$refs[\"drparent\"];\r\n        this.width = parrent.offsetWidth;\r\n        this.height = parrent.offsetWidth / this.countElements;\r\n        this.itemList = rouletteItemsById(this.type.id, this.gender);\r\n        this.initImages();\r\n        this.canvas = this.$refs[\"drcanvas\"];\r\n        this.ctx = this.canvas.getContext(\"2d\");\r\n        this.frameRate = Math.floor(1000/this.frameRate);\r\n        setTimeout(this.initGame, 500);\r\n    },\r\n    beforeDestroy(){\r\n        document.removeEventListener(\"keyup\", this.keyHandler);\r\n        this.cancel = true;\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    .newdshop-roull-game{\r\n        width: 80rem;\r\n        align-self: flex-start;\r\n        margin-top: 1.5rem;\r\n        &_subtitle{\r\n            margin-top: 3rem;\r\n            font-size: .8rem;\r\n            color: rgba(#fff, .5);\r\n            text-align: center;\r\n        }\r\n        &_title{\r\n            font-size: 3.5rem;\r\n            font-weight: 700;\r\n            letter-spacing: .07rem;\r\n            text-align: center;\r\n            margin-bottom: 4rem;\r\n            text-shadow: 0 0 .8rem rgba(#fff, .7);\r\n        }\r\n        &_top{\r\n            text-align: center;\r\n        }\r\n        &_bottom{\r\n            text-align: center;\r\n            transform: rotate(180deg);\r\n        }\r\n        &-button{\r\n            background-color: #4B8A9E;\r\n            width: 10.7rem;\r\n            margin: 3rem auto;\r\n            border-radius: .2rem;\r\n            transform: skew(-10deg);\r\n            &_container{\r\n                height: 3rem;\r\n                width: 10.7rem;\r\n                transform: skew(10deg);\r\n                display: flex;\r\n                justify-content: center;\r\n                align-items: center;\r\n            }\r\n            &_decor{\r\n                background-color: rgba(255, 255, 255, 0.2);\r\n                width: 1px;\r\n                height: 1.5rem;\r\n                margin: 0 .5rem;\r\n            }\r\n            img{\r\n                margin: 0 .2rem;\r\n                \r\n            }\r\n            &:hover{\r\n                transform: scale(1.02) skew(-10deg);\r\n                box-shadow: 0 0 .5rem #4B8A9E;\r\n            }     \r\n        }\r\n        canvas{\r\n            margin-left: .6rem;\r\n        }\r\n    }\r\n</style>"],"sourceRoot":"src/views/NewDonateShop/Roulette"}]}