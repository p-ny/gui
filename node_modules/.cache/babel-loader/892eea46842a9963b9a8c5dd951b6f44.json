{"remainingRequest":"D:\\downloads\\UNIQ\\Gui\\node_modules\\babel-loader\\lib\\index.js!D:\\downloads\\UNIQ\\Gui\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\downloads\\UNIQ\\Gui\\src\\store\\smartphone\\modules\\message-page.js","dependencies":[{"path":"D:\\downloads\\UNIQ\\Gui\\src\\store\\smartphone\\modules\\message-page.js","mtime":1629112495829},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685190017390},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\babel-loader\\lib\\index.js","mtime":1685190019507},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\eslint-loader\\index.js","mtime":1685190018634}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXgiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkQ6L2Rvd25sb2Fkcy9VTklRL0d1aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogewogICAgbWVzc2VuZ2VyRGF0YTogewogICAgICBDdXJyZW50QWNjb3VudDogewogICAgICAgIElkOiAtMSwKICAgICAgICBVc2VybmFtZTogJ21pbHQnLAogICAgICAgIERpc3BsYXllZE5hbWU6ICdtYXR2ZXknLAogICAgICAgIElzTnVtYmVySGlkZWQ6IGZhbHNlCiAgICAgIH0sCiAgICAgIFNlYXJjaFN1YnNjcmliZXJzOiBbLy8geyBJZDogMCwgRGlzcGxheWVkTmFtZTogJ0dheSBNYW4nLCBMYXN0VmlzaXRUaW1lOiAyMDMzMzEyMTIzMzIgfQogICAgICBdLAogICAgICBDaGF0czogWy8vIHsgSWQ6IDgsIE5hbWU6ICdGaXJzdCBjaGF0OCcsIElzT25saW5lOiB0cnVlLCBUeXBlOiAwLCBOb25SZWFkTWVzc2FnZXNDb3VudDogMCwKICAgICAgICAvLyBMYXN0TWVzc2FnZTogeyBJZDogMCwgQ2hhdElkOiAwLCBUZXh0OiAnSGkhIFdobyBhcmUgeW91PycsIFR5cGU6IDAsCiAgICAgICAgLy8gVGltZTogMTYwMzAwNTEzMjAwMCwgSXNSZWFkOiBmYWxzZSwgQWRtaW5zOiBbCiAgICAgICAgLy8gICAgeyBEaXNwbGF5ZWROYW1lOiAnR29uZG9uJywgSWQ6IDIsIEFkbWluTHZsOiAyLCBQZXJtaXNzaW9uOiBbMCwgMiwgMywgNF0gfSAKICAgICAgICAvLyBdIH0gfSwKICAgICAgXSwKICAgICAgQ29udGFjdHM6IFsvLyB7IElkOiAxMiwgTmFtZTogJ+GDoeGDkOGDnOGDouGDlOGDpeGDnOGDmOGDmeGDneGDoeGDmCcsIE51bWJlcjogODgwMDU1NDM1MzUsIFRpbWU6IDExMzA0NDMyMDAwMDAsIElzT25saW5lOiB0cnVlIH0sCiAgICAgIF0sCiAgICAgIF9jYWNoZWRBY2NvdW50czogWy8vIHsgSWQ6IDAsIERpc3BsYXllZE5hbWU6ICfRhNCw0LrQsdC+0LknIH0KICAgICAgXSwKICAgICAgX2NhY2hlZE1lc3NhZ2VzOiBbXSwKICAgICAgQ3VycmVudENoYXQ6IHsKICAgICAgICBJZDogMCwKICAgICAgICBOYW1lOiAnU0pTSkZLV1BDT0VKViBTSkVLUklGSkFORExXUicsCiAgICAgICAgSXNPbmxpbmU6IG51bGwsCiAgICAgICAgVHlwZTogMCwKICAgICAgICBJY29uQ29sb3JzOiAnbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjNDNFOTdCIDAlLCAjMzhGOUQ3IDEwMCUpJywKICAgICAgICBTdWJzY3JpYmVyc0NvdW50OiAxMjMsCiAgICAgICAgSXRlbXM6IFsvLyB7IElkOiAwLCBDaGF0SWQ6IDAsIFNlbmRlcklkOiAwLCBUZXh0OiAnSGkhIFdobyBhcmUgeW91PyDwn5iD8J+YgScsIEF0dGFjaG1lbnQ6IG51bGwgLCBUaW1lOiAxNjAzMjAyODk4NDgyLCBJc1JlYWQ6IHRydWUgfSwKICAgICAgICAgIC8vIHsgSWQ6IDEsIENoYXRJZDogMCwgU2VuZGVySWQ6IDEsIFRleHQ6ICdJdGBzIG1lLCBuaWdnYSwgYXlvJywgQXR0YWNobWVudDogeyBJZDogMSwgVHlwZTogMiwgVXJsOiAnaHR0cHM6Ly9jNC53YWxscGFwZXJmbGFyZS5jb20vd2FsbHBhcGVyLzUwMC80NDIvMzU0L291dHJ1bi12YXBvcndhdmUtaGQtd2FsbHBhcGVyLXByZXZpZXcuanBnJyB9LCBUaW1lOiAxNjAzMjAyODk4NDg3LCBJc1JlYWQ6IHRydWUgfSwKICAgICAgICAgIC8vIHsgSWQ6IDAsIENoYXRJZDogMCwgU2VuZGVySWQ6IDEsIFRleHQ6ICcnLCBBdHRhY2htZW50OiB7IElkOiAxLCBUeXBlOiAwLCBHZW9NYXJrOiB7IFg6IDEwMCwgWTogMTAwLCBaOiAxMDB9IH0gLCBUaW1lOiAxNjAzMjAyODk4NDgyLCBJc1JlYWQ6IHRydWUgfSwKICAgICAgICAgIC8vIHsgSWQ6IDAsIENoYXRJZDogMCwgU2VuZGVySWQ6IDAsIFRleHQ6ICcnLCBBdHRhY2htZW50OiB7IElkOiAxLCBUeXBlOiAwLCBHZW9NYXJrOiB7IFg6IDEwMCwgWTogMTAwLCBaOiAxMDB9IH0gLCBUaW1lOiAxNjAzMjAyODk4NDgyLCBJc1JlYWQ6IHRydWUgfSwKICAgICAgICAgIC8vIHsgSWQ6IDEsIENoYXRJZDogMCwgU2VuZGVySWQ6IDAsIFRleHQ6ICcnLCBBdHRhY2htZW50OiB7IElkOiAxLCBUeXBlOiAyLCBVcmw6ICdodHRwczovL2M0LndhbGxwYXBlcmZsYXJlLmNvbS93YWxscGFwZXIvNTAwLzQ0Mi8zNTQvb3V0cnVuLXZhcG9yd2F2ZS1oZC13YWxscGFwZXItcHJldmlldy5qcGcnIH0sIFRpbWU6IDE2MDMyMDI4OTg0ODcsIElzUmVhZDogdHJ1ZSB9LAogICAgICAgICAgLy8geyBJZDogMSwgQ2hhdElkOiAwLCBTZW5kZXJJZDogMSwgVGV4dDogJycsIEF0dGFjaG1lbnQ6IHsgSWQ6IDEsIFR5cGU6IDIsIFVybDogJ2h0dHBzOi8vYzQud2FsbHBhcGVyZmxhcmUuY29tL3dhbGxwYXBlci81MDAvNDQyLzM1NC9vdXRydW4tdmFwb3J3YXZlLWhkLXdhbGxwYXBlci1wcmV2aWV3LmpwZycgfSwgVGltZTogMTYwMzIwMjg5ODQ4NywgSXNSZWFkOiB0cnVlIH0sCiAgICAgICAgICAvLyB7IElkOiAyLCBDaGF0SWQ6IDAsIFNlbmRlcklkOiAyLCBUZXh0OiAnTW1tLCBvay5NbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBvaycsIFRpbWU6IDE2MDMzMDg4OTg0ODcsIElzUmVhZDogZmFsc2UgfSwKICAgICAgICAgIC8vIHsgSWQ6IDIsIENoYXRJZDogMCwgU2VuZGVySWQ6IDIsIFRleHQ6ICdNbW0sIG9rLk1tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rJywgVGltZTogMTYwMzMwODg5ODQ4NywgSXNSZWFkOiBmYWxzZSB9LAogICAgICAgICAgLy8geyBJZDogMiwgQ2hhdElkOiAwLCBTZW5kZXJJZDogMiwgVGV4dDogJ01tbSwgb2suTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2snLCBUaW1lOiAxNjAzMzA4ODk4NDg3LCBJc1JlYWQ6IGZhbHNlIH0sCiAgICAgICAgICAvLyB7IElkOiAyLCBDaGF0SWQ6IDAsIFNlbmRlcklkOiAyLCBUZXh0OiAnTW1tLCBvay5NbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBvaycsIFRpbWU6IDE2MDMzMDg4OTg0ODcsIElzUmVhZDogZmFsc2UgfSwKICAgICAgICAgIC8vIHsgSWQ6IDIsIENoYXRJZDogMCwgU2VuZGVySWQ6IDIsIFRleHQ6ICdNbW0sIG9rLk1tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rTW1tLCBva01tbSwgb2tNbW0sIG9rJywgVGltZTogMTYwMzMwODg5ODQ4NywgSXNSZWFkOiBmYWxzZSB9LAogICAgICAgIF0sCiAgICAgICAgSXNMb2FkaW5nOiBmYWxzZQogICAgICB9LAogICAgICBDYW5hbFByb2ZpbGU6IHsKICAgICAgICBOYW1lOiAn0KHQsNC80YvQuSDQtNC70LjQvdC90YvQuSDQvdC40Log0LIg0LjQs9GA0LUnLAogICAgICAgIElzT25saW5lOiB0cnVlLAogICAgICAgIEFkbWluTHZsOiAyLAogICAgICAgIEFiaWxpdGllczogewogICAgICAgICAgY2hhbmdlUHJvZmlsZTogdHJ1ZSwKICAgICAgICAgIGNyZWF0ZVBvc3RzOiBmYWxzZSwKICAgICAgICAgIGRlbGV0ZVBvc3RzOiBmYWxzZSwKICAgICAgICAgIGFwcG9pbnRtZW50QWRtaW5zOiBmYWxzZQogICAgICAgIH0KICAgICAgfSwKICAgICAgdmlld2VkUHJvZmlsZTogewogICAgICAgIElkOiAxLAogICAgICAgIFVzZXJuYW1lOiAndXNlcm5hbWUnLAogICAgICAgIERpc3BsYXllZE5hbWU6ICfQodCw0LzRi9C5INC00LvQuNC90L3Ri9C5INC90LjQuiDQsiDQuNCz0YDQtScsCiAgICAgICAgTnVtYmVyOiA5MzkzOTQsCiAgICAgICAgSXNOdW1iZXJIaWRlZDogZmFsc2UsCiAgICAgICAgSXNNdXRlZDogZmFsc2UsCiAgICAgICAgSXNCbG9ja2VkOiBmYWxzZSwKICAgICAgICBMYXN0VmlzaXRUaW1lOiAxNjAzOTU5MDcxMDAwLAogICAgICAgIElzT25saW5lOiBmYWxzZSwKICAgICAgICBJc0luQ29udGFjdHM6IGZhbHNlLAogICAgICAgIGlzTG9hZGluZzogZmFsc2UKICAgICAgfQogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBzZXRNZXNzZW5nZXJDYW5hbFByb2ZpbGVBYmlsaXR5OiBmdW5jdGlvbiBzZXRNZXNzZW5nZXJDYW5hbFByb2ZpbGVBYmlsaXR5KHN0YXRlLCBfcmVmKSB7CiAgICAgIHZhciBrZXkgPSBfcmVmLmtleSwKICAgICAgICAgIHZhbHVlID0gX3JlZi52YWx1ZTsKICAgICAgdmFyIGN1cnJlbnRDaGF0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdDsKICAgICAgdmFyIGNoYXQgPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNoYXRzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5JZCA9PT0gY3VycmVudENoYXQuSWQ7CiAgICAgIH0pOwogICAgICB2YXIgYWRtaW4gPSBjaGF0LkFkbWlucy5maW5kKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIGEuSWQgPT09IHN0YXRlLm1lc3NlbmdlckRhdGEuQ2FuYWxQcm9maWxlLklkOwogICAgICB9KTsKCiAgICAgIGlmIChhZG1pbikgewogICAgICAgIGlmICh2YWx1ZSkgYWRtaW4uUGVybWlzc2lvbnMucHVzaChrZXkpO2Vsc2UgewogICAgICAgICAgdmFyIGlkeCA9IGFkbWluLlBlcm1pc3Npb25zLmluZGV4T2Yoa2V5KTsKICAgICAgICAgIGlmIChpZHgpIGFkbWluLlBlcm1pc3Npb25zLnNwbGljZShpZHgsIDEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgY3VycmVudENoYXQuQWRtaW5zID0gY2hhdC5BZG1pbnM7CiAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ2FuYWxQcm9maWxlLlBlcm1pc3Npb25zID0gYWRtaW4uUGVybWlzc2lvbnM7CiAgICAgIHdpbmRvdy5tcC50cmlnZ2VyU2VydmVyKCdwaG9uZTo6bXNnOjptYW5hZ2U6OnNldEFjY291bnRQZXJtaXNzaW9uJywgY2hhdC5JZCwgYWRtaW4uSWQsIGtleSwgdmFsdWUpOwogICAgfSwKICAgIHNldE1lc3NlbmdlckN1cnJlbnRDaGF0SWNvbkNvbG9yczogZnVuY3Rpb24gc2V0TWVzc2VuZ2VyQ3VycmVudENoYXRJY29uQ29sb3JzKHN0YXRlLCB2YWx1ZSkgewogICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0Lkljb25Db2xvcnMgPSB2YWx1ZTsKICAgIH0sCiAgICBtc2dfc2V0QWNjb3VudFNldHRpbmdzOiBmdW5jdGlvbiBtc2dfc2V0QWNjb3VudFNldHRpbmdzKHN0YXRlLCBhY2NvdW50U2V0dGluZ3MpIHsKICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50QWNjb3VudCA9IGFjY291bnRTZXR0aW5nczsKICAgIH0sCiAgICAvLyNyZWdpb24gTXNnIENvbnRhY3RzCiAgICBtc2dfc2V0U3Vic2NyaWJlcnNGb3JTZWFyY2g6IGZ1bmN0aW9uIG1zZ19zZXRTdWJzY3JpYmVyc0ZvclNlYXJjaChzdGF0ZSwgc3Vic2NyaWJlcnMpIHsKICAgICAgc3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoc3Vic2NyaWJlcikgewogICAgICAgIGlmIChzdWJzY3JpYmVyLkxhc3RWaXNpdFRpbWUpIHN1YnNjcmliZXJzLkxhc3RWaXNpdFRpbWUgKj0gMTAwMDsKICAgICAgfSk7CiAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuU2VhcmNoU3Vic2NyaWJlcnMgPSBzdWJzY3JpYmVyczsKICAgIH0sCiAgICBtc2dfbG9hZENvbnRhY3RzOiBmdW5jdGlvbiBtc2dfbG9hZENvbnRhY3RzKHN0YXRlLCBjb250YWN0cykgewogICAgICBjb250YWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb250YWN0KSB7CiAgICAgICAgaWYgKGNvbnRhY3QuVGltZSkgY29udGFjdC5UaW1lICo9IDEwMDA7CiAgICAgICAgdmFyIG9sZENvbnRhY3RJbmRleCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ29udGFjdHMuZmluZEluZGV4KGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICByZXR1cm4gYy5JZCA9PT0gY29udGFjdC5JZDsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKG9sZENvbnRhY3RJbmRleCA9PT0gLTEpIHsKICAgICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ29udGFjdHMucHVzaChjb250YWN0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5Db250YWN0c1tvbGRDb250YWN0SW5kZXhdID0gY29udGFjdDsKICAgICAgICB9CgogICAgICAgIHZhciBwcml2YXRlQ2hhdCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgICAgcmV0dXJuIGMuQWNjb3VudElkID09PSBjb250YWN0LkFjY291bnRJZDsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKHByaXZhdGVDaGF0KSB7CiAgICAgICAgICBwcml2YXRlQ2hhdC5OYW1lID0gY29udGFjdC5OYW1lOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgbXNnX3JlbW92ZVN0b3JlQ29udGFjdDogZnVuY3Rpb24gbXNnX3JlbW92ZVN0b3JlQ29udGFjdChzdGF0ZSwgY29udGFjdElkKSB7CiAgICAgIHZhciBjb250YWN0SW5kZXggPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNvbnRhY3RzLmZpbmRJbmRleChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLklkID09PSBjb250YWN0SWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGNvbnRhY3RJbmRleCAhPT0gLTEpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNvbnRhY3RzLnNwbGljZShjb250YWN0SW5kZXgsIDEpOwogICAgICB9CiAgICB9LAogICAgbXNnX3NldENvbnRhY3RJc09ubGluZTogZnVuY3Rpb24gbXNnX3NldENvbnRhY3RJc09ubGluZShzdGF0ZSwgX3JlZjIpIHsKICAgICAgdmFyIGNvbnRhY3RJZCA9IF9yZWYyLmNvbnRhY3RJZCwKICAgICAgICAgIGlzT25saW5lID0gX3JlZjIuaXNPbmxpbmU7CiAgICAgIHZhciBjb250YWN0SW5kZXggPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNvbnRhY3RzLmZpbmRJbmRleChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLklkID09PSBjb250YWN0SWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGNvbnRhY3RJbmRleCAhPT0gLTEpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNvbnRhY3RzW2NvbnRhY3RJbmRleF0uSXNPbmxpbmUgPSBpc09ubGluZTsKICAgICAgfQogICAgfSwKICAgIC8vI2VuZHJlZ2lvbiBNc2cgQ29udGFjdHMKICAgIC8vI3JlZ2lvbiBNc2cgQ2hhdHMKICAgIG1zZ19sb2FkQ2hhdHM6IGZ1bmN0aW9uIG1zZ19sb2FkQ2hhdHMoc3RhdGUsIGNoYXRzKSB7CiAgICAgIGNoYXRzLmZvckVhY2goZnVuY3Rpb24gKGNoYXQpIHsKICAgICAgICB2YXIgX2NoYXQkTGFzdE1lc3NhZ2UkVGltLCBfY2hhdCRMYXN0TWVzc2FnZTsKCiAgICAgICAgdmFyIGNoYXRJbmRleCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuZmluZEluZGV4KGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICByZXR1cm4gYy5JZCA9PT0gY2hhdC5JZDsKICAgICAgICB9KTsKICAgICAgICBjaGF0LkFjdGlvblRpbWUgPSAoX2NoYXQkTGFzdE1lc3NhZ2UkVGltID0gKF9jaGF0JExhc3RNZXNzYWdlID0gY2hhdC5MYXN0TWVzc2FnZSkgPT09IG51bGwgfHwgX2NoYXQkTGFzdE1lc3NhZ2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaGF0JExhc3RNZXNzYWdlLlRpbWUpICE9PSBudWxsICYmIF9jaGF0JExhc3RNZXNzYWdlJFRpbSAhPT0gdm9pZCAwID8gX2NoYXQkTGFzdE1lc3NhZ2UkVGltIDogY2hhdC5DcmVhdGVkVGltZTsKICAgICAgICBjaGF0LkFjdGlvblRpbWUgKj0gMTAwMDsKCiAgICAgICAgaWYgKGNoYXRJbmRleCA9PT0gLTEpIHsKICAgICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMucHVzaChjaGF0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5zcGxpY2UoY2hhdEluZGV4LCAxKTsKICAgICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMucHVzaChjaGF0KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG1zZ19yZW1vdmVDaGF0OiBmdW5jdGlvbiBtc2dfcmVtb3ZlQ2hhdChzdGF0ZSwgY2hhdElkKSB7CiAgICAgIHZhciBjaGF0SWR4ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5maW5kSW5kZXgoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5JZCA9PT0gY2hhdElkOwogICAgICB9KTsKCiAgICAgIGlmIChjaGF0SWR4ICE9PSAtMSkgewogICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuc3BsaWNlKGNoYXRJZHgsIDEpOwogICAgICB9CiAgICB9LAogICAgbXNnX2NhY2hlTWVzc2FnZTogZnVuY3Rpb24gbXNnX2NhY2hlTWVzc2FnZShzdGF0ZSwgbWVzc2FnZSkgewogICAgICB2YXIgY2FjaGVkTWVzc2FnZUluZGV4ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5fY2FjaGVkTWVzc2FnZXMuZmluZEluZGV4KGZ1bmN0aW9uIChtKSB7CiAgICAgICAgcmV0dXJuIG0uSWQgPT09IG1lc3NhZ2UuSWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGNhY2hlZE1lc3NhZ2VJbmRleCA9PT0gLTEpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLl9jYWNoZWRNZXNzYWdlcy5wdXNoKG1lc3NhZ2UpOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuX2NhY2hlZE1lc3NhZ2VzW2NhY2hlZE1lc3NhZ2VJbmRleF0gPSBtZXNzYWdlOwogICAgICB9CiAgICB9LAogICAgbXNnX3VuY2FjaGVNZXNzYWdlOiBmdW5jdGlvbiBtc2dfdW5jYWNoZU1lc3NhZ2Uoc3RhdGUsIG1lc3NhZ2VJZCkgewogICAgICB2YXIgY2FjaGVkTWVzc2FnZUluZGV4ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5fY2FjaGVkTWVzc2FnZXMuZmluZEluZGV4KGZ1bmN0aW9uIChtKSB7CiAgICAgICAgcmV0dXJuIG0uSWQgPT09IG1lc3NhZ2VJZDsKICAgICAgfSk7CgogICAgICBpZiAoY2FjaGVkTWVzc2FnZUluZGV4ICE9PSAtMSkgewogICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuX2NhY2hlZE1lc3NhZ2VzLnNwbGljZShjYWNoZWRNZXNzYWdlSW5kZXgsIDEpOwogICAgICB9CiAgICB9LAogICAgbXNnX21hcmtDaGF0TWVzc2FnZXNBc1JlYWQ6IGZ1bmN0aW9uIG1zZ19tYXJrQ2hhdE1lc3NhZ2VzQXNSZWFkKHN0YXRlLCBjaGF0SWQpIHsKICAgICAgdmFyIGNoYXQgPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNoYXRzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5JZCA9PT0gY2hhdElkOwogICAgICB9KTsKCiAgICAgIGlmIChjaGF0KSB7CiAgICAgICAgY2hhdC5Ob25SZWFkTWVzc2FnZXNDb3VudCA9IDA7CiAgICAgIH0KICAgIH0sCiAgICBtc2dfc2V0T3duTWVzc2FnZXNSZWFkSW5DaGF0OiBmdW5jdGlvbiBtc2dfc2V0T3duTWVzc2FnZXNSZWFkSW5DaGF0KHN0YXRlLCBjaGF0SWQpIHsKICAgICAgaWYgKHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSWQgPT09IGNoYXRJZCkgewogICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSXRlbXMuZm9yRWFjaChmdW5jdGlvbiAobSkgewogICAgICAgICAgaWYgKG0uU2VuZGVySWQgPT09IHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudEFjY291bnQuSWQpIHsKICAgICAgICAgICAgbS5Jc1JlYWQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLl9jYWNoZWRNZXNzYWdlcy5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgaWYgKG0uU2VuZGVySWQgPT09IHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudEFjY291bnQuSWQpIHsKICAgICAgICAgIG0uSXNSZWFkID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG1zZ19zZXRMYXN0TWVzc2FnZTogZnVuY3Rpb24gbXNnX3NldExhc3RNZXNzYWdlKHN0YXRlLCBtZXNzYWdlKSB7CiAgICAgIHZhciBjaGF0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMuSWQgPT09IG1lc3NhZ2UuQ2hhdElkOwogICAgICB9KTsKCiAgICAgIGlmIChjaGF0KSB7CiAgICAgICAgY2hhdC5MYXN0TWVzc2FnZSA9IG1lc3NhZ2U7CiAgICAgICAgY2hhdC5BY3Rpb25UaW1lID0gbWVzc2FnZS5UaW1lOwogICAgICB9CiAgICB9LAogICAgbXNnX3NldEN1cnJlbnRDaGF0SXNMb2FkaW5nOiBmdW5jdGlvbiBtc2dfc2V0Q3VycmVudENoYXRJc0xvYWRpbmcoc3RhdGUsIHRvZ2dsZSkgewogICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklzTG9hZGluZyA9IHRvZ2dsZTsKICAgIH0sCiAgICBtc2dfc2V0Q3VycmVudENoYXRNZXNzYWdlczogZnVuY3Rpb24gbXNnX3NldEN1cnJlbnRDaGF0TWVzc2FnZXMoc3RhdGUsIG1lc3NhZ2VzKSB7CiAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSXRlbXMgPSBtZXNzYWdlczsKICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5Jc0xvYWRpbmcgPSBmYWxzZTsKICAgIH0sCiAgICBtc2dfc2V0Q3VycmVudENoYXQ6IGZ1bmN0aW9uIG1zZ19zZXRDdXJyZW50Q2hhdChzdGF0ZSwgX3JlZjMpIHsKICAgICAgdmFyIElkID0gX3JlZjMuSWQsCiAgICAgICAgICBOYW1lID0gX3JlZjMuTmFtZSwKICAgICAgICAgIElzT25saW5lID0gX3JlZjMuSXNPbmxpbmUsCiAgICAgICAgICBUeXBlID0gX3JlZjMuVHlwZSwKICAgICAgICAgIFN1YnNjcmliZXJzQ291bnQgPSBfcmVmMy5TdWJzY3JpYmVyc0NvdW50LAogICAgICAgICAgQWNjb3VudElkID0gX3JlZjMuQWNjb3VudElkLAogICAgICAgICAgSWNvbkNvbG9ycyA9IF9yZWYzLkljb25Db2xvcnMsCiAgICAgICAgICBQZXJtaXNzaW9ucyA9IF9yZWYzLlBlcm1pc3Npb25zLAogICAgICAgICAgRGVzY3JpcHRpb24gPSBfcmVmMy5EZXNjcmlwdGlvbiwKICAgICAgICAgIEFkbWluTHZsID0gX3JlZjMuQWRtaW5MdmwsCiAgICAgICAgICBJbnZpdGVDb2RlID0gX3JlZjMuSW52aXRlQ29kZSwKICAgICAgICAgIEFkbWlucyA9IF9yZWYzLkFkbWlucywKICAgICAgICAgIEJsb2NrSXRlbXMgPSBfcmVmMy5CbG9ja0l0ZW1zOwogICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0ID0gewogICAgICAgIElkOiBJZCwKICAgICAgICBOYW1lOiBOYW1lLAogICAgICAgIElzT25saW5lOiBJc09ubGluZSwKICAgICAgICBUeXBlOiBUeXBlLAogICAgICAgIEFkbWluTHZsOiBBZG1pbkx2bCwKICAgICAgICBEZXNjcmlwdGlvbjogRGVzY3JpcHRpb24sCiAgICAgICAgU3Vic2NyaWJlcnNDb3VudDogU3Vic2NyaWJlcnNDb3VudCwKICAgICAgICBJbnZpdGVDb2RlOiBJbnZpdGVDb2RlLAogICAgICAgIEFkbWluczogQWRtaW5zLAogICAgICAgIEJsb2NrSXRlbXM6IEJsb2NrSXRlbXMKICAgICAgfTsgLy8gQ2hhbm5lbCBhbmQgZ3JvdXAgY2hhdHMgZmllbGRzCgogICAgICBpZiAoUGVybWlzc2lvbnMpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LkNhbkNoYW5naW5nR3JvdXBQcm9maWxlID0gUGVybWlzc2lvbnMuaW5jbHVkZXMoMSk7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5DYW5EZWxldGluZ01lc3NhZ2VzID0gUGVybWlzc2lvbnMuaW5jbHVkZXMoMik7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5DYW5CbG9ja2luZ0FjY291bnRzID0gUGVybWlzc2lvbnMuaW5jbHVkZXMoMyk7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5DYW5QdXJwb3NpbmdBZG1pbnMgPSBQZXJtaXNzaW9ucy5pbmNsdWRlcyg0KTsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LkNhbkNyZWF0aW5nUG9zdHMgPSBQZXJtaXNzaW9ucy5pbmNsdWRlcyg1KTsKICAgICAgfQoKICAgICAgaWYgKEljb25Db2xvcnMpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0Lkljb25Db2xvcnMgPSBJY29uQ29sb3JzOwogICAgICB9IC8vIFByaXZhdGUgY2hhdHMgZmllbGQKCgogICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LkFjY291bnRJZCA9IEFjY291bnRJZDsKICAgIH0sCiAgICBtc2dfbG9hZEFjY291bnRzOiBmdW5jdGlvbiBtc2dfbG9hZEFjY291bnRzKHN0YXRlLCBhY2NvdW50cykgewogICAgICBhY2NvdW50cy5mb3JFYWNoKGZ1bmN0aW9uIChhY2NvdW50KSB7CiAgICAgICAgdmFyIGNvbnRhY3QgPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNvbnRhY3RzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgIHJldHVybiBjLkFjY291bnRJZCA9PT0gYWNjb3VudC5JZDsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKGNvbnRhY3QpIHsKICAgICAgICAgIGFjY291bnQuRGlzcGxheWVkTmFtZSA9IGNvbnRhY3QuTmFtZTsKICAgICAgICB9CgogICAgICAgIHZhciBhY2NvdW50SW5kZXggPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLl9jYWNoZWRBY2NvdW50cy5maW5kSW5kZXgoZnVuY3Rpb24gKGEpIHsKICAgICAgICAgIHJldHVybiBhLklkID09IGFjY291bnQuSWQ7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChhY2NvdW50SW5kZXggPT09IC0xKSB7CiAgICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLl9jYWNoZWRBY2NvdW50cy5wdXNoKGFjY291bnQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLl9jYWNoZWRBY2NvdW50c1thY2NvdW50SW5kZXhdID0gYWNjb3VudDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG1zZ19zZXRDaGF0TXV0ZWQ6IGZ1bmN0aW9uIG1zZ19zZXRDaGF0TXV0ZWQoc3RhdGUsIF9yZWY0KSB7CiAgICAgIHZhciBDaGF0SWQgPSBfcmVmNC5DaGF0SWQsCiAgICAgICAgICBJc011dGVkID0gX3JlZjQuSXNNdXRlZDsKCiAgICAgIGlmIChzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklkID09PSBDaGF0SWQpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklzTXV0ZWQgPSBJc011dGVkOwogICAgICB9CgogICAgICB2YXIgY2hhdCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLklkID09PSBDaGF0SWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGNoYXQpIHsKICAgICAgICBjaGF0LklzTXV0ZWQgPSBJc011dGVkOwogICAgICB9CiAgICB9LAogICAgbXNnX3JlbmFtZUNoYXQ6IGZ1bmN0aW9uIG1zZ19yZW5hbWVDaGF0KHN0YXRlLCBfcmVmNSkgewogICAgICB2YXIgQ2hhdElkID0gX3JlZjUuQ2hhdElkLAogICAgICAgICAgTmFtZSA9IF9yZWY1Lk5hbWU7CiAgICAgIHZhciBjaGF0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMuSWQgPT09IENoYXRJZDsKICAgICAgfSk7CgogICAgICBpZiAoY2hhdCkgewogICAgICAgIGNoYXQuTmFtZSA9IE5hbWU7CiAgICAgIH0KCiAgICAgIGlmIChzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklkID09PSBDaGF0SWQpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0Lk5hbWUgPSBOYW1lOwogICAgICB9CiAgICB9LAogICAgbXNnX2luY3JlYXNlU3Vic2NyaWJlcnNDb3VudDogZnVuY3Rpb24gbXNnX2luY3JlYXNlU3Vic2NyaWJlcnNDb3VudChzdGF0ZSwgY2hhdElkKSB7CiAgICAgIGlmIChzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklkID09PSBjaGF0SWQpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LlN1YnNjcmliZXJzQ291bnQrKzsKICAgICAgfQoKICAgICAgdmFyIGNoYXQgPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNoYXRzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5JZCA9PT0gY2hhdElkOwogICAgICB9KTsKCiAgICAgIGlmIChjaGF0KSB7CiAgICAgICAgaWYgKCFjaGF0LlN1YnNjcmliZXJzQ291bnQpIHsKICAgICAgICAgIGNoYXQuU3Vic2NyaWJlcnNDb3VudCA9IDA7CiAgICAgICAgfQoKICAgICAgICBjaGF0LlN1YnNjcmliZXJzQ291bnQrKzsKICAgICAgfQogICAgfSwKICAgIG1zZ19kZWNyZWFzZVN1YnNjcmliZXJzQ291bnQ6IGZ1bmN0aW9uIG1zZ19kZWNyZWFzZVN1YnNjcmliZXJzQ291bnQoc3RhdGUsIGNoYXRJZCkgewogICAgICBpZiAoc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JZCA9PT0gY2hhdElkKSB7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5TdWJzY3JpYmVyc0NvdW50LS07CiAgICAgIH0KCiAgICAgIHZhciBjaGF0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMuSWQgPT09IGNoYXRJZDsKICAgICAgfSk7CgogICAgICBpZiAoY2hhdCkgewogICAgICAgIGlmICghY2hhdC5TdWJzY3JpYmVyc0NvdW50KSB7CiAgICAgICAgICBjaGF0LlN1YnNjcmliZXJzQ291bnQgPSAwOwogICAgICAgIH0KCiAgICAgICAgY2hhdC5TdWJzY3JpYmVyc0NvdW50LS07CiAgICAgIH0KICAgIH0sCiAgICBtc2dfcmVtb3ZlRnJvbUJsb2NrbGlzdDogZnVuY3Rpb24gbXNnX3JlbW92ZUZyb21CbG9ja2xpc3Qoc3RhdGUsIF9yZWY2KSB7CiAgICAgIHZhciBDaGF0SWQgPSBfcmVmNi5DaGF0SWQsCiAgICAgICAgICBBY2NvdW50SWQgPSBfcmVmNi5BY2NvdW50SWQ7CiAgICAgIHZhciBjaGF0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMuSWQgPT09IENoYXRJZDsKICAgICAgfSk7CiAgICAgIGlmICghY2hhdCkgcmV0dXJuOwogICAgICB2YXIgYmxvY2tJZHggPSBjaGF0LkJsb2NrSXRlbXMuZmluZEluZGV4KGZ1bmN0aW9uIChiKSB7CiAgICAgICAgcmV0dXJuIGIuQWNjb3VudElkID09PSBBY2NvdW50SWQ7CiAgICAgIH0pOwogICAgICBpZiAoYmxvY2tJZHggPT09IC0xKSByZXR1cm47CiAgICAgIGNoYXQuQmxvY2tJdGVtcy5zcGxpY2UoYmxvY2tJZHgsIDEpOwoKICAgICAgaWYgKHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSWQgPT09IENoYXRJZCkgewogICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuQmxvY2tJdGVtcyA9IGNoYXQuQmxvY2tJdGVtczsKICAgICAgfQogICAgfSwKICAgIG1zZ19hZGRCbG9ja2xpc3RJdGVtczogZnVuY3Rpb24gbXNnX2FkZEJsb2NrbGlzdEl0ZW1zKHN0YXRlLCBfcmVmNykgewogICAgICB2YXIgQ2hhdElkID0gX3JlZjcuQ2hhdElkLAogICAgICAgICAgQmxvY2tJdGVtcyA9IF9yZWY3LkJsb2NrSXRlbXM7CiAgICAgIHZhciBjaGF0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMuSWQgPT09IENoYXRJZDsKICAgICAgfSk7CgogICAgICBpZiAoY2hhdCkgewogICAgICAgIGlmICghY2hhdC5CbG9ja0l0ZW1zKSBjaGF0LkJsb2NrSXRlbXMgPSBbXTsKICAgICAgICBCbG9ja0l0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGkpIHsKICAgICAgICAgIGlmICghY2hhdC5CbG9ja0l0ZW1zLmZpbmQoZnVuY3Rpb24gKGJpKSB7CiAgICAgICAgICAgIHJldHVybiBiaS5JZCA9PT0gaS5JZDsKICAgICAgICAgIH0pKSB7CiAgICAgICAgICAgIGNoYXQuQmxvY2tJdGVtcy5wdXNoKGkpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JZCA9PT0gQ2hhdElkKSB7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5CbG9ja0l0ZW1zID0gY2hhdC5CbG9ja0l0ZW1zOwogICAgICB9CiAgICB9LAogICAgbXNnX3NldENoYXRJc09ubGluZTogZnVuY3Rpb24gbXNnX3NldENoYXRJc09ubGluZShzdGF0ZSwgX3JlZjgpIHsKICAgICAgdmFyIENoYXRJZCA9IF9yZWY4LkNoYXRJZCwKICAgICAgICAgIElzT25saW5lID0gX3JlZjguSXNPbmxpbmU7CiAgICAgIHZhciBjaGF0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMuSWQgPT09IENoYXRJZDsKICAgICAgfSk7CgogICAgICBpZiAoY2hhdCkgewogICAgICAgIGNoYXQuSXNPbmxpbmUgPSBJc09ubGluZTsKICAgICAgfQoKICAgICAgaWYgKHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSWQgPT09IENoYXRJZCkgewogICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSXNPbmxpbmUgPSBjaGF0LklzT25saW5lOwogICAgICB9CiAgICB9LAogICAgLy8jZW5kcmVnaW9uIE1zZyBDaGF0cwogICAgbXNnX3NldFZpZXdlZFByb2ZpbGVJbmZvOiBmdW5jdGlvbiBtc2dfc2V0Vmlld2VkUHJvZmlsZUluZm8oc3RhdGUsIGluZm8pIHsKICAgICAgaW5mby5Jc0luQ29udGFjdHMgPSBmYWxzZTsKICAgICAgdmFyIGNvbnRhY3QgPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNvbnRhY3RzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5BY2NvdW50SWQgPT09IGluZm8uSWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGNvbnRhY3QpIHsKICAgICAgICBpbmZvLkRpc3BsYXllZE5hbWUgPSBjb250YWN0Lk5hbWU7CiAgICAgICAgaW5mby5Jc0luQ29udGFjdHMgPSB0cnVlOwogICAgICB9CgogICAgICBpbmZvLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICBpbmZvLkxhc3RWaXNpdFRpbWUgKj0gMTAwMDsKICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS52aWV3ZWRQcm9maWxlID0gaW5mbzsKICAgIH0sCiAgICBtc2dfc2V0QWNjb3VudERpc3BsYXllZE5hbWU6IGZ1bmN0aW9uIG1zZ19zZXRBY2NvdW50RGlzcGxheWVkTmFtZShzdGF0ZSwgX3JlZjkpIHsKICAgICAgdmFyIG5ld0Rpc3BsYXllZE5hbWUgPSBfcmVmOS5uZXdEaXNwbGF5ZWROYW1lOwogICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRBY2NvdW50LkRpc3BsYXllZE5hbWUgPSBuZXdEaXNwbGF5ZWROYW1lOwogICAgfSwKICAgIG1zZ19zZXRBY2NvdW50SXNOdW1iZXJIaWRlZDogZnVuY3Rpb24gbXNnX3NldEFjY291bnRJc051bWJlckhpZGVkKHN0YXRlLCBpc051bWJlckhpZGVkKSB7CiAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudEFjY291bnQuSXNOdW1iZXJIaWRlZCA9IGlzTnVtYmVySGlkZWQ7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBjaGVja0NoYXRJc0xvYWRpbmc6IGZ1bmN0aW9uIGNoZWNrQ2hhdElzTG9hZGluZyhfcmVmMTApIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZjEwLnN0YXRlLAogICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMTAuZGlzcGF0Y2g7CgogICAgICBpZiAoc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5Jc0xvYWRpbmcpIHsKICAgICAgICBkaXNwYXRjaCgnc21hcnRwaG9uZS9zZXRUYWJPckJhY2snLCB7CiAgICAgICAgICBrZXk6ICdNZXNzZW5nZXJUYWInLAogICAgICAgICAgc2VjdGlvbjogJ0dlbmVyYWxTZWN0aW9uJywKICAgICAgICAgIHN1YnNlY3Rpb246ICdHZW5lcmFsU3Vic2VjdGlvbicsCiAgICAgICAgICBkYXRhOiBudWxsCiAgICAgICAgfSwgewogICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSXNMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGUubWVzc2VuZ2VyRGF0YS52aWV3ZWRQcm9maWxlLklzTG9hZGluZykgewogICAgICAgIGRpc3BhdGNoKCdzbWFydHBob25lL3NldFRhYk9yQmFjaycsIHsKICAgICAgICAgIGtleTogJ01lc3NlbmdlclRhYicsCiAgICAgICAgICBzZWN0aW9uOiAnR2VuZXJhbFNlY3Rpb24nLAogICAgICAgICAgc3Vic2VjdGlvbjogJ0dlbmVyYWxTdWJzZWN0aW9uJywKICAgICAgICAgIGRhdGE6IG51bGwKICAgICAgICB9LCB7CiAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS52aWV3ZWRQcm9maWxlLklzTG9hZGluZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgbXNnX2Ryb3BDdXJyZW50Q2hhdDogZnVuY3Rpb24gbXNnX2Ryb3BDdXJyZW50Q2hhdChfcmVmMTEpIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZjExLnN0YXRlOwogICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklkID0gLTE7CiAgICB9LAogICAgbXNnX3NldEFkbWluc0ZvckN1cnJlbnRDaGF0OiBmdW5jdGlvbiBtc2dfc2V0QWRtaW5zRm9yQ3VycmVudENoYXQoX3JlZjEyLCBhZG1pbnMpIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZjEyLnN0YXRlOwogICAgICB2YXIgY2hhdElkID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JZDsKICAgICAgdmFyIGNoYXQgPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNoYXRzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5JZCA9PT0gY2hhdElkOwogICAgICB9KTsKCiAgICAgIGlmICghY2hhdCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5BZG1pbnMgPSBhZG1pbnM7CiAgICAgIGNoYXQuQWRtaW5zID0gYWRtaW5zOwogICAgfSwKICAgIG1zZ19hZGRBZG1pbkZvckNoYXQ6IGZ1bmN0aW9uIG1zZ19hZGRBZG1pbkZvckNoYXQoX3JlZjEzLCBfcmVmMTQpIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZjEzLnN0YXRlOwogICAgICB2YXIgQ2hhdElkID0gX3JlZjE0LkNoYXRJZCwKICAgICAgICAgIEFjY291bnRJZCA9IF9yZWYxNC5BY2NvdW50SWQ7CiAgICAgIHZhciBzdWJzY3JpYmVyID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5TZWFyY2hTdWJzY3JpYmVycy5maW5kKGZ1bmN0aW9uIChzKSB7CiAgICAgICAgcmV0dXJuIHMuSWQgPT09IEFjY291bnRJZDsKICAgICAgfSk7CiAgICAgIGlmICghc3Vic2NyaWJlcikgcmV0dXJuOwogICAgICB2YXIgY2hhdCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLklkID09PSBDaGF0SWQ7CiAgICAgIH0pOwogICAgICBpZiAoIWNoYXQpIHJldHVybjsKICAgICAgc3Vic2NyaWJlci5BZG1pbkx2bCA9IDE7CiAgICAgIHN1YnNjcmliZXIuUGVybWlzc2lvbnMgPSBbXTsKICAgICAgY2hhdC5BZG1pbnMucHVzaChzdWJzY3JpYmVyKTsKCiAgICAgIGlmIChzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklkID09PSBDaGF0SWQpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LkFkbWlucy5wdXNoKHN1YnNjcmliZXIpOwogICAgICB9CiAgICB9LAogICAgbXNnX2RlbGV0ZUFkbWluRm9yQ2hhdDogZnVuY3Rpb24gbXNnX2RlbGV0ZUFkbWluRm9yQ2hhdChfcmVmMTUsIF9yZWYxNikgewogICAgICB2YXIgc3RhdGUgPSBfcmVmMTUuc3RhdGU7CiAgICAgIHZhciBDaGF0SWQgPSBfcmVmMTYuQ2hhdElkLAogICAgICAgICAgQWRtaW5JZCA9IF9yZWYxNi5BZG1pbklkOwogICAgICB2YXIgY2hhdCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLklkID09PSBDaGF0SWQ7CiAgICAgIH0pOwogICAgICBpZiAoIWNoYXQpIHJldHVybjsKICAgICAgdmFyIGFkbWluSWR4ID0gY2hhdC5BZG1pbnMuZmluZEluZGV4KGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIGEuSWQgPT09IEFkbWluSWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGFkbWluSWR4ICE9PSAtMSkgewogICAgICAgIGNoYXQuQWRtaW5zLnNwbGljZShhZG1pbklkeCwgMSk7CiAgICAgIH0KCiAgICAgIGlmIChzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklkID09PSBDaGF0SWQpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LkFkbWlucyA9IGNoYXQuQWRtaW5zOwogICAgICB9CiAgICB9LAogICAgbXNnX3NldE15QWRtaW5QZXJtaXNzaW9uc0ZvckNoYXQ6IGZ1bmN0aW9uIG1zZ19zZXRNeUFkbWluUGVybWlzc2lvbnNGb3JDaGF0KF9yZWYxNywgX3JlZjE4KSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWYxNy5zdGF0ZTsKICAgICAgdmFyIENoYXRJZCA9IF9yZWYxOC5DaGF0SWQsCiAgICAgICAgICBBZG1pbkx2bCA9IF9yZWYxOC5BZG1pbkx2bCwKICAgICAgICAgIFBlcm1pc3Npb25zID0gX3JlZjE4LlBlcm1pc3Npb25zOwogICAgICB2YXIgY2hhdCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLklkID09PSBDaGF0SWQ7CiAgICAgIH0pOwogICAgICBpZiAoIWNoYXQpIHJldHVybjsKICAgICAgY2hhdC5QZXJtaXNzaW9ucyA9IFBlcm1pc3Npb25zOwogICAgICBjaGF0LkFkbWluTHZsID0gQWRtaW5Mdmw7CiAgICB9LAogICAgbXNnX29wZW5DaGF0OiBmdW5jdGlvbiBtc2dfb3BlbkNoYXQoX3JlZjE5LCBjaGF0SWQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYxOS5jb21taXQsCiAgICAgICAgICBzdGF0ZSA9IF9yZWYxOS5zdGF0ZTsKICAgICAgdmFyIGNoYXQgPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNoYXRzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5JZCA9PT0gY2hhdElkOwogICAgICB9KTsKICAgICAgdmFyIHN1YnNlY3Rpb25zQnlDaGF0VHlwZSA9IHsKICAgICAgICAwOiAnUHJpdmF0ZVN1YnNlY3Rpb24nLAogICAgICAgIDE6ICdHcm91cFN1YnNlY3Rpb24nLAogICAgICAgIDI6ICdDYW5hbFN1YnNlY3Rpb24nCiAgICAgIH07CiAgICAgIGNvbW1pdCgnbXNnX3NldEN1cnJlbnRDaGF0JywgY2hhdCk7IC8vIElzQWxyZWFkeUxvYWRlZCAtINGDINC40LPRgNC+0LrQsCDRg9C20LUg0L/QvtC00LPRgNGD0LbQtdC90Ysg0L/QvtGB0LvQtdC00L3QuNC1INGB0L7QvtCx0YnQtdC90LjRjyDQsiDRh9Cw0YLQtQoKICAgICAgaWYgKGNoYXQuSXNBbHJlYWR5TG9hZGVkKSB7CiAgICAgICAgdmFyIG1lc3NhZ2VzID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5fY2FjaGVkTWVzc2FnZXMuZmlsdGVyKGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICByZXR1cm4gbS5DaGF0SWQgPT09IGNoYXRJZDsKICAgICAgICB9KTsKCiAgICAgICAgY29tbWl0KCdtc2dfc2V0Q3VycmVudENoYXRNZXNzYWdlcycsIG1lc3NhZ2VzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB3aW5kb3cubXAudHJpZ2dlclNlcnZlcigncGhvbmU6Om1zZzo6cmVxdWVzdENoYXQnLCBjaGF0SWQpOwogICAgICAgIGNvbW1pdCgnbXNnX3NldEN1cnJlbnRDaGF0SXNMb2FkaW5nJywgdHJ1ZSk7CiAgICAgIH0KCiAgICAgIGNvbW1pdCgnc21hcnRwaG9uZS9zZXRDdXJyZW50VGFiJywgewogICAgICAgIGtleTogJ01lc3NlbmdlclRhYicsCiAgICAgICAgc2VjdGlvbjogJ0NoYXRTZWN0aW9uJywKICAgICAgICBzdWJzZWN0aW9uOiBzdWJzZWN0aW9uc0J5Q2hhdFR5cGVbY2hhdC5UeXBlXSwKICAgICAgICBkYXRhOiBudWxsCiAgICAgIH0sIHsKICAgICAgICByb290OiB0cnVlCiAgICAgIH0pOwoKICAgICAgaWYgKGNoYXQuTm9uUmVhZE1lc3NhZ2VzQ291bnQgPiAwKSB7CiAgICAgICAgd2luZG93Lm1wLnRyaWdnZXJTZXJ2ZXIoJ3Bob25lOjptc2c6Om1hcmtBc1JlYWQnLCBjaGF0SWQpOwogICAgICB9CiAgICB9LAogICAgbXNnX29wZW5Qcml2YXRlQ2hhdDogZnVuY3Rpb24gbXNnX29wZW5Qcml2YXRlQ2hhdChfcmVmMjAsIGFjY291bnRJZCkgewogICAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmMjAuZGlzcGF0Y2gsCiAgICAgICAgICBjb21taXQgPSBfcmVmMjAuY29tbWl0LAogICAgICAgICAgc3RhdGUgPSBfcmVmMjAuc3RhdGU7CiAgICAgIHZhciBwcml2YXRlQ2hhdCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ2hhdHMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLkFjY291bnRJZCA9PT0gYWNjb3VudElkOwogICAgICB9KTsKCiAgICAgIGlmIChwcml2YXRlQ2hhdCkgewogICAgICAgIGRpc3BhdGNoKCdtc2dfb3BlbkNoYXQnLCBwcml2YXRlQ2hhdC5JZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29tbWl0KCdtc2dfc2V0Q3VycmVudENoYXRJc0xvYWRpbmcnLCB0cnVlKTsKICAgICAgICBjb21taXQoJ21zZ19zZXRDdXJyZW50Q2hhdCcsIHsKICAgICAgICAgIElkOiAtMSwKICAgICAgICAgIE5hbWU6ICdQcml2YXRlIENoYXQnLAogICAgICAgICAgSXNPbmxpbmU6IGZhbHNlLAogICAgICAgICAgVHlwZTogMCwKICAgICAgICAgIEFjY291bnRJZDogYWNjb3VudElkCiAgICAgICAgfSk7CiAgICAgICAgd2luZG93Lm1wLnRyaWdnZXJTZXJ2ZXIoJ3Bob25lOjptc2c6OmNyZWF0ZVByaXZhdGVDaGF0JywgYWNjb3VudElkKTsKICAgICAgICBjb21taXQoJ3NtYXJ0cGhvbmUvc2V0Q3VycmVudFRhYicsIHsKICAgICAgICAgIGtleTogJ01lc3NlbmdlclRhYicsCiAgICAgICAgICBzZWN0aW9uOiAnQ2hhdFNlY3Rpb24nLAogICAgICAgICAgc3Vic2VjdGlvbjogJ1ByaXZhdGVTdWJzZWN0aW9uJywKICAgICAgICAgIGRhdGE6IG51bGwKICAgICAgICB9LCB7CiAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBtc2dfbG9hZEluY2hhdEluZm86IGZ1bmN0aW9uIG1zZ19sb2FkSW5jaGF0SW5mbyhfcmVmMjEsIF9yZWYyMikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjIxLmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjIxLnN0YXRlOwogICAgICB2YXIgQ2hhdElkID0gX3JlZjIyLkNoYXRJZCwKICAgICAgICAgIFN1YnNjcmliZXJzQ291bnQgPSBfcmVmMjIuU3Vic2NyaWJlcnNDb3VudCwKICAgICAgICAgIE1lc3NhZ2VzID0gX3JlZjIyLk1lc3NhZ2VzLAogICAgICAgICAgUGVybWlzc2lvbnMgPSBfcmVmMjIuUGVybWlzc2lvbnMsCiAgICAgICAgICBBZG1pbkx2bCA9IF9yZWYyMi5BZG1pbkx2bCwKICAgICAgICAgIEludml0ZUNvZGUgPSBfcmVmMjIuSW52aXRlQ29kZTsKICAgICAgTWVzc2FnZXMuZm9yRWFjaChmdW5jdGlvbiAobWVzc2FnZSkgewogICAgICAgIG1lc3NhZ2UuVGltZSAqPSAxMDAwOwogICAgICAgIG1lc3NhZ2UuQ2hhdElkID0gQ2hhdElkOwogICAgICAgIGNvbW1pdCgnbXNnX2NhY2hlTWVzc2FnZScsIG1lc3NhZ2UpOwogICAgICB9KTsKICAgICAgdmFyIGNoYXQgPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNoYXRzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICByZXR1cm4gYy5JZCA9PT0gQ2hhdElkOwogICAgICB9KTsKICAgICAgY2hhdC5TdWJzY3JpYmVyc0NvdW50ID0gU3Vic2NyaWJlcnNDb3VudDsKICAgICAgY2hhdC5QZXJtaXNzaW9ucyA9IFBlcm1pc3Npb25zOwogICAgICBjaGF0LklzQWxyZWFkeUxvYWRlZCA9IHRydWU7CiAgICAgIGNoYXQuQWRtaW5MdmwgPSBBZG1pbkx2bDsKICAgICAgY2hhdC5JbnZpdGVDb2RlID0gSW52aXRlQ29kZTsKICAgICAgY29tbWl0KCdtc2dfc2V0Q3VycmVudENoYXQnLCBjaGF0KTsKICAgICAgY29tbWl0KCdtc2dfc2V0Q3VycmVudENoYXRNZXNzYWdlcycsIE1lc3NhZ2VzKTsgLy8g0J/QvtC00LPRgNGD0LfQutCwINC90LXQt9Cw0LrQtdGI0LjRgNC+0LLQsNC90L3Ri9GFINCw0LrQutCw0YPQvdGC0L7QsgoKICAgICAgdmFyIHNlbmRlcnNJZHMgPSBfdG9Db25zdW1hYmxlQXJyYXkobmV3IFNldChNZXNzYWdlcy5tYXAoZnVuY3Rpb24gKG0pIHsKICAgICAgICByZXR1cm4gbS5TZW5kZXJJZDsKICAgICAgfSkpKTsKCiAgICAgIHZhciBub25DYWNoZWRBY2NvdW50c0lkcyA9IHNlbmRlcnNJZHMuZmlsdGVyKGZ1bmN0aW9uIChhY2NvdW50SWQpIHsKICAgICAgICByZXR1cm4gIXN0YXRlLm1lc3NlbmdlckRhdGEuX2NhY2hlZEFjY291bnRzLmZpbmQoZnVuY3Rpb24gKGEpIHsKICAgICAgICAgIHJldHVybiBhLklkID09PSBhY2NvdW50SWQ7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICB3aW5kb3cubXAudHJpZ2dlclNlcnZlcigncGhvbmU6Om1zZzo6cmVxdWVzdEFjY291bnRzTmFtZXMnLCBKU09OLnN0cmluZ2lmeShub25DYWNoZWRBY2NvdW50c0lkcykpOwogICAgfSwKICAgIG1zZ19vcGVuQWNjb3VudDogZnVuY3Rpb24gbXNnX29wZW5BY2NvdW50KF9yZWYyMywgYWNjb3VudElkKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMjMuY29tbWl0LAogICAgICAgICAgc3RhdGUgPSBfcmVmMjMuc3RhdGU7CiAgICAgIHZhciBjb250YWN0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5Db250YWN0cy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMuQWNjb3VudElkID09PSBhY2NvdW50SWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGNvbnRhY3QpIHsKICAgICAgICBjb25zb2xlLmxvZygiIi5jb25jYXQoYWNjb3VudElkKSk7CiAgICAgIH0KCiAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEudmlld2VkUHJvZmlsZS5pc0xvYWRpbmcgPSB0cnVlOwogICAgICB3aW5kb3cubXAudHJpZ2dlclNlcnZlcigncGhvbmU6Om1zZzo6cmVxdWVzdEFjY291bnQnLCBhY2NvdW50SWQpOwogICAgICBjb21taXQoJ3NtYXJ0cGhvbmUvc2V0Q3VycmVudFRhYicsIHsKICAgICAgICBrZXk6ICdNZXNzZW5nZXJUYWInLAogICAgICAgIHNlY3Rpb246ICdWaWV3ZWRQcm9maWxlU2VjdGlvbicsCiAgICAgICAgZGF0YTogbnVsbAogICAgICB9LCB7CiAgICAgICAgcm9vdDogdHJ1ZQogICAgICB9KTsKICAgIH0sCiAgICBtc2dfc2V0QWNjb3VudEFuZENoYXRNdXRlZDogZnVuY3Rpb24gbXNnX3NldEFjY291bnRBbmRDaGF0TXV0ZWQoX3JlZjI0LCBfcmVmMjUpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyNC5jb21taXQsCiAgICAgICAgICBzdGF0ZSA9IF9yZWYyNC5zdGF0ZTsKICAgICAgdmFyIENoYXRJZCA9IF9yZWYyNS5DaGF0SWQsCiAgICAgICAgICBBY2NvdW50SWQgPSBfcmVmMjUuQWNjb3VudElkLAogICAgICAgICAgSXNNdXRlZCA9IF9yZWYyNS5Jc011dGVkOwogICAgICBjb21taXQoJ21zZ19zZXRDaGF0TXV0ZWQnLCB7CiAgICAgICAgQ2hhdElkOiBDaGF0SWQsCiAgICAgICAgSXNNdXRlZDogSXNNdXRlZAogICAgICB9KTsKCiAgICAgIGlmIChzdGF0ZS5tZXNzZW5nZXJEYXRhLnZpZXdlZFByb2ZpbGUuSWQgPT09IEFjY291bnRJZCkgewogICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEudmlld2VkUHJvZmlsZS5Jc011dGVkID0gSXNNdXRlZDsKICAgICAgfQogICAgfSwKICAgIG1zZ19zZXRBY2NvdW50QmxvY2tlZDogZnVuY3Rpb24gbXNnX3NldEFjY291bnRCbG9ja2VkKF9yZWYyNiwgX3JlZjI3KSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWYyNi5zdGF0ZTsKICAgICAgdmFyIEFjY291bnRJZCA9IF9yZWYyNy5BY2NvdW50SWQsCiAgICAgICAgICBJc0Jsb2NrZWQgPSBfcmVmMjcuSXNCbG9ja2VkOwoKICAgICAgaWYgKHN0YXRlLm1lc3NlbmdlckRhdGEudmlld2VkUHJvZmlsZS5JZCA9PT0gQWNjb3VudElkKSB7CiAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS52aWV3ZWRQcm9maWxlLklzQmxvY2tlZCA9IElzQmxvY2tlZDsKICAgICAgfQogICAgfSwKICAgIG1zZ19yZW1vdmVDb250YWN0OiBmdW5jdGlvbiBtc2dfcmVtb3ZlQ29udGFjdChfcmVmMjgsIF9yZWYyOSkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjI4LmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjI4LnN0YXRlOwogICAgICB2YXIgQ29udGFjdElkID0gX3JlZjI5LkNvbnRhY3RJZCwKICAgICAgICAgIEFjY291bnREaXNwbGF5ZWROYW1lID0gX3JlZjI5LkFjY291bnREaXNwbGF5ZWROYW1lOwogICAgICB2YXIgY29udGFjdCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ29udGFjdHMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLklkID09PSBDb250YWN0SWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGNvbnRhY3QpIHsKICAgICAgICB2YXIgcHJpdmF0ZUNoYXQgPSBzdGF0ZS5tZXNzZW5nZXJEYXRhLkNoYXRzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgIHJldHVybiBjLkFjY291bnRJZCA9PSBjb250YWN0LkFjY291bnRJZDsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKHByaXZhdGVDaGF0KSB7CiAgICAgICAgICBjb21taXQoJ21zZ19yZW5hbWVDaGF0JywgewogICAgICAgICAgICBDaGF0SWQ6IHByaXZhdGVDaGF0LklkLAogICAgICAgICAgICBOYW1lOiBBY2NvdW50RGlzcGxheWVkTmFtZQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoc3RhdGUubWVzc2VuZ2VyRGF0YS52aWV3ZWRQcm9maWxlLklkID09PSBjb250YWN0LkFjY291bnRJZCkgewogICAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS52aWV3ZWRQcm9maWxlLkRpc3BsYXllZE5hbWUgPSBBY2NvdW50RGlzcGxheWVkTmFtZTsKICAgICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEudmlld2VkUHJvZmlsZS5Jc0luQ29udGFjdHMgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbW1pdCgnbXNnX3JlbW92ZVN0b3JlQ29udGFjdCcsIENvbnRhY3RJZCk7CiAgICB9LAogICAgbXNnX2FkZENvbnRhY3Q6IGZ1bmN0aW9uIG1zZ19hZGRDb250YWN0KF9yZWYzMCwgY29udGFjdCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjMwLmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjMwLnN0YXRlOwoKICAgICAgaWYgKHN0YXRlLm1lc3NlbmdlckRhdGEudmlld2VkUHJvZmlsZS5JZCA9PT0gY29udGFjdC5BY2NvdW50SWQpIHsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLnZpZXdlZFByb2ZpbGUuRGlzcGxheWVkTmFtZSA9IGNvbnRhY3QuTmFtZTsKICAgICAgICBzdGF0ZS5tZXNzZW5nZXJEYXRhLnZpZXdlZFByb2ZpbGUuSXNJbkNvbnRhY3RzID0gdHJ1ZTsKICAgICAgfQoKICAgICAgY29tbWl0KCdtc2dfbG9hZENvbnRhY3RzJywgW2NvbnRhY3RdKTsKICAgIH0sCiAgICBtc2dfbG9hZENoYXQ6IGZ1bmN0aW9uIG1zZ19sb2FkQ2hhdChfcmVmMzEsIGNoYXQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzMS5jb21taXQsCiAgICAgICAgICBzdGF0ZSA9IF9yZWYzMS5zdGF0ZTsKCiAgICAgIGlmICghY2hhdC5TdWJzY3JpYmVyc0NvdW50KSB7CiAgICAgICAgY2hhdC5TdWJzY3JpYmVyc0NvdW50ID0gMDsKICAgICAgfQoKICAgICAgY29tbWl0KCdtc2dfbG9hZENoYXRzJywgW2NoYXRdKTsKCiAgICAgIGlmIChzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklkID09PSAtMSB8fCBzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklkID09PSBjaGF0LklkKSB7CiAgICAgICAgd2luZG93Lm1wLnRyaWdnZXJTZXJ2ZXIoJ3Bob25lOjptc2c6OnJlcXVlc3RDaGF0JywgY2hhdC5JZCk7CiAgICAgIH0KICAgIH0sCiAgICBtc2dfY3JlYXRlQ2hhdDogZnVuY3Rpb24gbXNnX2NyZWF0ZUNoYXQoX3JlZjMyLCBfcmVmMzMpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzMi5jb21taXQ7CiAgICAgIHZhciBDaGF0VHlwZSA9IF9yZWYzMy5DaGF0VHlwZSwKICAgICAgICAgIE5hbWUgPSBfcmVmMzMuTmFtZSwKICAgICAgICAgIERlc2NyaXB0aW9uID0gX3JlZjMzLkRlc2NyaXB0aW9uLAogICAgICAgICAgSWNvbkNvbG9ycyA9IF9yZWYzMy5JY29uQ29sb3JzLAogICAgICAgICAgVXNlcnNUb0ludml0ZSA9IF9yZWYzMy5Vc2Vyc1RvSW52aXRlOwogICAgICBjb21taXQoJ21zZ19zZXRDdXJyZW50Q2hhdCcsIHsKICAgICAgICBJZDogLTEsCiAgICAgICAgTmFtZTogTmFtZSwKICAgICAgICBJc09ubGluZTogZmFsc2UsCiAgICAgICAgVHlwZTogQ2hhdFR5cGUsCiAgICAgICAgSWNvbkNvbG9yczogSWNvbkNvbG9ycywKICAgICAgICBTdWJzY3JpYmVyc0NvdW50OiAwCiAgICAgIH0pOwogICAgICB2YXIgc3Vic2VjdGlvbnNCeUNoYXRUeXBlID0gewogICAgICAgIDA6ICdQcml2YXRlU3Vic2VjdGlvbicsCiAgICAgICAgMTogJ0dyb3VwU3Vic2VjdGlvbicsCiAgICAgICAgMjogJ0NhbmFsU3Vic2VjdGlvbicKICAgICAgfTsKICAgICAgY29tbWl0KCdzbWFydHBob25lL3NldEN1cnJlbnRUYWInLCB7CiAgICAgICAga2V5OiAnTWVzc2VuZ2VyVGFiJywKICAgICAgICBzZWN0aW9uOiAnQ2hhdFNlY3Rpb24nLAogICAgICAgIHN1YnNlY3Rpb246IHN1YnNlY3Rpb25zQnlDaGF0VHlwZVtDaGF0VHlwZV0sCiAgICAgICAgZGF0YTogbnVsbAogICAgICB9LCB7CiAgICAgICAgcm9vdDogdHJ1ZQogICAgICB9KTsKICAgICAgY29tbWl0KCdtc2dfc2V0Q3VycmVudENoYXRJc0xvYWRpbmcnLCB0cnVlKTsKCiAgICAgIGlmIChDaGF0VHlwZSA9PT0gMSkgewogICAgICAgIHdpbmRvdy5tcC50cmlnZ2VyU2VydmVyKCdwaG9uZTo6bXNnOjpjcmVhdGVHcm91cENoYXQnLCBOYW1lLCBEZXNjcmlwdGlvbiwgSWNvbkNvbG9ycywgSlNPTi5zdHJpbmdpZnkoVXNlcnNUb0ludml0ZSkpOwogICAgICB9IGVsc2UgaWYgKENoYXRUeXBlID09PSAyKSB7CiAgICAgICAgd2luZG93Lm1wLnRyaWdnZXJTZXJ2ZXIoJ3Bob25lOjptc2c6OmNyZWF0ZUNoYW5uZWwnLCBOYW1lLCBEZXNjcmlwdGlvbiwgSWNvbkNvbG9ycyk7CiAgICAgIH0KICAgIH0sCiAgICBtc2dfc2VuZE1lc3NhZ2U6IGZ1bmN0aW9uIG1zZ19zZW5kTWVzc2FnZShfcmVmMzQsIF9yZWYzNSkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjM0LmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjM0LnN0YXRlLAogICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMzQuZGlzcGF0Y2g7CiAgICAgIHZhciBDaGF0SWQgPSBfcmVmMzUuQ2hhdElkLAogICAgICAgICAgTWVzc2FnZSA9IF9yZWYzNS5NZXNzYWdlOwogICAgICBNZXNzYWdlLkNoYXRJZCA9IENoYXRJZDsKICAgICAgTWVzc2FnZS5UaW1lICo9IDEwMDA7CiAgICAgIGNvbW1pdCgnbXNnX2NhY2hlTWVzc2FnZScsIE1lc3NhZ2UpOwogICAgICBjb21taXQoJ21zZ19zZXRMYXN0TWVzc2FnZScsIE1lc3NhZ2UpOwoKICAgICAgaWYgKCFzdGF0ZS5tZXNzZW5nZXJEYXRhLl9jYWNoZWRBY2NvdW50cy5maW5kKGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIGEuSWQgPT09IE1lc3NhZ2UuU2VuZGVySWQ7CiAgICAgIH0pKSB7CiAgICAgICAgd2luZG93Lm1wLnRyaWdnZXJTZXJ2ZXIoJ3Bob25lOjptc2c6OnJlcXVlc3RBY2NvdW50c05hbWVzJywgIlsiLmNvbmNhdChNZXNzYWdlLlNlbmRlcklkLCAiXSIpKTsKICAgICAgfQoKICAgICAgaWYgKHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSWQgPT09IENoYXRJZCkgewogICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSXRlbXMucHVzaChNZXNzYWdlKTsKCiAgICAgICAgaWYgKE1lc3NhZ2UuU2VuZGVySWQgIT09IHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudEFjY291bnQuSWQpIHsKICAgICAgICAgIHdpbmRvdy5tcC50cmlnZ2VyU2VydmVyKCdwaG9uZTo6bXNnOjptYXJrQXNSZWFkJywgQ2hhdElkKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoTWVzc2FnZS5TZW5kZXJJZCAhPT0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50QWNjb3VudC5JZCkgewogICAgICAgIHZhciBjaGF0ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICByZXR1cm4gYy5JZCA9PT0gQ2hhdElkOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoY2hhdCkgewogICAgICAgICAgY2hhdC5Ob25SZWFkTWVzc2FnZXNDb3VudCsrOwoKICAgICAgICAgIGlmICghY2hhdC5Jc011dGVkKSB7CiAgICAgICAgICAgIGRpc3BhdGNoKCdzbWFydHBob25lL3NvdW5kc19wbGF5Tm90aWZpY2F0aW9uJywgewogICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgbXNnX2RlbGV0ZU1lc3NhZ2U6IGZ1bmN0aW9uIG1zZ19kZWxldGVNZXNzYWdlKF9yZWYzNiwgTWVzc2FnZUlkKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMzYuY29tbWl0LAogICAgICAgICAgc3RhdGUgPSBfcmVmMzYuc3RhdGU7CiAgICAgIGNvbW1pdCgnbXNnX3VuY2FjaGVNZXNzYWdlJywgTWVzc2FnZUlkKTsKCiAgICAgIGlmIChzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0Lkl0ZW1zKSB7CiAgICAgICAgdmFyIG1zZ0lkeCA9IHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSXRlbXMuZmluZEluZGV4KGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICByZXR1cm4gbS5JZCA9PT0gTWVzc2FnZUlkOwogICAgICAgIH0pOwoKICAgICAgICBpZiAobXNnSWR4ICE9PSAtMSkgewogICAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JdGVtcy5zcGxpY2UobXNnSWR4LCAxKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBtc2dfZWRpdE1lc3NhZ2U6IGZ1bmN0aW9uIG1zZ19lZGl0TWVzc2FnZShfcmVmMzcsIF9yZWYzOCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjM3LmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjM3LnN0YXRlOwogICAgICB2YXIgQ2hhdElkID0gX3JlZjM4LkNoYXRJZCwKICAgICAgICAgIE1lc3NhZ2UgPSBfcmVmMzguTWVzc2FnZTsKICAgICAgTWVzc2FnZS5DaGF0SWQgPSBDaGF0SWQ7CiAgICAgIE1lc3NhZ2UuVGltZSAqPSAxMDAwOwogICAgICBjb21taXQoJ21zZ19jYWNoZU1lc3NhZ2UnLCBNZXNzYWdlKTsKCiAgICAgIGlmIChzdGF0ZS5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklkID09PSBDaGF0SWQpIHsKICAgICAgICB2YXIgbXNnSWR4ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JdGVtcy5maW5kSW5kZXgoZnVuY3Rpb24gKG0pIHsKICAgICAgICAgIHJldHVybiBtLklkID09PSBNZXNzYWdlLklkOwogICAgICAgIH0pOwoKICAgICAgICBpZiAobXNnSWR4ICE9PSAtMSkgewogICAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JdGVtcy5zcGxpY2UobXNnSWR4LCAxKTsKICAgICAgICAgIHN0YXRlLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSXRlbXMucHVzaChNZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBtc2dfZGVsZXRlQ2hhdDogZnVuY3Rpb24gbXNnX2RlbGV0ZUNoYXQoX3JlZjM5LCBjaGF0SWQpIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZjM5LnN0YXRlLAogICAgICAgICAgY29tbWl0ID0gX3JlZjM5LmNvbW1pdDsKICAgICAgY29tbWl0KCdtc2dfcmVtb3ZlQ2hhdCcsIGNoYXRJZCk7CgogICAgICBpZiAoc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JZCA9PT0gY2hhdElkKSB7CiAgICAgICAgY29tbWl0KCdzbWFydHBob25lL3NldEN1cnJlbnRUYWInLCB7CiAgICAgICAgICBrZXk6ICdNZXNzZW5nZXJUYWInLAogICAgICAgICAgc2VjdGlvbjogJ0dlbmVyYWxTZWN0aW9uJywKICAgICAgICAgIHN1YnNlY3Rpb246ICdHZW5lcmFsU3Vic2VjdGlvbicsCiAgICAgICAgICBkYXRhOiBudWxsCiAgICAgICAgfSwgewogICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgbXNnX3NldEluQ2hhdEJsb2NrZWQ6IGZ1bmN0aW9uIG1zZ19zZXRJbkNoYXRCbG9ja2VkKF9yZWY0MCwgX3JlZjQxKSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWY0MC5zdGF0ZSwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjQwLmRpc3BhdGNoOwogICAgICB2YXIgQ2hhdElkID0gX3JlZjQxLkNoYXRJZCwKICAgICAgICAgIElzQmxvY2tlZCA9IF9yZWY0MS5Jc0Jsb2NrZWQ7CgogICAgICBpZiAoc3RhdGUubWVzc2VuZ2VyRGF0YS5DdXJyZW50Q2hhdC5JZCA9PT0gQ2hhdElkKSB7CiAgICAgICAgZGlzcGF0Y2goJ3NtYXJ0cGhvbmUvbXNnX2dvVG9DaGF0cycsIHRydWUsIHsKICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKElzQmxvY2tlZCkgewogICAgICAgIHZhciBjaGF0SWR4ID0gc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5maW5kSW5kZXgoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgIHJldHVybiBjLklkID09PSBDaGF0SWQ7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChjaGF0SWR4ICE9PSAtMSkgewogICAgICAgICAgc3RhdGUubWVzc2VuZ2VyRGF0YS5DaGF0cy5zcGxpY2UoY2hhdElkeCwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["D:/downloads/UNIQ/Gui/src/store/smartphone/modules/message-page.js"],"names":["namespaced","state","messengerData","CurrentAccount","Id","Username","DisplayedName","IsNumberHided","SearchSubscribers","Chats","Contacts","_cachedAccounts","_cachedMessages","CurrentChat","Name","IsOnline","Type","IconColors","SubscribersCount","Items","IsLoading","CanalProfile","AdminLvl","Abilities","changeProfile","createPosts","deletePosts","appointmentAdmins","viewedProfile","Number","IsMuted","IsBlocked","LastVisitTime","IsInContacts","isLoading","mutations","setMessengerCanalProfileAbility","key","value","currentChat","chat","find","c","admin","Admins","a","Permissions","push","idx","indexOf","splice","window","mp","triggerServer","setMessengerCurrentChatIconColors","msg_setAccountSettings","accountSettings","msg_setSubscribersForSearch","subscribers","forEach","subscriber","msg_loadContacts","contacts","contact","Time","oldContactIndex","findIndex","privateChat","AccountId","msg_removeStoreContact","contactId","contactIndex","msg_setContactIsOnline","isOnline","msg_loadChats","chats","chatIndex","ActionTime","LastMessage","CreatedTime","msg_removeChat","chatId","chatIdx","msg_cacheMessage","message","cachedMessageIndex","m","msg_uncacheMessage","messageId","msg_markChatMessagesAsRead","NonReadMessagesCount","msg_setOwnMessagesReadInChat","SenderId","IsRead","msg_setLastMessage","ChatId","msg_setCurrentChatIsLoading","toggle","msg_setCurrentChatMessages","messages","msg_setCurrentChat","Description","InviteCode","BlockItems","CanChangingGroupProfile","includes","CanDeletingMessages","CanBlockingAccounts","CanPurposingAdmins","CanCreatingPosts","msg_loadAccounts","accounts","account","accountIndex","msg_setChatMuted","msg_renameChat","msg_increaseSubscribersCount","msg_decreaseSubscribersCount","msg_removeFromBlocklist","blockIdx","b","msg_addBlocklistItems","i","bi","msg_setChatIsOnline","msg_setViewedProfileInfo","info","msg_setAccountDisplayedName","newDisplayedName","msg_setAccountIsNumberHided","isNumberHided","actions","checkChatIsLoading","dispatch","section","subsection","data","root","msg_dropCurrentChat","msg_setAdminsForCurrentChat","admins","msg_addAdminForChat","s","msg_deleteAdminForChat","AdminId","adminIdx","msg_setMyAdminPermissionsForChat","msg_openChat","commit","subsectionsByChatType","IsAlreadyLoaded","filter","msg_openPrivateChat","accountId","msg_loadInchatInfo","Messages","sendersIds","Set","map","nonCachedAccountsIds","JSON","stringify","msg_openAccount","console","log","msg_setAccountAndChatMuted","msg_setAccountBlocked","msg_removeContact","ContactId","AccountDisplayedName","msg_addContact","msg_loadChat","msg_createChat","ChatType","UsersToInvite","msg_sendMessage","Message","msg_deleteMessage","MessageId","msgIdx","msg_editMessage","msg_deleteChat","msg_setInChatBlocked"],"mappings":"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","sourcesContent":["export default {\r\n  namespaced: true,\r\n  state: {\r\n    messengerData: {\r\n      CurrentAccount: {\r\n        Id: -1,\r\n        Username: 'milt',\r\n        DisplayedName: 'matvey',\r\n        IsNumberHided: false\r\n      },\r\n      SearchSubscribers: [\r\n        // { Id: 0, DisplayedName: 'Gay Man', LastVisitTime: 203331212332 }\r\n      ],\r\n      Chats: [\r\n        // { Id: 8, Name: 'First chat8', IsOnline: true, Type: 0, NonReadMessagesCount: 0,\r\n        // LastMessage: { Id: 0, ChatId: 0, Text: 'Hi! Who are you?', Type: 0,\r\n        // Time: 1603005132000, IsRead: false, Admins: [\r\n        //    { DisplayedName: 'Gondon', Id: 2, AdminLvl: 2, Permission: [0, 2, 3, 4] } \r\n        // ] } },\r\n      ],\r\n      Contacts: [\r\n        // { Id: 12, Name: 'სანტექნიკოსი', Number: 88005543535, Time: 1130443200000, IsOnline: true },\r\n      ],\r\n      _cachedAccounts: [\r\n        // { Id: 0, DisplayedName: 'факбой' }\r\n      ],\r\n      _cachedMessages: [\r\n\r\n      ],\r\n      CurrentChat: {\r\n        Id: 0,\r\n        Name: 'SJSJFKWPCOEJV SJEKRIFJANDLWR',\r\n        IsOnline: null,\r\n        Type: 0,\r\n        IconColors: 'linear-gradient(90deg, #43E97B 0%, #38F9D7 100%)',\r\n        SubscribersCount: 123,\r\n        Items: [\r\n          // { Id: 0, ChatId: 0, SenderId: 0, Text: 'Hi! Who are you? 😃😁', Attachment: null , Time: 1603202898482, IsRead: true },\r\n          // { Id: 1, ChatId: 0, SenderId: 1, Text: 'It`s me, nigga, ayo', Attachment: { Id: 1, Type: 2, Url: 'https://c4.wallpaperflare.com/wallpaper/500/442/354/outrun-vaporwave-hd-wallpaper-preview.jpg' }, Time: 1603202898487, IsRead: true },\r\n          // { Id: 0, ChatId: 0, SenderId: 1, Text: '', Attachment: { Id: 1, Type: 0, GeoMark: { X: 100, Y: 100, Z: 100} } , Time: 1603202898482, IsRead: true },\r\n          // { Id: 0, ChatId: 0, SenderId: 0, Text: '', Attachment: { Id: 1, Type: 0, GeoMark: { X: 100, Y: 100, Z: 100} } , Time: 1603202898482, IsRead: true },\r\n          // { Id: 1, ChatId: 0, SenderId: 0, Text: '', Attachment: { Id: 1, Type: 2, Url: 'https://c4.wallpaperflare.com/wallpaper/500/442/354/outrun-vaporwave-hd-wallpaper-preview.jpg' }, Time: 1603202898487, IsRead: true },\r\n          // { Id: 1, ChatId: 0, SenderId: 1, Text: '', Attachment: { Id: 1, Type: 2, Url: 'https://c4.wallpaperflare.com/wallpaper/500/442/354/outrun-vaporwave-hd-wallpaper-preview.jpg' }, Time: 1603202898487, IsRead: true },\r\n          // { Id: 2, ChatId: 0, SenderId: 2, Text: 'Mmm, ok.Mmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, ok', Time: 1603308898487, IsRead: false },\r\n          // { Id: 2, ChatId: 0, SenderId: 2, Text: 'Mmm, ok.Mmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, ok', Time: 1603308898487, IsRead: false },\r\n          // { Id: 2, ChatId: 0, SenderId: 2, Text: 'Mmm, ok.Mmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, ok', Time: 1603308898487, IsRead: false },\r\n          // { Id: 2, ChatId: 0, SenderId: 2, Text: 'Mmm, ok.Mmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, ok', Time: 1603308898487, IsRead: false },\r\n          // { Id: 2, ChatId: 0, SenderId: 2, Text: 'Mmm, ok.Mmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, okMmm, ok', Time: 1603308898487, IsRead: false },\r\n        ],\r\n        IsLoading: false,\r\n      },\r\n      CanalProfile: {\r\n        Name: 'Самый длинный ник в игре',\r\n        IsOnline: true,\r\n        AdminLvl: 2,\r\n        Abilities: {\r\n          changeProfile: true,\r\n          createPosts: false,\r\n          deletePosts: false,\r\n          appointmentAdmins: false\r\n        }\r\n      },\r\n      viewedProfile: {\r\n        Id: 1,\r\n        Username: 'username',\r\n        DisplayedName: 'Самый длинный ник в игре',\r\n        Number: 939394,\r\n        IsNumberHided: false,\r\n        IsMuted: false,\r\n        IsBlocked: false,\r\n        LastVisitTime: 1603959071000,\r\n        IsOnline: false,\r\n        IsInContacts: false,\r\n\r\n        isLoading: false\r\n      }\r\n    }\r\n\r\n  },\r\n  mutations: {\r\n    setMessengerCanalProfileAbility: function (state, { key, value }) {\r\n      const currentChat = state.messengerData.CurrentChat;\r\n      const chat = state.messengerData.Chats.find(c => c.Id === currentChat.Id);\r\n\r\n      const admin = chat.Admins.find(a => a.Id === state.messengerData.CanalProfile.Id);\r\n      if (admin) {\r\n        if (value) admin.Permissions.push(key);\r\n        else {\r\n          const idx = admin.Permissions.indexOf(key);\r\n          if (idx) admin.Permissions.splice(idx, 1);\r\n        }\r\n      }\r\n\r\n      currentChat.Admins = chat.Admins;\r\n      state.messengerData.CanalProfile.Permissions = admin.Permissions;\r\n\r\n      window.mp.triggerServer('phone::msg::manage::setAccountPermission', chat.Id, admin.Id, key, value);\r\n\r\n    },\r\n\r\n    setMessengerCurrentChatIconColors: function (state, value) {\r\n      state.messengerData.CurrentChat.IconColors = value\r\n    },\r\n\r\n    msg_setAccountSettings: function (state, accountSettings) {\r\n      state.messengerData.CurrentAccount = accountSettings;\r\n    },\r\n\r\n    //#region Msg Contacts\r\n    msg_setSubscribersForSearch: function (state, subscribers) {\r\n      subscribers.forEach(subscriber => {\r\n        if (subscriber.LastVisitTime)\r\n          subscribers.LastVisitTime *= 1000;\r\n      });\r\n\r\n      state.messengerData.SearchSubscribers = subscribers;\r\n    },\r\n\r\n    msg_loadContacts: function (state, contacts) {\r\n      contacts.forEach(contact => {\r\n        if (contact.Time)\r\n          contact.Time *= 1000;\r\n\r\n        const oldContactIndex = state.messengerData.Contacts.findIndex(c => c.Id === contact.Id);\r\n        if (oldContactIndex === -1) {\r\n          state.messengerData.Contacts.push(contact);\r\n        }\r\n        else {\r\n          state.messengerData.Contacts[oldContactIndex] = contact;\r\n        }\r\n\r\n        const privateChat = state.messengerData.Chats.find(c => c.AccountId === contact.AccountId);\r\n        if (privateChat) {\r\n          privateChat.Name = contact.Name;\r\n        }\r\n      });\r\n    },\r\n\r\n    msg_removeStoreContact: function (state, contactId) {\r\n      const contactIndex = state.messengerData.Contacts.findIndex(c => c.Id === contactId);\r\n      if (contactIndex !== -1) {\r\n        state.messengerData.Contacts.splice(contactIndex, 1);\r\n      }\r\n    },\r\n\r\n    msg_setContactIsOnline: function (state, { contactId, isOnline}) {\r\n      const contactIndex = state.messengerData.Contacts.findIndex(c => c.Id === contactId);\r\n      if (contactIndex !== -1) {\r\n        state.messengerData.Contacts[contactIndex].IsOnline = isOnline\r\n      }\r\n    },\r\n    //#endregion Msg Contacts\r\n\r\n    //#region Msg Chats\r\n    msg_loadChats: function (state, chats) {\r\n      chats.forEach(chat => {\r\n        const chatIndex = state.messengerData.Chats.findIndex(c => c.Id === chat.Id);\r\n\r\n        chat.ActionTime = chat.LastMessage?.Time ?? chat.CreatedTime;\r\n        chat.ActionTime *= 1000;\r\n\r\n        if (chatIndex === -1) {\r\n          state.messengerData.Chats.push(chat);\r\n        }\r\n        else {\r\n          state.messengerData.Chats.splice(chatIndex, 1);\r\n          state.messengerData.Chats.push(chat);\r\n        }\r\n      });\r\n    },\r\n\r\n    msg_removeChat: function (state, chatId) {\r\n      const chatIdx = state.messengerData.Chats.findIndex(c => c.Id === chatId);\r\n      if (chatIdx !== -1) {\r\n        state.messengerData.Chats.splice(chatIdx, 1);\r\n      }\r\n    },\r\n\r\n    msg_cacheMessage: function (state, message) {\r\n      const cachedMessageIndex = state.messengerData._cachedMessages.findIndex(m => m.Id === message.Id);\r\n      if (cachedMessageIndex === -1) {\r\n        state.messengerData._cachedMessages.push(message);\r\n      }\r\n      else {\r\n        state.messengerData._cachedMessages[cachedMessageIndex] = message;\r\n      }\r\n    },\r\n\r\n    msg_uncacheMessage: function (state, messageId) {\r\n      const cachedMessageIndex = state.messengerData._cachedMessages.findIndex(m => m.Id === messageId);\r\n      if (cachedMessageIndex !== -1) {\r\n        state.messengerData._cachedMessages.splice(cachedMessageIndex, 1);\r\n      }\r\n    },\r\n\r\n    msg_markChatMessagesAsRead: function (state, chatId) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === chatId);\r\n      if (chat) {\r\n        chat.NonReadMessagesCount = 0;\r\n      }\r\n    },\r\n\r\n    msg_setOwnMessagesReadInChat: function (state, chatId) {\r\n      if (state.messengerData.CurrentChat.Id === chatId) {\r\n        state.messengerData.CurrentChat.Items.forEach(m => {\r\n          if (m.SenderId === state.messengerData.CurrentAccount.Id) {\r\n            m.IsRead = true;\r\n          }\r\n        });\r\n      }\r\n\r\n      state.messengerData._cachedMessages.forEach(m => {\r\n        if (m.SenderId === state.messengerData.CurrentAccount.Id) {\r\n          m.IsRead = true;\r\n        }\r\n      });\r\n    },\r\n\r\n    msg_setLastMessage: function (state, message) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === message.ChatId);\r\n      if (chat) {\r\n        chat.LastMessage = message;\r\n        chat.ActionTime = message.Time;\r\n      }\r\n    },\r\n\r\n    msg_setCurrentChatIsLoading: function (state, toggle) {\r\n      state.messengerData.CurrentChat.IsLoading = toggle;\r\n    },\r\n\r\n    msg_setCurrentChatMessages: function (state, messages) {\r\n      state.messengerData.CurrentChat.Items = messages;\r\n      state.messengerData.CurrentChat.IsLoading = false;\r\n    },\r\n\r\n    msg_setCurrentChat: function (state, { Id, Name, IsOnline, Type, SubscribersCount,\r\n      AccountId, IconColors, Permissions, Description, AdminLvl, InviteCode, Admins, BlockItems\r\n    }) {\r\n      state.messengerData.CurrentChat = {\r\n        Id, Name, IsOnline, Type, AdminLvl, Description,\r\n        SubscribersCount, InviteCode, Admins, BlockItems\r\n      }\r\n\r\n      // Channel and group chats fields\r\n      if (Permissions) {\r\n        state.messengerData.CurrentChat.CanChangingGroupProfile = Permissions.includes(1);\r\n        state.messengerData.CurrentChat.CanDeletingMessages = Permissions.includes(2);\r\n        state.messengerData.CurrentChat.CanBlockingAccounts = Permissions.includes(3);\r\n        state.messengerData.CurrentChat.CanPurposingAdmins = Permissions.includes(4);\r\n        state.messengerData.CurrentChat.CanCreatingPosts = Permissions.includes(5);\r\n      }\r\n\r\n      if (IconColors) {\r\n        state.messengerData.CurrentChat.IconColors = IconColors;\r\n      }\r\n\r\n      // Private chats field\r\n      state.messengerData.CurrentChat.AccountId = AccountId;\r\n    },\r\n\r\n    msg_loadAccounts: function (state, accounts) {\r\n      accounts.forEach(account => {\r\n        const contact = state.messengerData.Contacts.find(c => c.AccountId === account.Id);\r\n        if (contact) {\r\n          account.DisplayedName = contact.Name;\r\n        }\r\n\r\n        const accountIndex = state.messengerData._cachedAccounts.findIndex(a => a.Id == account.Id);\r\n        if (accountIndex === -1) {\r\n          state.messengerData._cachedAccounts.push(account);\r\n        }\r\n        else {\r\n          state.messengerData._cachedAccounts[accountIndex] = account;\r\n        }\r\n      });\r\n    },\r\n\r\n    msg_setChatMuted: function (state, { ChatId, IsMuted }) {\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        state.messengerData.CurrentChat.IsMuted = IsMuted;\r\n      }\r\n\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      if (chat) {\r\n        chat.IsMuted = IsMuted;\r\n      }\r\n    },\r\n\r\n    msg_renameChat: function (state, { ChatId, Name }) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      if (chat) {\r\n        chat.Name = Name;\r\n      }\r\n\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        state.messengerData.CurrentChat.Name = Name;\r\n      }\r\n    },\r\n\r\n    msg_increaseSubscribersCount: function (state, chatId) {\r\n      if (state.messengerData.CurrentChat.Id === chatId) {\r\n        state.messengerData.CurrentChat.SubscribersCount++;\r\n      }\r\n\r\n      const chat = state.messengerData.Chats.find(c => c.Id === chatId);\r\n      if (chat) {\r\n        if (!chat.SubscribersCount) {\r\n          chat.SubscribersCount = 0;\r\n        }\r\n\r\n        chat.SubscribersCount++;\r\n      }\r\n    },\r\n\r\n    msg_decreaseSubscribersCount: function (state, chatId) {\r\n      if (state.messengerData.CurrentChat.Id === chatId) {\r\n        state.messengerData.CurrentChat.SubscribersCount--;\r\n      }\r\n\r\n      const chat = state.messengerData.Chats.find(c => c.Id === chatId);\r\n      if (chat) {\r\n        if (!chat.SubscribersCount) {\r\n          chat.SubscribersCount = 0;\r\n        }\r\n\r\n        chat.SubscribersCount--;\r\n      }\r\n    },\r\n\r\n    msg_removeFromBlocklist: function (state, { ChatId, AccountId }) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      if (!chat)\r\n        return;\r\n\r\n      const blockIdx = chat.BlockItems.findIndex(b => b.AccountId === AccountId);\r\n      if (blockIdx === -1)\r\n        return;\r\n\r\n      chat.BlockItems.splice(blockIdx, 1);\r\n\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        state.messengerData.CurrentChat.BlockItems = chat.BlockItems;\r\n      }\r\n    },\r\n\r\n    msg_addBlocklistItems: function (state, { ChatId, BlockItems }) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      if (chat) {\r\n        if (!chat.BlockItems)\r\n          chat.BlockItems = [];\r\n\r\n        BlockItems.forEach(i => {\r\n          if (!chat.BlockItems.find(bi => bi.Id === i.Id)) {\r\n            chat.BlockItems.push(i);\r\n          }\r\n        });\r\n      }\r\n\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        state.messengerData.CurrentChat.BlockItems = chat.BlockItems;\r\n      }\r\n    },\r\n\r\n    msg_setChatIsOnline: function (state, { ChatId, IsOnline }) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      if (chat) {\r\n        chat.IsOnline = IsOnline;\r\n      }\r\n\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        state.messengerData.CurrentChat.IsOnline = chat.IsOnline;\r\n      }\r\n    },\r\n    //#endregion Msg Chats\r\n\r\n    msg_setViewedProfileInfo: function (state, info) {\r\n      info.IsInContacts = false;\r\n\r\n      const contact = state.messengerData.Contacts.find(c => c.AccountId === info.Id);\r\n      if (contact) {\r\n        info.DisplayedName = contact.Name;\r\n        info.IsInContacts = true;\r\n      }\r\n\r\n      info.isLoading = false;\r\n      info.LastVisitTime*=1000;\r\n      state.messengerData.viewedProfile = info;\r\n    },\r\n\r\n    msg_setAccountDisplayedName: function (state, { newDisplayedName }) {\r\n      state.messengerData.CurrentAccount.DisplayedName = newDisplayedName;\r\n    },\r\n\r\n    msg_setAccountIsNumberHided: function (state, isNumberHided) {\r\n      state.messengerData.CurrentAccount.IsNumberHided = isNumberHided;\r\n    },\r\n\r\n  },\r\n\r\n  actions: {\r\n\r\n    checkChatIsLoading: function ({ state, dispatch }) {\r\n      if (state.messengerData.CurrentChat.IsLoading) {\r\n        dispatch('smartphone/setTabOrBack', { key: 'MessengerTab', section: 'GeneralSection', subsection: 'GeneralSubsection', data: null }, { root: true });\r\n        state.messengerData.CurrentChat.IsLoading = false;\r\n      }\r\n      else if (state.messengerData.viewedProfile.IsLoading) {\r\n        dispatch('smartphone/setTabOrBack', { key: 'MessengerTab', section: 'GeneralSection', subsection: 'GeneralSubsection', data: null }, { root: true });\r\n        state.messengerData.viewedProfile.IsLoading = false;\r\n      }\r\n    },\r\n\r\n    msg_dropCurrentChat: function ({ state }) {\r\n      state.messengerData.CurrentChat.Id = -1;\r\n    },\r\n\r\n    msg_setAdminsForCurrentChat: function ({ state }, admins) {\r\n      const chatId = state.messengerData.CurrentChat.Id;\r\n      const chat = state.messengerData.Chats.find(c => c.Id === chatId);\r\n      if (!chat) {\r\n        return;\r\n      }\r\n\r\n      state.messengerData.CurrentChat.Admins = admins;\r\n      chat.Admins = admins;\r\n    },\r\n\r\n    msg_addAdminForChat: function ({ state }, { ChatId, AccountId }) {\r\n      const subscriber = state.messengerData.SearchSubscribers.find(s => s.Id === AccountId);\r\n      if (!subscriber) return;\r\n\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      if (!chat) return;\r\n\r\n      subscriber.AdminLvl = 1;\r\n      subscriber.Permissions = [];\r\n\r\n      chat.Admins.push(subscriber);\r\n\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        state.messengerData.CurrentChat.Admins.push(subscriber);\r\n      }\r\n    },\r\n\r\n    msg_deleteAdminForChat: function ({ state }, { ChatId, AdminId }) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      if (!chat) return;\r\n\r\n      const adminIdx = chat.Admins.findIndex(a => a.Id === AdminId);\r\n      if (adminIdx !== -1) {\r\n        chat.Admins.splice(adminIdx, 1);\r\n      }\r\n\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        state.messengerData.CurrentChat.Admins = chat.Admins;\r\n      }\r\n    },\r\n\r\n    msg_setMyAdminPermissionsForChat: function ({ state }, { ChatId, AdminLvl, Permissions }) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      if (!chat) return;\r\n\r\n      chat.Permissions = Permissions;\r\n      chat.AdminLvl = AdminLvl;\r\n    },\r\n\r\n    msg_openChat: function ({ commit, state }, chatId) {\r\n      const chat = state.messengerData.Chats.find(c => c.Id === chatId);\r\n\r\n      const subsectionsByChatType = {\r\n        0: 'PrivateSubsection',\r\n        1: 'GroupSubsection',\r\n        2: 'CanalSubsection'\r\n      }\r\n\r\n      commit('msg_setCurrentChat', chat);\r\n\r\n      // IsAlreadyLoaded - у игрока уже подгружены последние сообщения в чате\r\n      if (chat.IsAlreadyLoaded) {\r\n        const messages = state.messengerData._cachedMessages.filter(m => m.ChatId === chatId);\r\n        commit('msg_setCurrentChatMessages', messages);\r\n      }\r\n      else {\r\n        window.mp.triggerServer('phone::msg::requestChat', chatId);\r\n        commit('msg_setCurrentChatIsLoading', true);\r\n      }\r\n\r\n      commit('smartphone/setCurrentTab', {\r\n        key: 'MessengerTab',\r\n        section: 'ChatSection',\r\n        subsection: subsectionsByChatType[chat.Type],\r\n        data: null\r\n      }, { root: true });\r\n\r\n      if (chat.NonReadMessagesCount > 0) {\r\n        window.mp.triggerServer('phone::msg::markAsRead', chatId);\r\n      }\r\n    },\r\n\r\n    msg_openPrivateChat: function ({ dispatch, commit, state }, accountId) {\r\n      const privateChat = state.messengerData.Chats.find(c => c.AccountId === accountId);\r\n      if (privateChat) {\r\n        dispatch('msg_openChat', privateChat.Id);\r\n      }\r\n      else {\r\n        commit('msg_setCurrentChatIsLoading', true);\r\n        commit('msg_setCurrentChat', {\r\n          Id: -1,\r\n          Name: 'Private Chat',\r\n          IsOnline: false,\r\n          Type: 0,\r\n          AccountId: accountId\r\n        });\r\n\r\n        window.mp.triggerServer('phone::msg::createPrivateChat', accountId);\r\n        commit('smartphone/setCurrentTab', {\r\n          key: 'MessengerTab',\r\n          section: 'ChatSection',\r\n          subsection: 'PrivateSubsection',\r\n          data: null\r\n        }, { root: true });\r\n      }\r\n    },\r\n\r\n    msg_loadInchatInfo: function ({ commit, state }, { ChatId, SubscribersCount,\r\n      Messages, Permissions, AdminLvl, InviteCode\r\n    }) {\r\n      Messages.forEach(message => {\r\n        message.Time *= 1000;\r\n        message.ChatId = ChatId;\r\n        commit('msg_cacheMessage', message);\r\n      });\r\n\r\n      const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n      chat.SubscribersCount = SubscribersCount;\r\n      chat.Permissions = Permissions;\r\n      chat.IsAlreadyLoaded = true;\r\n      chat.AdminLvl = AdminLvl;\r\n      chat.InviteCode = InviteCode\r\n\r\n      commit('msg_setCurrentChat', chat);\r\n      commit('msg_setCurrentChatMessages', Messages);\r\n\r\n      // Подгрузка незакешированных аккаунтов\r\n      const sendersIds = [...new Set(Messages.map(m => m.SenderId))];\r\n      const nonCachedAccountsIds = sendersIds\r\n        .filter(accountId => !state.messengerData._cachedAccounts.find(a => a.Id === accountId));\r\n\r\n      window.mp.triggerServer('phone::msg::requestAccountsNames', JSON.stringify(nonCachedAccountsIds));\r\n    },\r\n\r\n    msg_openAccount: function ({ commit, state }, accountId) {\r\n      const contact = state.messengerData.Contacts.find(c => c.AccountId === accountId);\r\n      if (contact) {\r\n        console.log(`${accountId}`);\r\n      }\r\n\r\n      state.messengerData.viewedProfile.isLoading = true;\r\n      window.mp.triggerServer('phone::msg::requestAccount', accountId);\r\n\r\n      commit('smartphone/setCurrentTab', {\r\n        key: 'MessengerTab',\r\n        section: 'ViewedProfileSection',\r\n        data: null\r\n      }, { root: true });\r\n    },\r\n\r\n    msg_setAccountAndChatMuted: function ({ commit, state }, { ChatId, AccountId, IsMuted }) {\r\n      commit('msg_setChatMuted', { ChatId, IsMuted });\r\n\r\n      if (state.messengerData.viewedProfile.Id === AccountId) {\r\n        state.messengerData.viewedProfile.IsMuted = IsMuted;\r\n      }\r\n    },\r\n\r\n    msg_setAccountBlocked: function ({ state }, { AccountId, IsBlocked }) {\r\n      if (state.messengerData.viewedProfile.Id === AccountId) {\r\n        state.messengerData.viewedProfile.IsBlocked = IsBlocked;\r\n      }\r\n    },\r\n\r\n    msg_removeContact: function ({ commit, state }, { ContactId, AccountDisplayedName }) {\r\n      const contact = state.messengerData.Contacts.find(c => c.Id === ContactId);\r\n      if (contact) {\r\n        const privateChat = state.messengerData.Chats.find(c => c.AccountId == contact.AccountId);\r\n        if (privateChat) {\r\n          commit('msg_renameChat', { ChatId: privateChat.Id, Name: AccountDisplayedName });\r\n        }\r\n\r\n        if (state.messengerData.viewedProfile.Id === contact.AccountId) {\r\n          state.messengerData.viewedProfile.DisplayedName = AccountDisplayedName;\r\n          state.messengerData.viewedProfile.IsInContacts = false;\r\n        }\r\n      }\r\n\r\n      commit('msg_removeStoreContact', ContactId);\r\n    },\r\n\r\n    msg_addContact: function ({ commit, state }, contact) {\r\n      if (state.messengerData.viewedProfile.Id === contact.AccountId) {\r\n        state.messengerData.viewedProfile.DisplayedName = contact.Name;\r\n        state.messengerData.viewedProfile.IsInContacts = true;\r\n      }\r\n\r\n      commit('msg_loadContacts', [contact]);\r\n    },\r\n\r\n    msg_loadChat: function ({ commit, state }, chat) {\r\n      if (!chat.SubscribersCount) {\r\n        chat.SubscribersCount = 0;\r\n      }\r\n\r\n      commit('msg_loadChats', [chat]);\r\n\r\n      if (state.messengerData.CurrentChat.Id === -1 || state.messengerData.CurrentChat.Id === chat.Id) {\r\n        window.mp.triggerServer('phone::msg::requestChat', chat.Id);\r\n      }\r\n    },\r\n\r\n    msg_createChat: function ({ commit }, { ChatType, Name, Description, IconColors, UsersToInvite }) {\r\n      commit('msg_setCurrentChat', {\r\n        Id: -1,\r\n        Name: Name,\r\n        IsOnline: false,\r\n        Type: ChatType,\r\n        IconColors: IconColors,\r\n        SubscribersCount: 0\r\n      });\r\n\r\n      const subsectionsByChatType = {\r\n        0: 'PrivateSubsection',\r\n        1: 'GroupSubsection',\r\n        2: 'CanalSubsection'\r\n      }\r\n      commit('smartphone/setCurrentTab', {\r\n        key: 'MessengerTab',\r\n        section: 'ChatSection',\r\n        subsection: subsectionsByChatType[ChatType],\r\n        data: null\r\n      }, { root: true });\r\n\r\n      commit('msg_setCurrentChatIsLoading', true);\r\n      if (ChatType === 1) {\r\n        window.mp.triggerServer('phone::msg::createGroupChat', Name, Description, IconColors, JSON.stringify(UsersToInvite));\r\n      }\r\n      else if (ChatType === 2) {\r\n        window.mp.triggerServer('phone::msg::createChannel', Name, Description, IconColors);\r\n      }\r\n    },\r\n\r\n    msg_sendMessage({ commit, state, dispatch }, { ChatId, Message }) {\r\n      Message.ChatId = ChatId;\r\n      Message.Time *= 1000;\r\n      commit('msg_cacheMessage', Message);\r\n      commit('msg_setLastMessage', Message);\r\n\r\n      if (!state.messengerData._cachedAccounts.find(a => a.Id === Message.SenderId)) {\r\n        window.mp.triggerServer('phone::msg::requestAccountsNames', `[${Message.SenderId}]`);\r\n      }\r\n\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        state.messengerData.CurrentChat.Items.push(Message);\r\n\r\n        if (Message.SenderId !== state.messengerData.CurrentAccount.Id) {\r\n          window.mp.triggerServer('phone::msg::markAsRead', ChatId);\r\n        }\r\n      }\r\n      else if (Message.SenderId !== state.messengerData.CurrentAccount.Id) {\r\n        const chat = state.messengerData.Chats.find(c => c.Id === ChatId);\r\n        if (chat) {\r\n          chat.NonReadMessagesCount++;\r\n          if (!chat.IsMuted) {\r\n            dispatch('smartphone/sounds_playNotification', { root: true });\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    msg_deleteMessage({ commit, state }, MessageId) {\r\n      commit('msg_uncacheMessage', MessageId);\r\n\r\n      if (state.messengerData.CurrentChat.Items) {\r\n        const msgIdx = state.messengerData.CurrentChat.Items.findIndex(m => m.Id === MessageId);\r\n        if (msgIdx !== -1) {\r\n          state.messengerData.CurrentChat.Items.splice(msgIdx, 1);\r\n        }\r\n      }\r\n    },\r\n\r\n    msg_editMessage({ commit, state }, { ChatId, Message }) {\r\n      Message.ChatId = ChatId;\r\n      Message.Time *= 1000;\r\n      commit('msg_cacheMessage', Message);\r\n\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        const msgIdx = state.messengerData.CurrentChat.Items.findIndex(m => m.Id === Message.Id);\r\n        if (msgIdx !== -1) {\r\n          state.messengerData.CurrentChat.Items.splice(msgIdx, 1);\r\n          state.messengerData.CurrentChat.Items.push(Message);\r\n        }\r\n      }\r\n    },\r\n\r\n    msg_deleteChat({ state, commit }, chatId) {\r\n      commit('msg_removeChat', chatId);\r\n\r\n      if (state.messengerData.CurrentChat.Id === chatId) {\r\n        commit('smartphone/setCurrentTab', {\r\n          key: 'MessengerTab',\r\n          section: 'GeneralSection',\r\n          subsection: 'GeneralSubsection',\r\n          data: null\r\n        }, { root: true });\r\n      }\r\n    },\r\n\r\n    msg_setInChatBlocked({ state, dispatch }, { ChatId, IsBlocked }) {\r\n      if (state.messengerData.CurrentChat.Id === ChatId) {\r\n        dispatch('smartphone/msg_goToChats', true, { root: true });\r\n      }\r\n\r\n      if (IsBlocked) {\r\n        const chatIdx = state.messengerData.Chats.findIndex(c => c.Id === ChatId);\r\n        if (chatIdx !== -1) {\r\n          state.messengerData.Chats.splice(chatIdx, 1);\r\n        }\r\n      }\r\n    },\r\n  }\r\n}\r\n"]}]}