{"remainingRequest":"C:\\gta go\\Gui\\node_modules\\babel-loader\\lib\\index.js!C:\\gta go\\Gui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\gta go\\Gui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\gta go\\Gui\\src\\views\\Smartphone\\components\\MessengerTab\\components\\ChatSection\\PrivateSubsection\\MessagesBlockItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\gta go\\Gui\\src\\views\\Smartphone\\components\\MessengerTab\\components\\ChatSection\\PrivateSubsection\\MessagesBlockItem.vue","mtime":1625043597367},{"path":"C:\\gta go\\Gui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685190017390},{"path":"C:\\gta go\\Gui\\node_modules\\babel-loader\\lib\\index.js","mtime":1685190019507},{"path":"C:\\gta go\\Gui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685190017390},{"path":"C:\\gta go\\Gui\\node_modules\\vue-loader\\lib\\index.js","mtime":1685190022137}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovZ3RhIGdvL0d1aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IGdldFRleHRXaXRoRW1vamkgYXMgX2dldFRleHRXaXRoRW1vamkgfSBmcm9tICIuLi9jb21tb24vdGV4dEVtb2ppQ29udmVydGVyIjsKaW1wb3J0IHsgcmVwbGFjZVVybHNPblJlZnMgYXMgX3JlcGxhY2VVcmxzT25SZWZzIH0gZnJvbSAiLi4vY29tbW9uL2ludml0ZXNVcmxDb252ZXJ0ZXIiOwppbXBvcnQgeyBhZGRIYW5kbGVyc0Zvckludml0ZXNDbGljayB9IGZyb20gIi4uL2NvbW1vbi9pbnZpdGVzQ2xpY2tIYW5kbGVyIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdNZXNzYWdlc0Jsb2NrSXRlbScsCiAgcHJvcHM6IHsKICAgIGl0ZW06IE9iamVjdAogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKCdzbWFydHBob25lJywgWydnZW9sb2NhdGlvbiddKSksIG1hcFN0YXRlKCdzbWFydHBob25lL21lc3NhZ2VQYWdlJywgWydtZXNzZW5nZXJEYXRhJ10pKSwgbWFwR2V0dGVycygnbG9jYWxpemF0aW9uJywgWydsb2MnXSkpLCB7fSwgewogICAgaXNJbmNvbWU6IGZ1bmN0aW9uIGlzSW5jb21lKCkgewogICAgICByZXR1cm4gdGhpcy5tZXNzZW5nZXJEYXRhLkN1cnJlbnRBY2NvdW50LklkICE9PSB0aGlzLml0ZW0uU2VuZGVySWQ7CiAgICB9LAogICAgY3VycmVudFRpbWU6IGZ1bmN0aW9uIGN1cnJlbnRUaW1lKCkgewogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHRoaXMuaXRlbS5UaW1lKTsKICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAgdGltZVpvbmU6ICdVVEMnLAogICAgICAgIGhvdXI6ICdudW1lcmljJywKICAgICAgICBtaW51dGU6ICdudW1lcmljJwogICAgICB9OwogICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoJ3J1LVJVJywgb3B0aW9ucyk7CiAgICB9LAogICAgZGlzdGFuY2U6IGZ1bmN0aW9uIGRpc3RhbmNlKCkgewogICAgICBpZiAodGhpcy5pdGVtLkF0dGFjaG1lbnQuVHlwZSA9PT0gMCkgewogICAgICAgIHZhciBwb3MxID0gdGhpcy5nZW9sb2NhdGlvbi5jdXJyZW50UG9zaXRpb247CiAgICAgICAgdmFyIHBvczIgPSB0aGlzLml0ZW0uQXR0YWNobWVudDsKICAgICAgICByZXR1cm4gTWF0aC5jZWlsKHRoaXMuY2FsY3VsYXRlRGlzdGFuY2UocG9zMS5YLCBwb3MyLlgsIHBvczEuWSwgcG9zMi5ZLCBwb3MxLlosIHBvczIuWikpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9CiAgfSksCiAgbWV0aG9kczogewogICAgY2FsY3VsYXRlRGlzdGFuY2U6IGZ1bmN0aW9uIGNhbGN1bGF0ZURpc3RhbmNlKHgxLCB4MiwgeTEsIHkyLCB6MSwgejIpIHsKICAgICAgLy8gc3FydCgoeDEgLSB4MileMiArICh5MSAtIHkyKV4yICsgKHoxIC0gejIpXjIpCiAgICAgIHZhciBzcXVhcmUgPSBmdW5jdGlvbiBzcXVhcmUobnVtYmVyKSB7CiAgICAgICAgcmV0dXJuIE1hdGgucG93KG51bWJlciwgMik7CiAgICAgIH07CgogICAgICByZXR1cm4gTWF0aC5zcXJ0KHNxdWFyZSh4MSAtIHgyKSArIHNxdWFyZSh5MSAtIHkyKSArIHNxdWFyZSh6MSAtIHoyKSk7CiAgICB9LAogICAgZ2V0VGV4dFdpdGhFbW9qaTogZnVuY3Rpb24gZ2V0VGV4dFdpdGhFbW9qaSh0ZXh0KSB7CiAgICAgIHJldHVybiBfZ2V0VGV4dFdpdGhFbW9qaSh0ZXh0KTsKICAgIH0sCiAgICByZXBsYWNlVXJsc09uUmVmczogZnVuY3Rpb24gcmVwbGFjZVVybHNPblJlZnModGV4dCkgewogICAgICByZXR1cm4gX3JlcGxhY2VVcmxzT25SZWZzKHRleHQpOwogICAgfSwKICAgIHNldFdheXBvaW50OiBmdW5jdGlvbiBzZXRXYXlwb2ludCgpIHsKICAgICAgd2luZG93Lm1wLnRyaWdnZXIoJ3Bob25lOjptc2c6OnNldEdlb3Bvc2l0aW9uJywgdGhpcy5pdGVtLkF0dGFjaG1lbnQuWCwgdGhpcy5pdGVtLkF0dGFjaG1lbnQuWSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgaWYgKCF0aGlzLml0ZW0uQXR0YWNobWVudCB8fCB0aGlzLml0ZW0uQXR0YWNobWVudCA9PT0gbnVsbCkgewogICAgICB0aGlzLml0ZW0uQXR0YWNobWVudCA9IHt9OwogICAgfQoKICAgIGFkZEhhbmRsZXJzRm9ySW52aXRlc0NsaWNrKHRoaXMuJHJlZnNbJ3RleHRfbXNnJ10sIHRoaXMuJGJ1cyk7CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgaWYgKCF0aGlzLml0ZW0uQXR0YWNobWVudCB8fCB0aGlzLml0ZW0uQXR0YWNobWVudCA9PT0gbnVsbCkgewogICAgICB0aGlzLml0ZW0uQXR0YWNobWVudCA9IHt9OwogICAgfQogIH0KfTs="},{"version":3,"sources":["MessagesBlockItem.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div :class=\"[{ income: isIncome }, 'messages-block-item']\">\r\n \r\n    <div v-if=\"!isIncome\" class=\"messages-block-item__fit\"></div>\r\n    <div v-if=\"!isIncome\" class=\"messages-block-item__info\">\r\n      <div :class=\"[{ read: item.IsRead }, 'indicator']\"></div>\r\n      <span class=\"time\">{{ currentTime }}</span>\r\n    </div>\r\n    <div :class=\"[{ solo: !item.Text, 'solo-img': !item.Text }, 'messages-block-item__main']\">\r\n      <img\r\n        v-if=\"item.Attachment.Type === 2\"\r\n        :src=\"item.Attachment.Url\"\r\n        class=\"img\"\r\n      >\r\n      <div class=\"geolocation\" v-if=\"item.Attachment.Type === 0\">\r\n        <div class=\"geolocation__info\">\r\n          <span class=\"desc\">{{loc('phone:group:msgs:1')}}</span>\r\n          <span class=\"value\">{{ loc(`phone:group:msgs:2@${distance}`) }}</span>\r\n        </div>\r\n        <button class=\"geolocation__btn\" @click=\"setWaypoint\"></button>\r\n      </div>\r\n      <span ref=\"text_msg\" class=\"text\" v-html=\"replaceUrlsOnRefs(getTextWithEmoji(item.Text))\"></span>\r\n    </div>\r\n    <div v-if=\"isIncome\" class=\"messages-block-item__info\">\r\n      <div :class=\"[{ read: item.IsRead }, 'indicator']\"></div>\r\n      <span class=\"time\">{{ currentTime }}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState } from 'vuex'\r\nimport { getTextWithEmoji } from \"../common/textEmojiConverter\";\r\nimport { replaceUrlsOnRefs } from \"../common/invitesUrlConverter\";\r\nimport { addHandlersForInvitesClick } from \"../common/invitesClickHandler\";\r\n\r\nexport default {\r\n  name: 'MessagesBlockItem',\r\n\r\n  props: {\r\n    item: Object\r\n  },\r\n\r\n  computed: {\r\n    ...mapState('smartphone', ['geolocation']),\r\n    ...mapState('smartphone/messagePage', ['messengerData']),\r\n    ...mapGetters('localization', ['loc']),\r\n    isIncome: function() {\r\n      return this.messengerData.CurrentAccount.Id !== this.item.SenderId\r\n    },\r\n\r\n    currentTime: function() {\r\n      const date = new Date(this.item.Time)\r\n      const options = { timeZone: 'UTC', hour: 'numeric', minute: 'numeric' }\r\n      \r\n      return date.toLocaleTimeString('ru-RU', options)\r\n    },\r\n\r\n    distance: function() {\r\n      if (this.item.Attachment.Type === 0) {\r\n        const pos1 = this.geolocation.currentPosition\r\n        const pos2 = this.item.Attachment\r\n\r\n        return Math.ceil(this.calculateDistance(pos1.X, pos2.X, pos1.Y, pos2.Y, pos1.Z, pos2.Z))\r\n      }\r\n      else {\r\n        return null;\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    calculateDistance: function(x1, x2, y1, y2, z1, z2) {\r\n      // sqrt((x1 - x2)^2 + (y1 - y2)^2 + (z1 - z2)^2)\r\n      const square = (number) => Math.pow(number, 2) \r\n\r\n      return Math.sqrt(square(x1 - x2) + square(y1 - y2) + square(z1 - z2))\r\n    },\r\n\r\n    getTextWithEmoji: (text) => getTextWithEmoji(text),\r\n\r\n    replaceUrlsOnRefs: (text) => replaceUrlsOnRefs(text),\r\n    \r\n    setWaypoint: function() {\r\n      window.mp.trigger('phone::msg::setGeoposition', this.item.Attachment.X, this.item.Attachment.Y);\r\n    }\r\n  },\r\n\r\n  mounted: function() {\r\n    if (!this.item.Attachment || this.item.Attachment === null) {\r\n      this.item.Attachment = {}\r\n    }\r\n\r\n    addHandlersForInvitesClick(this.$refs['text_msg'], this.$bus);\r\n  },\r\n\r\n  created: function() {\r\n    if (!this.item.Attachment || this.item.Attachment === null) {\r\n      this.item.Attachment = {}\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.messages-block-item {\r\n  margin: 0.75rem 0.5rem 0 0.75rem;\r\n  display: flex;\r\n  align-items: flex-end;\r\n  &.income {\r\n    margin-left: 0.3rem;\r\n    .messages-block-item__info {\r\n      margin-left: 0.3rem;\r\n      .indicator {\r\n        display: none;\r\n      }\r\n    }\r\n    .message-block-item__content-filler {\r\n      width: auto;\r\n      display: block;\r\n    }\r\n    .geolocation {\r\n      &__info {\r\n        .desc {\r\n          color: #656F82;\r\n        }\r\n        .value {\r\n          color: #4E6ED9;\r\n        }\r\n      }\r\n      &__btn {\r\n        background: #4E6ED9;\r\n        &::after {\r\n          background: #fff;\r\n        }\r\n      }\r\n    }\r\n    .messages-block-item__main {\r\n      border-radius: 1rem 1rem 1rem 0;\r\n      max-width: max-content;\r\n      background: #FFFFFF;\r\n      color: #464646;\r\n    }\r\n  }\r\n  &__info {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: flex-end;\r\n    .indicator {\r\n      width: 0.8rem;\r\n      height: 0.8rem;\r\n      background: #A7B7EC;\r\n      mask: url(\"/img/hud/smartphone/messengerTab/chatSection/doubleTick.svg\") no-repeat center / contain;\r\n      &.read {\r\n        background: #4E6ED9;\r\n      }\r\n    }\r\n    .time {\r\n      color: #A7B7EC;\r\n      font-size: 0.65rem;\r\n      line-height: 0.8rem;\r\n    }\r\n  }\r\n  &__fit {\r\n    width: 5000px;\r\n  }\r\n  &__main {\r\n    max-width: max-content;\r\n    min-width: fit-content;\r\n    flex: auto;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: flex-end;\r\n    margin: 0 0 0 0.3rem;\r\n    font-size: 0.7rem;\r\n    line-height: 0.9rem;\r\n    color: #fff;\r\n    background: #4E6ED9;\r\n    border-radius: 1rem 1rem 0 1rem;\r\n    padding: 0.3rem;\r\n    &.solo {\r\n      .img {\r\n        margin: 0;\r\n      }\r\n      .geolocation {\r\n        margin: 0;\r\n      }\r\n    }\r\n    &.solo-img {\r\n      padding: 0;\r\n      border-radius: 1rem;\r\n    }\r\n    .geolocation {\r\n      display: flex;\r\n      align-items: flex-end;\r\n      justify-content: space-between;\r\n      height: 5.5rem;\r\n      width: 100%;\r\n      border-radius: 0.8rem;\r\n      margin: 0 0 0.4rem 0;\r\n      padding: 0 0.45rem 0.55rem 0.45rem;\r\n      background: center / cover no-repeat url(\"/img/hud/smartphone/messengerTab/chatSection/geolocationBg.png\");\r\n      &__info {\r\n        display: flex;\r\n        flex-direction: column;\r\n        font-size: 0.7rem;\r\n        margin: 0 0 0.2rem 0;\r\n        .desc {\r\n          color: #fff;\r\n          line-height: 0.9rem;\r\n          margin: 0 0 0.05rem 0;\r\n        }\r\n        .value {\r\n          color: #fff;\r\n          line-height: 0.8rem;\r\n          font-weight: 500;\r\n        }\r\n      }\r\n      &__btn {\r\n        width: 1.8rem;\r\n        height: 1.8rem;\r\n        border-radius: 0.5rem;\r\n        background: #fff;\r\n        box-shadow: 0px 0.5rem 1.5rem rgba(78, 110, 216, 0.3);\r\n        transition: all 0.15s;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        &::after {\r\n          content: \"\";\r\n          width: 0.8rem;\r\n          height: 0.8rem;\r\n          mask: center / cover no-repeat url(\"/img/hud/smartphone/messengerTab/chatSection/geoMark.svg\");\r\n          background: #4E6ED9;\r\n        }\r\n        &:hover {\r\n          box-shadow: none;\r\n        }\r\n      }\r\n    }\r\n    .img {\r\n      width: 100%;\r\n      height: auto;\r\n      border-radius: 0.8rem;\r\n      margin: 0 0 0.4rem 0;\r\n    }\r\n    .title {\r\n      font-size: 0.65rem;\r\n      line-height: 0.75rem;\r\n      color: #4E6ED9;\r\n      margin: 0 0 0.15rem 0;\r\n      padding: 0 0.6rem;\r\n    }\r\n    .text {\r\n      display: block;\r\n      padding: 0 0.6rem;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/Smartphone/components/MessengerTab/components/ChatSection/PrivateSubsection"}]}