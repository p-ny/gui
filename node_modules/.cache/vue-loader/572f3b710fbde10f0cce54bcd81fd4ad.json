{"remainingRequest":"C:\\gta go\\Gui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\gta go\\Gui\\src\\views\\Smartphone\\components\\MessengerTab\\components\\ChatSection\\CanalSubsection\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\gta go\\Gui\\src\\views\\Smartphone\\components\\MessengerTab\\components\\ChatSection\\CanalSubsection\\index.vue","mtime":1625151245572},{"path":"C:\\gta go\\Gui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685190017390},{"path":"C:\\gta go\\Gui\\node_modules\\babel-loader\\lib\\index.js","mtime":1685190019507},{"path":"C:\\gta go\\Gui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685190017390},{"path":"C:\\gta go\\Gui\\node_modules\\vue-loader\\lib\\index.js","mtime":1685190022137}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBNdXRhdGlvbnMsIG1hcFN0YXRlLCBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcNCmltcG9ydCBCYWNrQnV0dG9uIGZyb20gJy4uL2NvbW1vbi9CYWNrQnV0dG9uJw0KaW1wb3J0IENyZWF0ZVBvcHVwIGZyb20gJy4vQ3JlYXRlUG9wdXAnDQppbXBvcnQgRWRpdFBvcHVwIGZyb20gJy4vRWRpdFBvcHVwJw0KaW1wb3J0IExpc3RJdGVtIGZyb20gJy4vTElzdEl0ZW0nDQppbXBvcnQgUHJlbG9hZGVyQ2lyY2xlIGZyb20gJy4uLy4uL1ByZWxvYWRlckNpcmNsZScNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnQ2FuYWxTZWN0aW9uJywNCg0KICBjb21wb25lbnRzOiB7DQogICAgQmFja0J1dHRvbiwNCiAgICBDcmVhdGVQb3B1cCwNCiAgICBFZGl0UG9wdXAsDQogICAgTGlzdEl0ZW0sDQogICAgUHJlbG9hZGVyQ2lyY2xlDQogIH0sDQoNCiAgZGF0YTogZnVuY3Rpb24oKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGlzQ3JlYXRpb246IGZhbHNlLA0KICAgICAgaXNFZGl0OiBmYWxzZSwNCiAgICAgIGN1cnJlbnRQb3N0RWRpdGVkSWQ6IG51bGwsDQogICAgICBpdGVtczogW10NCiAgICB9DQogIH0sDQoNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBTdGF0ZSgnc21hcnRwaG9uZScsIFsnY3VycmVudFRhYiddKSwNCiAgICAuLi5tYXBTdGF0ZSgnc21hcnRwaG9uZS9tZXNzYWdlUGFnZScsIFsnbWVzc2VuZ2VyRGF0YSddKSwNCiAgICAuLi5tYXBHZXR0ZXJzKCdsb2NhbGl6YXRpb24nLCBbJ2xvYyddKSwNCiAgfSwNCg0KICB3YXRjaDogew0KICAgIG1lc3NlbmdlckRhdGE6IHsNCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uKCkgew0KICAgICAgICB0aGlzLnNldEN1cnJlbnRQb3N0cygpOw0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUNCiAgICB9IA0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICAuLi5tYXBNdXRhdGlvbnMoJ3NtYXJ0cGhvbmUnLCBbJ3NldEN1cnJlbnRUYWInXSksDQogICAgLi4ubWFwQWN0aW9ucygnc21hcnRwaG9uZS9tZXNzYWdlUGFnZScsIFsnbXNnX2dldElzSGF2ZVBlcm1pc3Npb24nLCAnbXNnX2Ryb3BDdXJyZW50Q2hhdCddKSwNCiAgICBzZXRDdXJyZW50UG9zdHM6IGZ1bmN0aW9uKCkgew0KICAgICAgY29uc3Qgbm9uU29ydGVkSXRlbXMgPSB0aGlzLm1lc3NlbmdlckRhdGEuQ3VycmVudENoYXQuSXRlbXM7DQogICAgICB0aGlzLml0ZW1zID0gbm9uU29ydGVkSXRlbXMuc29ydCgoYSwgYikgPT4gYi5UaW1lIC0gYS5UaW1lKTsNCiAgICB9LA0KDQogICAgY2xvc2VDdXJyZW50Q2hhdDogZnVuY3Rpb24oKSB7DQogICAgICB0aGlzLm1zZ19kcm9wQ3VycmVudENoYXQoKTsNCiAgICB9LA0KDQogICAgZWRpdDogZnVuY3Rpb24oaWQpIHsNCiAgICAgIHRoaXMuaXNFZGl0ID0gdHJ1ZQ0KICAgICAgdGhpcy5jdXJyZW50UG9zdEVkaXRlZElkID0gaWQNCiAgICB9LA0KDQogICAgZGVsZXRlRWRpdFBvc3Q6IGZ1bmN0aW9uKCkgew0KICAgICAgd2luZG93Lm1wLnRyaWdnZXJTZXJ2ZXIoJ3Bob25lOjptc2c6OmRlbGV0ZVBvc3QnLCB0aGlzLmN1cnJlbnRQb3N0RWRpdGVkSWQpOw0KICAgICAgdGhpcy5pc0VkaXQgPSBmYWxzZTsNCiAgICB9LA0KDQogICAgZWRpdENvbmZpcm06IGZ1bmN0aW9uKGltZ1VybCwgdGl0bGUsIHRleHQpIHsNCiAgICAgIHdpbmRvdy5tcC50cmlnZ2VyU2VydmVyKCdwaG9uZTo6bXNnOjplZGl0UG9zdCcsIHRoaXMuY3VycmVudFBvc3RFZGl0ZWRJZCwgaW1nVXJsLCB0aXRsZSwgdGV4dCk7DQogICAgICB0aGlzLmlzRWRpdCA9IGZhbHNlOw0KICAgIH0sDQoNCiAgICBjcmVhdGU6IGZ1bmN0aW9uKGltZ1VybCwgdGl0bGUsIHRleHQpIHsNCiAgICAgIHdpbmRvdy5tcC50cmlnZ2VyU2VydmVyKCdwaG9uZTo6bXNnOjpjcmVhdGVQb3N0JywgdGhpcy5tZXNzZW5nZXJEYXRhLkN1cnJlbnRDaGF0LklkLCBpbWdVcmwsIHRpdGxlLCB0ZXh0KTsgIA0KICAgICAgdGhpcy5pc0NyZWF0aW9uID0gZmFsc2U7DQogICAgfQ0KICB9LA0KDQogIG1vdW50ZWQ6IGZ1bmN0aW9uKCkgew0KICAgIHRoaXMuc2V0Q3VycmVudFBvc3RzKCk7DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/Smartphone/components/MessengerTab/components/ChatSection/CanalSubsection","sourcesContent":["<template>\r\n  <div class=\"canal-subsection\">\r\n    <preloader-circle v-if=\"messengerData.CurrentChat.IsLoading\" />\r\n    <div v-else class=\"canal-subsection__content\">\r\n      <div class=\"canal-subsection__header\">\r\n        <back-button :location=\"{ key: currentTab.key, section: 'GeneralSection' }\" @extraClick=\"closeCurrentChat\" />\r\n        <div class=\"desc\">\r\n          <span class=\"desc__title\">{{ messengerData.CurrentChat.Name }}</span>\r\n          <span class=\"desc__subscribers\">{{loc(`phone:chat:post:1@${messengerData.CurrentChat.SubscribersCount}`)}}</span>\r\n        </div>\r\n        <div \r\n          :style=\"{ background: messengerData.CurrentChat.IconColors }\" \r\n          class=\"avatar\"\r\n          @click=\"setCurrentTab({key: currentTab.key, section: currentTab.section, subsection: 'CanalOptionsSubsection' })\"\r\n        ></div>\r\n      </div>\r\n      <div v-bar>\r\n        <div class=\"canal-subsection__list\">\r\n          <list-item\r\n            v-for=\"item in items\"\r\n            :key=\"item.Id\"\r\n            :item=\"item\"\r\n            @edit=\"edit\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div class=\"canal-subsection__footer\">\r\n        <button v-if=\"messengerData.CurrentChat.CanCreatingPosts\" class=\"btn-create\" @click=\"isCreation = true\">\r\n          <div class=\"icon\"></div>\r\n          <span class=\"text\">{{loc('phone:chat:post:4')}}</span>\r\n        </button>\r\n        <button v-else-if=\"messengerData.CurrentChat.IsMuted\" class=\"btn-create\" @click=\"toggleMuted(false)\">\r\n          <span class=\"text\">{{loc('phone:chat:post:2')}}</span>\r\n        </button>\r\n        <button v-else class=\"btn-create\" @click=\"toggleMuted(true)\">\r\n          <span class=\"text\">{{loc('phone:chat:post:3')}}</span>\r\n        </button>\r\n      </div>\r\n      <transition name=\"smartphone-fade\">\r\n        <div class=\"canal-subsection__layer\" v-if=\"isCreation || isEdit\"></div>\r\n      </transition>\r\n      <transition name=\"smartphone-bottom-to-top-slide\">\r\n        <create-popup v-if=\"isCreation\" @closeCreation=\"isCreation = false\" @create=\"create\" />\r\n      </transition>\r\n      <transition name=\"smartphone-bottom-to-top-slide\">\r\n        <edit-popup\r\n          v-if=\"isEdit\"\r\n          :currentId=\"currentPostEditedId\"\r\n          @close=\"isEdit = false\"\r\n          @confirm=\"editConfirm\"\r\n          @delete=\"deleteEditPost\"\r\n        />\r\n      </transition>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapMutations, mapState, mapActions, mapGetters } from 'vuex'\r\nimport BackButton from '../common/BackButton'\r\nimport CreatePopup from './CreatePopup'\r\nimport EditPopup from './EditPopup'\r\nimport ListItem from './LIstItem'\r\nimport PreloaderCircle from '../../PreloaderCircle'\r\n\r\nexport default {\r\n  name: 'CanalSection',\r\n\r\n  components: {\r\n    BackButton,\r\n    CreatePopup,\r\n    EditPopup,\r\n    ListItem,\r\n    PreloaderCircle\r\n  },\r\n\r\n  data: function() {\r\n    return {\r\n      isCreation: false,\r\n      isEdit: false,\r\n      currentPostEditedId: null,\r\n      items: []\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapState('smartphone', ['currentTab']),\r\n    ...mapState('smartphone/messagePage', ['messengerData']),\r\n    ...mapGetters('localization', ['loc']),\r\n  },\r\n\r\n  watch: {\r\n    messengerData: {\r\n      handler: function() {\r\n        this.setCurrentPosts();\r\n      },\r\n      deep: true\r\n    } \r\n  },\r\n\r\n  methods: {\r\n    ...mapMutations('smartphone', ['setCurrentTab']),\r\n    ...mapActions('smartphone/messagePage', ['msg_getIsHavePermission', 'msg_dropCurrentChat']),\r\n    setCurrentPosts: function() {\r\n      const nonSortedItems = this.messengerData.CurrentChat.Items;\r\n      this.items = nonSortedItems.sort((a, b) => b.Time - a.Time);\r\n    },\r\n\r\n    closeCurrentChat: function() {\r\n      this.msg_dropCurrentChat();\r\n    },\r\n\r\n    edit: function(id) {\r\n      this.isEdit = true\r\n      this.currentPostEditedId = id\r\n    },\r\n\r\n    deleteEditPost: function() {\r\n      window.mp.triggerServer('phone::msg::deletePost', this.currentPostEditedId);\r\n      this.isEdit = false;\r\n    },\r\n\r\n    editConfirm: function(imgUrl, title, text) {\r\n      window.mp.triggerServer('phone::msg::editPost', this.currentPostEditedId, imgUrl, title, text);\r\n      this.isEdit = false;\r\n    },\r\n\r\n    create: function(imgUrl, title, text) {\r\n      window.mp.triggerServer('phone::msg::createPost', this.messengerData.CurrentChat.Id, imgUrl, title, text);  \r\n      this.isCreation = false;\r\n    }\r\n  },\r\n\r\n  mounted: function() {\r\n    this.setCurrentPosts();\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@keyframes fade {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n.canal-subsection {\r\n  height: 100%;\r\n  width: 100%;\r\n  position: relative;\r\n  &__main {\r\n    height: 100%;\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n  }\r\n  &__header {\r\n    flex: 0 0 4.5rem;\r\n    background: #fff;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 2rem 0.5rem 0.5rem 0.75rem;\r\n    position: relative;\r\n    .desc {\r\n      text-align: center;\r\n      position: absolute;\r\n      transform: translate(-50%, 0);\r\n      left: 50%;\r\n      display: flex;\r\n      flex-direction: column;\r\n      &__title {\r\n        font-size: 0.7rem;\r\n        font-weight: 500;\r\n        line-height: 0.8rem;\r\n        color: #020202;\r\n        width: 8.85rem;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n      }\r\n      &__subscribers {\r\n        margin: 0.1rem 0 0 0;\r\n        font-size: 0.65rem;\r\n        line-height: 0.75rem;\r\n        color: #9E9EA2;\r\n      }\r\n    }\r\n    .avatar {\r\n      width: 2rem;\r\n      height: 2rem;\r\n      border-radius: 50%;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      &::after {\r\n        content: '';\r\n        background: center /contain no-repeat url(\"/img/hud/smartphone/messengerTab/megaphone.svg\");\r\n        width: 0.9rem;\r\n        height: 0.9rem;\r\n      }\r\n    }\r\n  }\r\n  &__list {\r\n    height: 25rem !important;\r\n  }\r\n  &__footer {\r\n    height: 3.5rem;\r\n    display: flex;\r\n    justify-content: center;\r\n    background: #fff;\r\n    padding: 1rem 0 0 0;\r\n    .btn-create {\r\n      display: flex;\r\n      align-items: center;\r\n      height: fit-content;\r\n      background: transparent;\r\n      &:hover {\r\n        .icon {\r\n          opacity: 1;\r\n        }\r\n        .text::after {\r\n          transform: scale(1);\r\n        }\r\n      }\r\n      .icon {\r\n        mask: url(\"/img/hud/smartphone/messengerTab/edit.svg\") no-repeat center / contain;\r\n        background: #4E6ED9;\r\n        opacity: 0.5;\r\n        width: 0.9rem;\r\n        height: 0.9rem;\r\n        transition: opacity 0.2s;\r\n      }\r\n      .text {\r\n        font-size: 0.7rem;\r\n        line-height: 0.8rem;\r\n        color: #4E6ED9;\r\n        margin: 0 0 0 0.5rem;\r\n        position: relative;\r\n        &::after {\r\n          position: absolute;\r\n          transform: scale(0);\r\n          transition: transform 0.2s;\r\n          top: 100%;\r\n          left: 0;\r\n          width: 100%;\r\n          content: '';\r\n          height: 1px;\r\n          background: rgba(78, 110, 217, 0.3);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  &__layer {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(0, 0, 0, 0.7);\r\n  }\r\n}\r\n.canal-subsection__layer-enter-active {\r\n  animation: fade 0.4s;\r\n}\r\n.canal-subsection__layer-leave-active {\r\n  animation: fade 0.4s reverse;\r\n}\r\n</style>\r\n"]}]}