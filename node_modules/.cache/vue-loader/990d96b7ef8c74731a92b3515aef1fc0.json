{"remainingRequest":"D:\\downloads\\UNIQ\\Gui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\downloads\\UNIQ\\Gui\\src\\views\\NewDonateShop\\Inventory\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\downloads\\UNIQ\\Gui\\src\\views\\NewDonateShop\\Inventory\\index.vue","mtime":1625151238041},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685190017390},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\babel-loader\\lib\\index.js","mtime":1685190019507},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685190017390},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\vue-loader\\lib\\index.js","mtime":1685190022137}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnDQppbXBvcnQgSXRlbSBmcm9tICcuL0l0ZW0nDQppbXBvcnQge2l0ZW1CeUlkLGdldFJhcml0eVByaWNlfSBmcm9tICcuLi8uLi8uLi9jb25maWdzL25ld0RvbmF0ZVNob3AnDQoNCmV4cG9ydCBkZWZhdWx0IHsgICANCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgY3VycmVudEl0ZW06IG51bGwsDQogICAgICAgICAgICBjb3VudDogMCwNCiAgICAgICAgICAgIHNwYW1Qcm90ZWN0aW9uOiAwDQogICAgICAgIH0NCiAgICB9LA0KICAgIGNvbXB1dGVkOnsNCiAgICAgICAgLi4ubWFwU3RhdGUoIm5ld0RvbmF0ZVNob3AvaW52ZW50b3J5IiwgWyJpdGVtcyJdKSwNCiAgICAgICAgLi4ubWFwR2V0dGVycygnbG9jYWxpemF0aW9uJywgWydsb2MnXSksDQogICAgICAgIGl0ZW1MaXN0KCl7DQogICAgICAgICAgICBjb25zdCBsaXN0ID0gW107DQogICAgICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goaSA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IGl0ZW1CeUlkKGkuaWQpOw0KICAgICAgICAgICAgICAgIGlmKGl0ZW0gIT09IHVuZGVmaW5lZCkNCiAgICAgICAgICAgICAgICAgICAgbGlzdC5wdXNoKHtpdGVtLCBjb3VudDogaS5jb3VudCwgc2VsbDogaS5zZWxsfSk7DQogICAgICAgICAgICAgICAgZWxzZSANCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYGJhZEludmVudG9yeUl0ZW06ICR7aS5pZH1gKQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgDQogICAgICAgICAgICBpZihsaXN0Lmxlbmd0aCA8IDM2KXsNCiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IGxpc3QubGVuZ3RoOyBpbmRleCA8IDM2OyBpbmRleCsrKSB7DQogICAgICAgICAgICAgICAgICAgIGxpc3QucHVzaCh7aXRlbTpudWxsLCBjb3VudDotMSwgc2VsbDogZmFsc2V9KSAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIGxpc3Q7DQogICAgICAgIH0sDQogICAgICAgIHNlbGxQcmljZSgpew0KICAgICAgICAgICAgcmV0dXJuIGdldFJhcml0eVByaWNlKHRoaXMuY3VycmVudEl0ZW0uaXRlbS5yYXJpdHkpDQogICAgICAgIH0sDQogICAgICAgIGNhblNlbGwoKXsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRJdGVtLnNlbGwgJiYgdGhpcy5jdXJyZW50SXRlbS5jb3VudCA+PSB0aGlzLmN1cnJlbnRJdGVtLml0ZW0uY291bnQNCiAgICAgICAgfSwNCiAgICAgICAgaXNTdGFja2FibGUoKXsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRJdGVtLml0ZW0uZGF0YS5TdGFja2FibGUNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBpc1NwYW0oKXsNCiAgICAgICAgICAgIGlmKHRoaXMuc3BhbVByb3RlY3Rpb24gPiBEYXRlLm5vdygpKSByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIHRoaXMuc3BhbVByb3RlY3Rpb24gPSBEYXRlLm5vdygpICsgMTAwMDsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfSwNCiAgICAgICAgc2VsZWN0SXRlbShpdGVtKXsNCiAgICAgICAgICAgIGlmKHRoaXMuY3VycmVudEl0ZW0gPT09IGl0ZW0pew0KICAgICAgICAgICAgICAgIHRoaXMudG9JbnZlbm50b3J5KCk7DQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJdGVtID0gaXRlbTsNCiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gMTsNCiAgICAgICAgICAgICAgICB0aGlzLnBsYXlDbGljaygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBwbGF5SG92ZXIoKXsNCiAgICAgICAgICAgIGlmKHRoaXMuaXRlbSA9PT0gbnVsbCkgcmV0dXJuOw0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzb3VuZHMvcGxheSIsIHsibmFtZSI6ICJkc2hvcF9ob3ZlciIsICJ2b2x1bWUiOiAuN30pDQogICAgICAgIH0sDQogICAgICAgIHBsYXlDbGljaygpew0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzb3VuZHMvcGxheSIsIHsibmFtZSI6ICJkc2hvcF9jbGljayIsICJ2b2x1bWUiOiAuN30pDQogICAgICAgIH0sDQogICAgICAgIHRvSW52ZW5udG9yeSgpew0KICAgICAgICAgICAgaWYodGhpcy5pc1NwYW0oKSkgcmV0dXJuOw0KICAgICAgICAgICAgaWYodGhpcy5jb3VudCA8IDEgfHwgdGhpcy5jb3VudCA+IHRoaXMuY3VycmVudEl0ZW0uY291bnQpew0KICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSAxOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHdpbmRvdy5tcC50cmlnZ2VyU2VydmVyKCJkc2hvcDppbnZlbnRvcnk6aXRlbTp1c2UiLCB0aGlzLmN1cnJlbnRJdGVtLml0ZW0uaWQsIHRoaXMuY3VycmVudEl0ZW0uc2VsbCwgdGhpcy5pc1N0YWNrYWJsZSA/IHRoaXMuY291bnQgOiAxKTsNCiAgICAgICAgICAgIHRoaXMuY3VycmVudEl0ZW0gPSBudWxsOw0KICAgICAgICAgICAgdGhpcy5wbGF5Q2xpY2soKTsNCiAgICAgICAgfSwNCiAgICAgICAgc2VsbCgpew0KICAgICAgICAgICAgaWYodGhpcy5pc1NwYW0oKSkgcmV0dXJuOw0KICAgICAgICAgICAgd2luZG93Lm1wLnRyaWdnZXJTZXJ2ZXIoImRzaG9wOmludmVudG9yeTppdGVtOnNlbGwiLCB0aGlzLmN1cnJlbnRJdGVtLml0ZW0uaWQsIHRoaXMuY3VycmVudEl0ZW0uc2VsbCkNCiAgICAgICAgICAgIHRoaXMuY3VycmVudEl0ZW0gPSBudWxsOw0KICAgICAgICAgICAgdGhpcy5wbGF5Q2xpY2soKTsNCiAgICAgICAgfSwNCiAgICAgICAga2V5SGFuZGxlcihlKXsNCiAgICAgICAgICAgIGlmKGUua2V5Q29kZSA9PSAyNykNCiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCJvbkNsb3NlTWVudSIpOw0KICAgICAgICB9DQogICAgfSwNCiAgICBjb21wb25lbnRzOnsNCiAgICAgICAgSXRlbQ0KICAgIH0sDQogICAgbW91bnRlZCgpew0KICAgICAgICBhZGRFdmVudExpc3RlbmVyKCJrZXl1cCIsIHRoaXMua2V5SGFuZGxlcik7DQogICAgfSwNCiAgICBiZWZvcmVEZXN0cm95KCl7DQogICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoImtleXVwIiwgdGhpcy5rZXlIYW5kbGVyKTsNCiAgICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/NewDonateShop/Inventory","sourcesContent":["<template>\r\n    <div class=\"newdshop-inv\">\r\n        <div class=\"newdshop-inv-items\">\r\n            <div class=\"newdshop-inv-items_title\">{{loc('newdshop:inv:items:tit')}}</div>\r\n            <div class=\"newdshop-inv-items_list\">\r\n                <Item v-for=\"(item, index) in itemList\" :key=\"index\" \r\n                    :item=\"item\" \r\n                    :count=\"+item.count\" \r\n                    :selected=\"currentItem !== null && currentItem === item\"\r\n                    @onSelect=\"selectItem\"\r\n                />\r\n            </div>\r\n        </div>\r\n        <div class=\"newdshop-inv-info\">\r\n            <template v-if=\"currentItem\">\r\n                <div class=\"newdshop-inv-info_title\">\r\n                    {{currentItem.item.name}}\r\n                </div>\r\n                <img v-if=\"currentItem\" class=\"newdshop-inv-info_img\" :src=\"`/img/newDonateShop/items/${currentItem.item.image}.png`\" alt=\"item\">\r\n                <div class=\"newdshop-inv-info_btns\">\r\n                    <div v-if=\"isStackable\" class=\"newdshop-inv-info_stack\">\r\n                        <input class=\"newdshop-inv-info_input\" type=\"number\" v-model=\"count\" min=\"1\" :max=\"currentItem.count\">\r\n                        <div class=\"newdshop-inv-info_btn2\" @mouseenter=\"playHover\" @click=\"toInvenntory\">{{loc('newdshop:inv:info:btn:take')}}</div>\r\n                    </div>\r\n                    <div v-else class=\"newdshop-inv-info_btn\" @mouseenter=\"playHover\" @click=\"toInvenntory\">{{loc('newdshop:inv:info:btn:take')}}</div>\r\n                    <div class=\"newdshop-inv-info_btn\" @mouseenter=\"playHover\"  @click=\"sell\" v-if=\"canSell\">\r\n                        {{loc('newdshop:inv:info:btn:sell')}} X{{currentItem.item.count}} \r\n                        <div class=\"newdshop-inv-info_decor\"></div> \r\n                        <img src=\"/img/newDonateShop/header_coin.png\" alt=\"coin\" class=\"newdshop-inv-info_coin\"> \r\n                        <div class=\"newdshop-inv-info_price\">{{sellPrice.toLocaleString()}}</div>\r\n                    </div>\r\n                </div>\r\n            </template>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapGetters } from 'vuex'\r\nimport Item from './Item'\r\nimport {itemById,getRarityPrice} from '../../../configs/newDonateShop'\r\n\r\nexport default {   \r\n    data() {\r\n        return {\r\n            currentItem: null,\r\n            count: 0,\r\n            spamProtection: 0\r\n        }\r\n    },\r\n    computed:{\r\n        ...mapState(\"newDonateShop/inventory\", [\"items\"]),\r\n        ...mapGetters('localization', ['loc']),\r\n        itemList(){\r\n            const list = [];\r\n            this.items.forEach(i => {\r\n                const item = itemById(i.id);\r\n                if(item !== undefined)\r\n                    list.push({item, count: i.count, sell: i.sell});\r\n                else \r\n                    console.log(`badInventoryItem: ${i.id}`)\r\n            });\r\n          \r\n            if(list.length < 36){\r\n                for (let index = list.length; index < 36; index++) {\r\n                    list.push({item:null, count:-1, sell: false})                    \r\n                }\r\n            }\r\n            return list;\r\n        },\r\n        sellPrice(){\r\n            return getRarityPrice(this.currentItem.item.rarity)\r\n        },\r\n        canSell(){\r\n            return this.currentItem.sell && this.currentItem.count >= this.currentItem.item.count\r\n        },\r\n        isStackable(){\r\n            return this.currentItem.item.data.Stackable\r\n        }\r\n    },\r\n    methods: {\r\n        isSpam(){\r\n            if(this.spamProtection > Date.now()) return true;\r\n            this.spamProtection = Date.now() + 1000;\r\n            return false;\r\n        },\r\n        selectItem(item){\r\n            if(this.currentItem === item){\r\n                this.toInvenntory();\r\n            }else{\r\n                this.currentItem = item;\r\n                this.count = 1;\r\n                this.playClick();\r\n            }\r\n        },\r\n        playHover(){\r\n            if(this.item === null) return;\r\n            this.$store.commit(\"sounds/play\", {\"name\": \"dshop_hover\", \"volume\": .7})\r\n        },\r\n        playClick(){\r\n            this.$store.commit(\"sounds/play\", {\"name\": \"dshop_click\", \"volume\": .7})\r\n        },\r\n        toInvenntory(){\r\n            if(this.isSpam()) return;\r\n            if(this.count < 1 || this.count > this.currentItem.count){\r\n                this.count = 1;\r\n                return;\r\n            }\r\n            window.mp.triggerServer(\"dshop:inventory:item:use\", this.currentItem.item.id, this.currentItem.sell, this.isStackable ? this.count : 1);\r\n            this.currentItem = null;\r\n            this.playClick();\r\n        },\r\n        sell(){\r\n            if(this.isSpam()) return;\r\n            window.mp.triggerServer(\"dshop:inventory:item:sell\", this.currentItem.item.id, this.currentItem.sell)\r\n            this.currentItem = null;\r\n            this.playClick();\r\n        },\r\n        keyHandler(e){\r\n            if(e.keyCode == 27)\r\n                this.$emit(\"onCloseMenu\");\r\n        }\r\n    },\r\n    components:{\r\n        Item\r\n    },\r\n    mounted(){\r\n        addEventListener(\"keyup\", this.keyHandler);\r\n    },\r\n    beforeDestroy(){\r\n        removeEventListener(\"keyup\", this.keyHandler);\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.newdshop-inv{\r\n   text-transform: uppercase;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding: 0 5rem;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: url(/img/optionsMenu/bg.png) no-repeat center;\r\n    background-size: cover;\r\n    &-items{\r\n        width: 37rem;\r\n        &_title{\r\n            margin-top: 5rem;\r\n            font-size: 3rem;\r\n        }\r\n        &_list{\r\n            max-height: 40rem;\r\n            display: flex;\r\n            flex-wrap: wrap;\r\n            overflow: hidden scroll;\r\n            &::-webkit-scrollbar {\r\n                width: 0;\r\n            }\r\n                &::-webkit-scrollbar-track {\r\n                border: solid 0 transparent;\r\n                margin: .1rem;\r\n            }\r\n                &::-webkit-scrollbar-thumb {\r\n                border: solid 0 transparent;      \r\n                background-color: rgba(#fff,.1);\r\n            }\r\n        }\r\n    }\r\n    &-info{\r\n        width: 45rem ;\r\n        height: 45rem;\r\n        background: url(/img/newDonateShop/inventory/info_bg.svg) no-repeat center;\r\n        background-size: contain;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        flex-direction: column;\r\n        &_img{\r\n            height: 13rem;\r\n        }\r\n        &_title{\r\n            position: absolute;\r\n            top: 6rem;\r\n            \r\n            font-size: 2rem;\r\n            text-shadow: -.5rem -.5rem 2rem rgba(255, 255, 255, 0.5);\r\n        }\r\n        &_btns{\r\n            position: absolute;\r\n            bottom: 6rem;\r\n        }\r\n        &_btn{\r\n            width: 19rem;\r\n            height: 3.1rem;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            background: rgba(255, 255, 255, 0.2);\r\n            border-radius: .2rem;\r\n            margin-top: 1rem;\r\n            &:first-child{\r\n                background: #9FBA1B;\r\n            }\r\n            &:hover{\r\n                transform: scale(1.02)\r\n            }\r\n        }\r\n        &_stack{\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: space-between;\r\n        }\r\n        &_btn2{\r\n            width: 14rem;\r\n            height: 3.1rem;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n            border-radius: .2rem;\r\n            margin-top: 1rem;\r\n            background: #9FBA1B;\r\n            &:hover{\r\n                transform: scale(1.02)\r\n            }\r\n        }\r\n        &_input{\r\n            width: 4.5rem;\r\n            height: 3.1rem;\r\n            border-radius: .2rem;\r\n            margin-top: 1rem;\r\n            background: rgba(0, 0, 0, 0.5);\r\n            border: 1px solid rgba(255, 255, 255, 0.5);\r\n            color: #fff;\r\n            text-align: center;\r\n            font-size: 1.5rem;\r\n            text-transform: uppercase;\r\n            &::-webkit-inner-spin-button {\r\n                -webkit-appearance: none;\r\n                margin: 0;\r\n            }\r\n        }\r\n        &_decor{\r\n            width: 1px;\r\n            height: 1.5rem;\r\n            background: rgba(255, 255, 255, 0.2);\r\n            margin: 0 .5rem;\r\n        }\r\n        &_coin{\r\n            margin-right: .5rem;\r\n            filter: drop-shadow(0 0 .2rem #FFF205);\r\n        }\r\n    }\r\n}\r\n</style>"]}]}