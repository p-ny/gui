{"remainingRequest":"D:\\downloads\\UNIQ\\Gui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\downloads\\UNIQ\\Gui\\src\\views\\Smartphone\\components\\MessengerTab\\components\\ChatSection\\PrivateSubsection\\MessagesBlockItem.vue?vue&type=style&index=0&id=33465534&lang=scss&scoped=true&","dependencies":[{"path":"D:\\downloads\\UNIQ\\Gui\\src\\views\\Smartphone\\components\\MessengerTab\\components\\ChatSection\\PrivateSubsection\\MessagesBlockItem.vue","mtime":1625043597367},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\css-loader\\dist\\cjs.js","mtime":1685190019100},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1685190024220},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\postcss-loader\\src\\index.js","mtime":1685190021333},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1685190017369},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685190017390},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\vue-loader\\lib\\index.js","mtime":1685190022137}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5tZXNzYWdlcy1ibG9jay1pdGVtIHsNCiAgbWFyZ2luOiAwLjc1cmVtIDAuNXJlbSAwIDAuNzVyZW07DQogIGRpc3BsYXk6IGZsZXg7DQogIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDsNCiAgJi5pbmNvbWUgew0KICAgIG1hcmdpbi1sZWZ0OiAwLjNyZW07DQogICAgLm1lc3NhZ2VzLWJsb2NrLWl0ZW1fX2luZm8gew0KICAgICAgbWFyZ2luLWxlZnQ6IDAuM3JlbTsNCiAgICAgIC5pbmRpY2F0b3Igew0KICAgICAgICBkaXNwbGF5OiBub25lOw0KICAgICAgfQ0KICAgIH0NCiAgICAubWVzc2FnZS1ibG9jay1pdGVtX19jb250ZW50LWZpbGxlciB7DQogICAgICB3aWR0aDogYXV0bzsNCiAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgIH0NCiAgICAuZ2VvbG9jYXRpb24gew0KICAgICAgJl9faW5mbyB7DQogICAgICAgIC5kZXNjIHsNCiAgICAgICAgICBjb2xvcjogIzY1NkY4MjsNCiAgICAgICAgfQ0KICAgICAgICAudmFsdWUgew0KICAgICAgICAgIGNvbG9yOiAjNEU2RUQ5Ow0KICAgICAgICB9DQogICAgICB9DQogICAgICAmX19idG4gew0KICAgICAgICBiYWNrZ3JvdW5kOiAjNEU2RUQ5Ow0KICAgICAgICAmOjphZnRlciB7DQogICAgICAgICAgYmFja2dyb3VuZDogI2ZmZjsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICAubWVzc2FnZXMtYmxvY2staXRlbV9fbWFpbiB7DQogICAgICBib3JkZXItcmFkaXVzOiAxcmVtIDFyZW0gMXJlbSAwOw0KICAgICAgbWF4LXdpZHRoOiBtYXgtY29udGVudDsNCiAgICAgIGJhY2tncm91bmQ6ICNGRkZGRkY7DQogICAgICBjb2xvcjogIzQ2NDY0NjsNCiAgICB9DQogIH0NCiAgJl9faW5mbyB7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDsNCiAgICAuaW5kaWNhdG9yIHsNCiAgICAgIHdpZHRoOiAwLjhyZW07DQogICAgICBoZWlnaHQ6IDAuOHJlbTsNCiAgICAgIGJhY2tncm91bmQ6ICNBN0I3RUM7DQogICAgICBtYXNrOiB1cmwoIi9pbWcvaHVkL3NtYXJ0cGhvbmUvbWVzc2VuZ2VyVGFiL2NoYXRTZWN0aW9uL2RvdWJsZVRpY2suc3ZnIikgbm8tcmVwZWF0IGNlbnRlciAvIGNvbnRhaW47DQogICAgICAmLnJlYWQgew0KICAgICAgICBiYWNrZ3JvdW5kOiAjNEU2RUQ5Ow0KICAgICAgfQ0KICAgIH0NCiAgICAudGltZSB7DQogICAgICBjb2xvcjogI0E3QjdFQzsNCiAgICAgIGZvbnQtc2l6ZTogMC42NXJlbTsNCiAgICAgIGxpbmUtaGVpZ2h0OiAwLjhyZW07DQogICAgfQ0KICB9DQogICZfX2ZpdCB7DQogICAgd2lkdGg6IDUwMDBweDsNCiAgfQ0KICAmX19tYWluIHsNCiAgICBtYXgtd2lkdGg6IG1heC1jb250ZW50Ow0KICAgIG1pbi13aWR0aDogZml0LWNvbnRlbnQ7DQogICAgZmxleDogYXV0bzsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47DQogICAgYWxpZ24taXRlbXM6IGZsZXgtZW5kOw0KICAgIG1hcmdpbjogMCAwIDAgMC4zcmVtOw0KICAgIGZvbnQtc2l6ZTogMC43cmVtOw0KICAgIGxpbmUtaGVpZ2h0OiAwLjlyZW07DQogICAgY29sb3I6ICNmZmY7DQogICAgYmFja2dyb3VuZDogIzRFNkVEOTsNCiAgICBib3JkZXItcmFkaXVzOiAxcmVtIDFyZW0gMCAxcmVtOw0KICAgIHBhZGRpbmc6IDAuM3JlbTsNCiAgICAmLnNvbG8gew0KICAgICAgLmltZyB7DQogICAgICAgIG1hcmdpbjogMDsNCiAgICAgIH0NCiAgICAgIC5nZW9sb2NhdGlvbiB7DQogICAgICAgIG1hcmdpbjogMDsNCiAgICAgIH0NCiAgICB9DQogICAgJi5zb2xvLWltZyB7DQogICAgICBwYWRkaW5nOiAwOw0KICAgICAgYm9yZGVyLXJhZGl1czogMXJlbTsNCiAgICB9DQogICAgLmdlb2xvY2F0aW9uIHsNCiAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICBhbGlnbi1pdGVtczogZmxleC1lbmQ7DQogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgICBoZWlnaHQ6IDUuNXJlbTsNCiAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgYm9yZGVyLXJhZGl1czogMC44cmVtOw0KICAgICAgbWFyZ2luOiAwIDAgMC40cmVtIDA7DQogICAgICBwYWRkaW5nOiAwIDAuNDVyZW0gMC41NXJlbSAwLjQ1cmVtOw0KICAgICAgYmFja2dyb3VuZDogY2VudGVyIC8gY292ZXIgbm8tcmVwZWF0IHVybCgiL2ltZy9odWQvc21hcnRwaG9uZS9tZXNzZW5nZXJUYWIvY2hhdFNlY3Rpb24vZ2VvbG9jYXRpb25CZy5wbmciKTsNCiAgICAgICZfX2luZm8gew0KICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgICAgICBmb250LXNpemU6IDAuN3JlbTsNCiAgICAgICAgbWFyZ2luOiAwIDAgMC4ycmVtIDA7DQogICAgICAgIC5kZXNjIHsNCiAgICAgICAgICBjb2xvcjogI2ZmZjsNCiAgICAgICAgICBsaW5lLWhlaWdodDogMC45cmVtOw0KICAgICAgICAgIG1hcmdpbjogMCAwIDAuMDVyZW0gMDsNCiAgICAgICAgfQ0KICAgICAgICAudmFsdWUgew0KICAgICAgICAgIGNvbG9yOiAjZmZmOw0KICAgICAgICAgIGxpbmUtaGVpZ2h0OiAwLjhyZW07DQogICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgJl9fYnRuIHsNCiAgICAgICAgd2lkdGg6IDEuOHJlbTsNCiAgICAgICAgaGVpZ2h0OiAxLjhyZW07DQogICAgICAgIGJvcmRlci1yYWRpdXM6IDAuNXJlbTsNCiAgICAgICAgYmFja2dyb3VuZDogI2ZmZjsNCiAgICAgICAgYm94LXNoYWRvdzogMHB4IDAuNXJlbSAxLjVyZW0gcmdiYSg3OCwgMTEwLCAyMTYsIDAuMyk7DQogICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjE1czsNCiAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICY6OmFmdGVyIHsNCiAgICAgICAgICBjb250ZW50OiAiIjsNCiAgICAgICAgICB3aWR0aDogMC44cmVtOw0KICAgICAgICAgIGhlaWdodDogMC44cmVtOw0KICAgICAgICAgIG1hc2s6IGNlbnRlciAvIGNvdmVyIG5vLXJlcGVhdCB1cmwoIi9pbWcvaHVkL3NtYXJ0cGhvbmUvbWVzc2VuZ2VyVGFiL2NoYXRTZWN0aW9uL2dlb01hcmsuc3ZnIik7DQogICAgICAgICAgYmFja2dyb3VuZDogIzRFNkVEOTsNCiAgICAgICAgfQ0KICAgICAgICAmOmhvdmVyIHsNCiAgICAgICAgICBib3gtc2hhZG93OiBub25lOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIC5pbWcgew0KICAgICAgd2lkdGg6IDEwMCU7DQogICAgICBoZWlnaHQ6IGF1dG87DQogICAgICBib3JkZXItcmFkaXVzOiAwLjhyZW07DQogICAgICBtYXJnaW46IDAgMCAwLjRyZW0gMDsNCiAgICB9DQogICAgLnRpdGxlIHsNCiAgICAgIGZvbnQtc2l6ZTogMC42NXJlbTsNCiAgICAgIGxpbmUtaGVpZ2h0OiAwLjc1cmVtOw0KICAgICAgY29sb3I6ICM0RTZFRDk7DQogICAgICBtYXJnaW46IDAgMCAwLjE1cmVtIDA7DQogICAgICBwYWRkaW5nOiAwIDAuNnJlbTsNCiAgICB9DQogICAgLnRleHQgew0KICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICBwYWRkaW5nOiAwIDAuNnJlbTsNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["MessagesBlockItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MessagesBlockItem.vue","sourceRoot":"src/views/Smartphone/components/MessengerTab/components/ChatSection/PrivateSubsection","sourcesContent":["<template>\r\n  <div :class=\"[{ income: isIncome }, 'messages-block-item']\">\r\n \r\n    <div v-if=\"!isIncome\" class=\"messages-block-item__fit\"></div>\r\n    <div v-if=\"!isIncome\" class=\"messages-block-item__info\">\r\n      <div :class=\"[{ read: item.IsRead }, 'indicator']\"></div>\r\n      <span class=\"time\">{{ currentTime }}</span>\r\n    </div>\r\n    <div :class=\"[{ solo: !item.Text, 'solo-img': !item.Text }, 'messages-block-item__main']\">\r\n      <img\r\n        v-if=\"item.Attachment.Type === 2\"\r\n        :src=\"item.Attachment.Url\"\r\n        class=\"img\"\r\n      >\r\n      <div class=\"geolocation\" v-if=\"item.Attachment.Type === 0\">\r\n        <div class=\"geolocation__info\">\r\n          <span class=\"desc\">{{loc('phone:group:msgs:1')}}</span>\r\n          <span class=\"value\">{{ loc(`phone:group:msgs:2@${distance}`) }}</span>\r\n        </div>\r\n        <button class=\"geolocation__btn\" @click=\"setWaypoint\"></button>\r\n      </div>\r\n      <span ref=\"text_msg\" class=\"text\" v-html=\"replaceUrlsOnRefs(getTextWithEmoji(item.Text))\"></span>\r\n    </div>\r\n    <div v-if=\"isIncome\" class=\"messages-block-item__info\">\r\n      <div :class=\"[{ read: item.IsRead }, 'indicator']\"></div>\r\n      <span class=\"time\">{{ currentTime }}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState } from 'vuex'\r\nimport { getTextWithEmoji } from \"../common/textEmojiConverter\";\r\nimport { replaceUrlsOnRefs } from \"../common/invitesUrlConverter\";\r\nimport { addHandlersForInvitesClick } from \"../common/invitesClickHandler\";\r\n\r\nexport default {\r\n  name: 'MessagesBlockItem',\r\n\r\n  props: {\r\n    item: Object\r\n  },\r\n\r\n  computed: {\r\n    ...mapState('smartphone', ['geolocation']),\r\n    ...mapState('smartphone/messagePage', ['messengerData']),\r\n    ...mapGetters('localization', ['loc']),\r\n    isIncome: function() {\r\n      return this.messengerData.CurrentAccount.Id !== this.item.SenderId\r\n    },\r\n\r\n    currentTime: function() {\r\n      const date = new Date(this.item.Time)\r\n      const options = { timeZone: 'UTC', hour: 'numeric', minute: 'numeric' }\r\n      \r\n      return date.toLocaleTimeString('ru-RU', options)\r\n    },\r\n\r\n    distance: function() {\r\n      if (this.item.Attachment.Type === 0) {\r\n        const pos1 = this.geolocation.currentPosition\r\n        const pos2 = this.item.Attachment\r\n\r\n        return Math.ceil(this.calculateDistance(pos1.X, pos2.X, pos1.Y, pos2.Y, pos1.Z, pos2.Z))\r\n      }\r\n      else {\r\n        return null;\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    calculateDistance: function(x1, x2, y1, y2, z1, z2) {\r\n      // sqrt((x1 - x2)^2 + (y1 - y2)^2 + (z1 - z2)^2)\r\n      const square = (number) => Math.pow(number, 2) \r\n\r\n      return Math.sqrt(square(x1 - x2) + square(y1 - y2) + square(z1 - z2))\r\n    },\r\n\r\n    getTextWithEmoji: (text) => getTextWithEmoji(text),\r\n\r\n    replaceUrlsOnRefs: (text) => replaceUrlsOnRefs(text),\r\n    \r\n    setWaypoint: function() {\r\n      window.mp.trigger('phone::msg::setGeoposition', this.item.Attachment.X, this.item.Attachment.Y);\r\n    }\r\n  },\r\n\r\n  mounted: function() {\r\n    if (!this.item.Attachment || this.item.Attachment === null) {\r\n      this.item.Attachment = {}\r\n    }\r\n\r\n    addHandlersForInvitesClick(this.$refs['text_msg'], this.$bus);\r\n  },\r\n\r\n  created: function() {\r\n    if (!this.item.Attachment || this.item.Attachment === null) {\r\n      this.item.Attachment = {}\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.messages-block-item {\r\n  margin: 0.75rem 0.5rem 0 0.75rem;\r\n  display: flex;\r\n  align-items: flex-end;\r\n  &.income {\r\n    margin-left: 0.3rem;\r\n    .messages-block-item__info {\r\n      margin-left: 0.3rem;\r\n      .indicator {\r\n        display: none;\r\n      }\r\n    }\r\n    .message-block-item__content-filler {\r\n      width: auto;\r\n      display: block;\r\n    }\r\n    .geolocation {\r\n      &__info {\r\n        .desc {\r\n          color: #656F82;\r\n        }\r\n        .value {\r\n          color: #4E6ED9;\r\n        }\r\n      }\r\n      &__btn {\r\n        background: #4E6ED9;\r\n        &::after {\r\n          background: #fff;\r\n        }\r\n      }\r\n    }\r\n    .messages-block-item__main {\r\n      border-radius: 1rem 1rem 1rem 0;\r\n      max-width: max-content;\r\n      background: #FFFFFF;\r\n      color: #464646;\r\n    }\r\n  }\r\n  &__info {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: flex-end;\r\n    .indicator {\r\n      width: 0.8rem;\r\n      height: 0.8rem;\r\n      background: #A7B7EC;\r\n      mask: url(\"/img/hud/smartphone/messengerTab/chatSection/doubleTick.svg\") no-repeat center / contain;\r\n      &.read {\r\n        background: #4E6ED9;\r\n      }\r\n    }\r\n    .time {\r\n      color: #A7B7EC;\r\n      font-size: 0.65rem;\r\n      line-height: 0.8rem;\r\n    }\r\n  }\r\n  &__fit {\r\n    width: 5000px;\r\n  }\r\n  &__main {\r\n    max-width: max-content;\r\n    min-width: fit-content;\r\n    flex: auto;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: flex-end;\r\n    margin: 0 0 0 0.3rem;\r\n    font-size: 0.7rem;\r\n    line-height: 0.9rem;\r\n    color: #fff;\r\n    background: #4E6ED9;\r\n    border-radius: 1rem 1rem 0 1rem;\r\n    padding: 0.3rem;\r\n    &.solo {\r\n      .img {\r\n        margin: 0;\r\n      }\r\n      .geolocation {\r\n        margin: 0;\r\n      }\r\n    }\r\n    &.solo-img {\r\n      padding: 0;\r\n      border-radius: 1rem;\r\n    }\r\n    .geolocation {\r\n      display: flex;\r\n      align-items: flex-end;\r\n      justify-content: space-between;\r\n      height: 5.5rem;\r\n      width: 100%;\r\n      border-radius: 0.8rem;\r\n      margin: 0 0 0.4rem 0;\r\n      padding: 0 0.45rem 0.55rem 0.45rem;\r\n      background: center / cover no-repeat url(\"/img/hud/smartphone/messengerTab/chatSection/geolocationBg.png\");\r\n      &__info {\r\n        display: flex;\r\n        flex-direction: column;\r\n        font-size: 0.7rem;\r\n        margin: 0 0 0.2rem 0;\r\n        .desc {\r\n          color: #fff;\r\n          line-height: 0.9rem;\r\n          margin: 0 0 0.05rem 0;\r\n        }\r\n        .value {\r\n          color: #fff;\r\n          line-height: 0.8rem;\r\n          font-weight: 500;\r\n        }\r\n      }\r\n      &__btn {\r\n        width: 1.8rem;\r\n        height: 1.8rem;\r\n        border-radius: 0.5rem;\r\n        background: #fff;\r\n        box-shadow: 0px 0.5rem 1.5rem rgba(78, 110, 216, 0.3);\r\n        transition: all 0.15s;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        &::after {\r\n          content: \"\";\r\n          width: 0.8rem;\r\n          height: 0.8rem;\r\n          mask: center / cover no-repeat url(\"/img/hud/smartphone/messengerTab/chatSection/geoMark.svg\");\r\n          background: #4E6ED9;\r\n        }\r\n        &:hover {\r\n          box-shadow: none;\r\n        }\r\n      }\r\n    }\r\n    .img {\r\n      width: 100%;\r\n      height: auto;\r\n      border-radius: 0.8rem;\r\n      margin: 0 0 0.4rem 0;\r\n    }\r\n    .title {\r\n      font-size: 0.65rem;\r\n      line-height: 0.75rem;\r\n      color: #4E6ED9;\r\n      margin: 0 0 0.15rem 0;\r\n      padding: 0 0.6rem;\r\n    }\r\n    .text {\r\n      display: block;\r\n      padding: 0 0.6rem;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}