{"remainingRequest":"C:\\gta go\\Gui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\gta go\\Gui\\src\\views\\TattooShop\\components\\TattoosTab.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\gta go\\Gui\\src\\views\\TattooShop\\components\\TattoosTab.vue","mtime":1625485623253},{"path":"C:\\gta go\\Gui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685190017390},{"path":"C:\\gta go\\Gui\\node_modules\\babel-loader\\lib\\index.js","mtime":1685190019507},{"path":"C:\\gta go\\Gui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685190017390},{"path":"C:\\gta go\\Gui\\node_modules\\vue-loader\\lib\\index.js","mtime":1685190022137}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnDQppbXBvcnQgVGF0dG9vSXRlbSBmcm9tICcuL1RhdHRvb0l0ZW0nDQppbXBvcnQgTWFpbkJ1dHRvbiBmcm9tICcuL01haW5CdXR0b24nDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ1RhdHRvb3NUYWInLA0KDQogIHByb3BzOiB7DQogICAgaXRlbXM6IEFycmF5LA0KICAgIGNhdGVnb3J5OiBTdHJpbmcNCiAgfSwNCg0KICBjb21wb25lbnRzOiB7IFRhdHRvb0l0ZW0sIE1haW5CdXR0b24gfSwNCg0KICBkYXRhOiBmdW5jdGlvbigpIHsNCiAgICByZXR1cm4gew0KICAgICAgY3VycmVudDogMCwNCiAgICAgIGJ1dHRvbnM6IFsNCiAgICAgICAgeyB0ZXh0OiAndGF0dG9vX3Nob3BfMTgnLCBjbGFzczogJ2Nsb3NlJywgZXZlbnQ6IHRoaXMudG9DbG9zZSB9LA0KICAgICAgICB7IHRleHQ6ICd0YXR0b29fc2hvcF8xOScsIGNsYXNzOiAnYWN0JywgZXZlbnQ6IHRoaXMuYnV5IH0sDQogICAgICBdDQogICAgfQ0KICB9LA0KDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwU3RhdGUoJ3RhdHRvb1Nob3AnLCBbJ3RhdHRvb3MnLCAnZ2VuZGVyJywgJ2N1cnJlbnRUYXR0b29zJ10pLA0KICAgIC4uLm1hcEdldHRlcnMoJ2xvY2FsaXphdGlvbicsIFsnbG9jJ10pLA0KICAgIC8vIGFsbFRhdHRvb3NMaXN0KCl7DQogICAgLy8gICBjb25zdCBsaXN0ID0gW107DQogICAgLy8gICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLnRhdHRvb3MpIHsNCiAgICAvLyAgICAgdGhpcy50YXR0b29zW2tleV0uZm9yRWFjaCh0YXR0b28gPT4gew0KICAgIC8vICAgICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLmdlbmRlciA/IHRhdHRvby5NYWxlIDogdGF0dG9vLkZlbWFsZTsNCiAgICAvLyAgICAgICBsaXN0LnB1c2goe2RpY3Q6IHRhdHRvby5EaWN0LCBvdmVybGF5LCBzbG90czogdGF0dG9vLlNsb3RzfSApOw0KICAgIC8vICAgICB9KTsgICAgICAgIA0KICAgIC8vICAgfQ0KICAgIC8vICAgcmV0dXJuIGxpc3Q7DQogICAgLy8gfSwNCiAgICAvLyBvY2N1cGllZCgpew0KICAgIC8vICAgY29uc3Qgb2NjdXBpZWQgPSBbXTsNCiAgICAvLyAgIHRoaXMuY3VycmVudFRhdHRvb3MuZm9yRWFjaCh0PT57DQogICAgLy8gICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuYWxsVGF0dG9vc0xpc3QuZmluZChjPT5jLmRpY3QgPT09IHQuQ29sbGVjdGlvbiAmJiBjLm92ZXJsYXkgPT09IHQuT3ZlcmxheSk7DQogICAgLy8gICAgIGlmKGNvbmZpZyAhPT0gbnVsbCkgb2NjdXBpZWQucHVzaChjb25maWcuc2xvdHMpDQogICAgLy8gICB9KQ0KICAgIC8vICAgcmV0dXJuIG9jY3VwaWVkOw0KICAgIC8vIH0NCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgDQogICAgdG9DbG9zZTogZnVuY3Rpb24oKSB7DQogICAgICB3aW5kb3cubXAudHJpZ2dlcigndGF0dG9vOmNsb3NlJyk7DQogICAgfSwNCg0KICAgIGJ1eTogZnVuY3Rpb24oKSB7DQogICAgICBpZiAodGhpcy5pdGVtc1t0aGlzLmN1cnJlbnRdKSB7DQogICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuaXRlbXNbdGhpcy5jdXJyZW50XTsNCiAgICAgICAgaWYodGhpcy5jdXJyZW50VGF0dG9vcy5maW5kKGM9PmMuQ29sbGVjdGlvbiA9PT0gY29uZmlnLkRpY3QgJiYgKGMuT3ZlcmxheSA9PT0gY29uZmlnLk1hbGUgfHwgYy5PdmVybGF5ID09PSBjb25maWcuRmVtYWxlKSkpIHsNCiAgICAgICAgICB3aW5kb3cuc2V0RGF0YSgnbm90aWZ5TGlzdC9ub3RpZnknLCB7IHR5cGU6IDEsIHBvc2l0aW9uOiAwLCBtZXNzYWdlOiAidGF0dG9vOnNob3A6YWxyZWFkeSIsIHRpbWU6IDMwMDAgfSkNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgd2luZG93Lm1wLnRyaWdnZXIoJ3RhdHRvbzpidXknLCB0aGlzLmNhdGVnb3J5LCBjb25maWcuSWQpOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBiYWNrOiBmdW5jdGlvbigpIHsNCiAgICAgIHRoaXMuJGVtaXQoIm9uQmFjayIpDQogICAgfSwNCg0KICAgIHNlbGVjdFRhdHRvbyhpbmRleCl7DQogICAgICB0aGlzLmN1cnJlbnQgPSBpbmRleDsNCiAgICAgIGlmKHRoaXMuaXRlbXNbdGhpcy5jdXJyZW50XSk7DQogICAgICB7DQogICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuaXRlbXNbdGhpcy5jdXJyZW50XTsNCiAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuZ2VuZGVyID8gY29uZmlnLk1hbGUgOiBjb25maWcuRmVtYWxlOw0KICAgICAgICBpZihuYW1lID09PSAwKSByZXR1cm47DQogICAgICAgIHdpbmRvdy5tcC50cmlnZ2VyKCJ0YXR0b286c2VsZWN0IiwgY29uZmlnLkRpY3QsIG5hbWUsIEpTT04uc3RyaW5naWZ5KGNvbmZpZy5TbG90cykpOw0KICAgICAgfQ0KICAgICAgIA0KICAgIH0sDQogICAgaXNTaG93KHRhdHRvbyl7DQogICAgICAgIHJldHVybiAodGhpcy5nZW5kZXIgPyB0YXR0b28uTWFsZSA6IHRhdHRvby5GZW1hbGUpICE9PSAwOw0KICAgIH0sDQoNCiAgICAvLyBpc1RhdHRvb0F2YWlsYWJsZSh0YXR0b28pew0KICAgIC8vICAgbGV0IHJlc3VsdCA9IHRydWU7DQogICAgLy8gICB0YXR0b28uc2xvdHMuZm9yRWFjaChzPT57DQogICAgLy8gICAgIGlmKHRoaXMub2NjdXBpZWQuZmluZEluZGV4KG89Pm8gPT09IHMpICE9PSAtMSl7DQogICAgLy8gICAgICAgcmVzdWx0ID0gZmFsc2U7DQogICAgLy8gICAgICAgcmV0dXJuOw0KICAgIC8vICAgICB9DQogICAgLy8gICB9KQ0KICAgIC8vICAgcmV0dXJuIHJlc3VsdDsNCiAgICAvLyB9DQogIH0NCn0NCg=="},{"version":3,"sources":["TattoosTab.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TattoosTab.vue","sourceRoot":"src/views/TattooShop/components","sourcesContent":["<template>\r\n  <div class=\"tattoos-tab\">\r\n    <button class=\"tattoos-tab__btn\" @click=\"back\">\r\n      <img\r\n        src=\"img/tattooShop/arrow.svg\"\r\n        alt=\"arrow\"\r\n        class=\"icon\"\r\n      >\r\n      <span class=\"text\">{{loc('tattoo_shop_17')}}</span>\r\n    </button>\r\n    <div class=\"tattoos-tab__list\">\r\n      <tattoo-item\r\n        v-for=\"(tattoo, index) in items\"\r\n        :key=\"index\"\r\n        :tattoo=\"tattoo\"\r\n        :index=\"index\"\r\n        :selected=\"current == index\"\r\n        :show=\"isShow(tattoo)\"\r\n        @onTattooSelect=\"selectTattoo\"\r\n      />\r\n    </div>\r\n    <div class=\"tattoos-tab__actions\">\r\n      <main-button\r\n        v-for=\"(button, index) in buttons\"\r\n        :key=\"index\"\r\n        :button=\"button\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapGetters } from 'vuex'\r\nimport TattooItem from './TattooItem'\r\nimport MainButton from './MainButton'\r\n\r\nexport default {\r\n  name: 'TattoosTab',\r\n\r\n  props: {\r\n    items: Array,\r\n    category: String\r\n  },\r\n\r\n  components: { TattooItem, MainButton },\r\n\r\n  data: function() {\r\n    return {\r\n      current: 0,\r\n      buttons: [\r\n        { text: 'tattoo_shop_18', class: 'close', event: this.toClose },\r\n        { text: 'tattoo_shop_19', class: 'act', event: this.buy },\r\n      ]\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapState('tattooShop', ['tattoos', 'gender', 'currentTattoos']),\r\n    ...mapGetters('localization', ['loc']),\r\n    // allTattoosList(){\r\n    //   const list = [];\r\n    //   for (const key in this.tattoos) {\r\n    //     this.tattoos[key].forEach(tattoo => {\r\n    //       const overlay = this.gender ? tattoo.Male : tattoo.Female;\r\n    //       list.push({dict: tattoo.Dict, overlay, slots: tattoo.Slots} );\r\n    //     });        \r\n    //   }\r\n    //   return list;\r\n    // },\r\n    // occupied(){\r\n    //   const occupied = [];\r\n    //   this.currentTattoos.forEach(t=>{\r\n    //     const config = this.allTattoosList.find(c=>c.dict === t.Collection && c.overlay === t.Overlay);\r\n    //     if(config !== null) occupied.push(config.slots)\r\n    //   })\r\n    //   return occupied;\r\n    // }\r\n  },\r\n\r\n  methods: {\r\n    \r\n    toClose: function() {\r\n      window.mp.trigger('tattoo:close');\r\n    },\r\n\r\n    buy: function() {\r\n      if (this.items[this.current]) {\r\n        const config = this.items[this.current];\r\n        if(this.currentTattoos.find(c=>c.Collection === config.Dict && (c.Overlay === config.Male || c.Overlay === config.Female))) {\r\n          window.setData('notifyList/notify', { type: 1, position: 0, message: \"tattoo:shop:already\", time: 3000 })\r\n          return;\r\n        }\r\n        window.mp.trigger('tattoo:buy', this.category, config.Id);\r\n      }\r\n    },\r\n\r\n    back: function() {\r\n      this.$emit(\"onBack\")\r\n    },\r\n\r\n    selectTattoo(index){\r\n      this.current = index;\r\n      if(this.items[this.current]);\r\n      {\r\n        const config = this.items[this.current];\r\n        const name = this.gender ? config.Male : config.Female;\r\n        if(name === 0) return;\r\n        window.mp.trigger(\"tattoo:select\", config.Dict, name, JSON.stringify(config.Slots));\r\n      }\r\n       \r\n    },\r\n    isShow(tattoo){\r\n        return (this.gender ? tattoo.Male : tattoo.Female) !== 0;\r\n    },\r\n\r\n    // isTattooAvailable(tattoo){\r\n    //   let result = true;\r\n    //   tattoo.slots.forEach(s=>{\r\n    //     if(this.occupied.findIndex(o=>o === s) !== -1){\r\n    //       result = false;\r\n    //       return;\r\n    //     }\r\n    //   })\r\n    //   return result;\r\n    // }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@keyframes shake {\r\n  25% {\r\n    transform: translateX(30%);\r\n  }\r\n  50% {\r\n    transform: translateX(15%);\r\n  }\r\n  75% {\r\n    transform: translateX(30%);\r\n  }\r\n  100% {\r\n    transform: translateX(0);\r\n  }\r\n}\r\n.tattoos-tab {\r\n  padding: 0.4rem 0 0 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  &__btn {\r\n    background: transparent;\r\n    display: flex;\r\n    align-items: center;\r\n    align-self: flex-start;\r\n    &:hover .icon {\r\n      animation: shake 0.5s;\r\n    }\r\n    .icon {\r\n      width: 1rem;\r\n      height: 1rem;\r\n    }\r\n    .text {\r\n      text-transform: uppercase;\r\n      color: #fff;\r\n      margin: 0 0 0 0.55rem;\r\n      font-weight: 300;\r\n    }\r\n  }\r\n  &__list {\r\n    margin: 0.7rem 0 0 0;\r\n    display: grid;\r\n    grid-template-columns: repeat(2, 10.05rem);\r\n    grid-gap: 0.85rem 1.2rem;\r\n    height: 34.65rem;\r\n    overflow-y: auto;\r\n    padding: 0 0.55rem 0 0;\r\n    &::-webkit-scrollbar-track {\r\n      background-color: transparent;\r\n    }\r\n    &::-webkit-scrollbar {\r\n      width: 0.2rem;\r\n      background-color: transparent;\r\n    }\r\n    &::-webkit-scrollbar-thumb {\r\n      background: rgba(255, 255, 255, 0.15);\r\n      border-radius: 0.2rem;\r\n    }\r\n  }\r\n  &__actions {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-self: flex-end;\r\n    width: 15.2rem;\r\n    margin: 1.05rem 0.75rem 0 0;\r\n  }\r\n}\r\n</style>\r\n"]}]}