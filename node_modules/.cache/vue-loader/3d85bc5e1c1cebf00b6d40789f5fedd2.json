{"remainingRequest":"D:\\downloads\\UNIQ\\Gui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\downloads\\UNIQ\\Gui\\src\\views\\Fishing\\components\\MiniGame.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\downloads\\UNIQ\\Gui\\src\\views\\Fishing\\components\\MiniGame.vue","mtime":1625149886056},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685190017390},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\babel-loader\\lib\\index.js","mtime":1685190019507},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685190017390},{"path":"D:\\downloads\\UNIQ\\Gui\\node_modules\\vue-loader\\lib\\index.js","mtime":1685190022137}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge21hcFN0YXRlfSBmcm9tICd2dWV4Jw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKXsNCiAgICByZXR1cm57DQogICAgICBrZXlzOlsNCiAgICAgICAgeyJwcmVzc2VkIjogZmFsc2UsIGtleUNvZGU6IDM4fSwgICAgICAgIA0KICAgICAgICB7InByZXNzZWQiOiBmYWxzZSwga2V5Q29kZTogMzd9LCAgICAgICAgDQogICAgICAgIHsicHJlc3NlZCI6IGZhbHNlLCBrZXlDb2RlOiA0MH0sICAgICAgICANCiAgICAgICAgeyJwcmVzc2VkIjogZmFsc2UsIGtleUNvZGU6IDM5fQ0KICAgICAgXSwNCiAgICAgIGtleTogLTEsDQogICAgICB0aW1lOiAxMDAsDQogICAgICBwcmVzc0ludGVydmFsOiAtMSwNCiAgICAgIG1pbmlHYW1lSW50ZXJ2YWw6IC0xLA0KICAgICAgcHJvZ3Jlc3M6IDUwLA0KICAgICAgc3RlcDogMjAsDQogICAgICBtaXNzOiAwDQogICAgfQ0KICB9LA0KICBtZXRob2RzOnsgICAgDQogICAgZW5kR2FtZShzdGF0dXMpew0KICAgICAgaWYocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT0gJ2RldmVsb3BtZW50JykgDQogICAgICAgIHRoaXMucHJvZ3Jlc3MgPSA1MDsNCiAgICAgIGVsc2UgDQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZmlzaGluZy9taW5pR2FtZUVuZCcsc3RhdHVzKQ0KICAgIH0sDQogICAgdGlja0dhbWUoKXsNCiAgICAgIHRoaXMucHJvZ3Jlc3MgLT0gMTsNCiAgICAgIGlmKHRoaXMucHJvZ3Jlc3MgPiA5OSkgdGhpcy5lbmRHYW1lKHRydWUpOw0KICAgICAgaWYodGhpcy5wcm9ncmVzcyA8IDEpIHRoaXMuZW5kR2FtZShmYWxzZSk7DQogICAgfSwNCiAgICBwdXQoZSl7DQogICAgICBpZighdGhpcy5rZXlzLmZpbmQoaz0+ay5rZXlDb2RlID09PSBlLmtleUNvZGUpKSByZXR1cm47DQogICAgICBpZihlLmtleUNvZGUgPT09IHRoaXMua2V5KQ0KICAgICAgICB0aGlzLnByb2dyZXNzICs9IHRoaXMuc3RlcCAtIHRoaXMubWdEaWZmaWN1bHQ7DQogICAgICBlbHNlIHsNCiAgICAgICAgdGhpcy5wcm9ncmVzcyAtPSAodGhpcy5zdGVwIC0gdGhpcy5tZ0RpZmZpY3VsdCkgKiAyOw0KICAgICAgfQ0KDQogICAgICB0aGlzLmtleSA9IHRoaXMuZ2V0UmFuZG9tS2V5KCk7DQogICAgfSwNCiAgICBnZXRSYW5kb21LZXkoKSB7ICAgICANCiAgICAgIHJldHVybiB0aGlzLmtleXNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5rZXlzLmxlbmd0aCldLmtleUNvZGUNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwU3RhdGUoJ2Zpc2hpbmcnLCBbJ21nRGlmZmljdWx0J10pDQogIH0sDQogIG1vdW50ZWQoKXsNCiAgICB0aGlzLmtleSA9IHRoaXMuZ2V0UmFuZG9tS2V5KCk7DQogICAgd2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIiwgdGhpcy5wdXQpOw0KICAgIHRoaXMucHJlc3NJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7DQogICAgICB0aGlzLnRpY2tHYW1lKCk7DQogICAgfSwgMTAwKTsgICAgICANCiAgfSwNCiAgYmVmb3JlRGVzdHJveSgpew0KICAgIHdpbmRvdy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXl1cCIsIHRoaXMucHV0KTsNCiAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnByZXNzSW50ZXJ2YWwpOw0KICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMubWluaUdhbWVJbnRlcnZhbCk7DQogIH0NCn0NCg=="},{"version":3,"sources":["MiniGame.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MiniGame.vue","sourceRoot":"src/views/Fishing/components","sourcesContent":["<template>\r\n  <div class=\"minigame\">   \r\n    <div class=\"minigame_btn\" \r\n      v-for=\"(btn, index) in keys\" :key=\"index\"\r\n      :class=\"{'minigame_press': key === btn.keyCode}\"\r\n    >\r\n      <img src=\"/img/common/elements/arrow.svg\" alt=\"arrow\">\r\n    </div>\r\n    \r\n    <div class=\"minigame_progress\">\r\n      <div class=\"minigame_thumb\" :style=\"{'width': `${progress}%`}\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState} from 'vuex'\r\n\r\nexport default {\r\n  data(){\r\n    return{\r\n      keys:[\r\n        {\"pressed\": false, keyCode: 38},        \r\n        {\"pressed\": false, keyCode: 37},        \r\n        {\"pressed\": false, keyCode: 40},        \r\n        {\"pressed\": false, keyCode: 39}\r\n      ],\r\n      key: -1,\r\n      time: 100,\r\n      pressInterval: -1,\r\n      miniGameInterval: -1,\r\n      progress: 50,\r\n      step: 20,\r\n      miss: 0\r\n    }\r\n  },\r\n  methods:{    \r\n    endGame(status){\r\n      if(process.env.NODE_ENV == 'development') \r\n        this.progress = 50;\r\n      else \r\n        this.$store.commit('fishing/miniGameEnd',status)\r\n    },\r\n    tickGame(){\r\n      this.progress -= 1;\r\n      if(this.progress > 99) this.endGame(true);\r\n      if(this.progress < 1) this.endGame(false);\r\n    },\r\n    put(e){\r\n      if(!this.keys.find(k=>k.keyCode === e.keyCode)) return;\r\n      if(e.keyCode === this.key)\r\n        this.progress += this.step - this.mgDifficult;\r\n      else {\r\n        this.progress -= (this.step - this.mgDifficult) * 2;\r\n      }\r\n\r\n      this.key = this.getRandomKey();\r\n    },\r\n    getRandomKey() {     \r\n      return this.keys[Math.floor(Math.random() * this.keys.length)].keyCode\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('fishing', ['mgDifficult'])\r\n  },\r\n  mounted(){\r\n    this.key = this.getRandomKey();\r\n    window.document.addEventListener(\"keyup\", this.put);\r\n    this.pressInterval = window.setInterval(() => {\r\n      this.tickGame();\r\n    }, 100);      \r\n  },\r\n  beforeDestroy(){\r\n    window.document.removeEventListener(\"keyup\", this.put);\r\n    window.clearInterval(this.pressInterval);\r\n    window.clearInterval(this.miniGameInterval);\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.minigame{\r\n    position: absolute;\r\n    right: 40rem;\r\n    bottom: 15rem;\r\n    &_btn{\r\n        position: absolute;\r\n        background-color: #eee;\r\n        width: 5vh;\r\n        height: 5vh;\r\n        border-radius: 10px;\r\n        border: 2px solid #000;\r\n        img{\r\n            width: 50%;\r\n            height: 50%;\r\n            margin: 25% 0 0 25%;\r\n        }   \r\n        &:nth-child(1){\r\n            top: 0;\r\n            left: 6vh;\r\n            box-shadow: 1px 1px 3px 0 rgba(#000, .7);\r\n            img{\r\n                transform: rotate(180deg);\r\n            }\r\n        }\r\n        &:nth-child(2){\r\n            top: 6vh;\r\n            left: 0;\r\n            box-shadow: 1px 1px 3px 0 rgba(#000, .7);  \r\n            img{\r\n                transform: rotate(90deg);\r\n            }\r\n        }\r\n        &:nth-child(3){\r\n            top: 6vh;\r\n            left: 6vh;\r\n            box-shadow: 1px 1px 3px 0 rgba(#000, .7);\r\n        }\r\n        &:nth-child(4){\r\n            top: 6vh;\r\n            left: 12vh;\r\n            box-shadow: 1px 1px 3px 1px rgba(#000, .7);\r\n            img{\r\n                transform: rotate(-90deg);\r\n            }\r\n        }     \r\n    }\r\n    &_press{\r\n        transform: scale(1.01) translate(1px, 1px);\r\n        background-color: #0f0;\r\n    }\r\n    &_progress{\r\n        position: absolute;\r\n        top: 13vh;\r\n        left: 0;\r\n        width: 18vh;\r\n        height: 1vh;\r\n        border-radius: 10px;\r\n        background-color: rgb(24, 131, 42);\r\n        overflow: hidden;        \r\n    }\r\n    &_thumb{\r\n        background-color: rgb(203, 241, 195);\r\n        height: 100%;\r\n        position: absolute;\r\n        left: 0;\r\n    }\r\n//     $clr_1: rgb(20, 177, 28);\r\n// $clr_2: rgb(24, 131, 42);\r\n// $clr_3: rgb(255,255,255);\r\n// $clr_4: rgb(203, 241, 195);\r\n// $clr_5: rgb(10, 10, 10);\r\n}\r\n</style>"]}]}